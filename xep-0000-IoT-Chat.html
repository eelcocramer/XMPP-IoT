<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>XEP-xxxx: Chat Interface for Internet of Things Devices</title>
    <link rel="stylesheet" type="text/css" href="xmpp.css">
    <link href="prettify.css" type="text/css" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico"><script type="text/javascript" src="prettify.js"></script><meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=2.0">
    <meta name="DC.Title" content="Chat Interface for Internet of Things Devices">
    <meta name="DC.Creator" content="Peter Waher">
    <meta name="DC.Creator" content="Joachim Lindborg">
    <meta name="DC.Description" content="&#xA;			This specification provides guidelines for how to create a chat interface for Internet of Things devices based on XMPP that both is intuitive for human users&#xA;			but at the same time is consistent with other Internet of Things extensions and underlying architecture. The ambition is also to create an interface that is&#xA;			both user friendly for human users and at the same time can be automated by machines and is consistent between manufacturers, in case other IoT-related extensions&#xA;			cannot be implemented.&#xA;		">
    <meta name="DC.Publisher" content="XMPP Standards Foundation">
    <meta name="DC.Contributor" content="XMPP Extensions Editor">
    <meta name="DC.Date" content="2013-10-30">
    <meta name="DC.Type" content="XMPP Extension Protocol">
    <meta name="DC.Format" content="XHTML">
    <meta name="DC.Identifier" content="XEP-xxxx">
    <meta name="DC.Language" content="en">
    <meta name="DC.Rights" content="This XMPP Extension Protocol is copyright © 1999 - 2013 by the XMPP Standards Foundation (XSF).">
  </head>
  <body onload="prettyPrint()">
    <h1>XEP-xxxx: Chat Interface for Internet of Things Devices</h1>
    <table>
      <tr valign="top">
        <td><strong>Abstract:</strong></td>
        <td>
			This specification provides guidelines for how to create a chat interface for Internet of Things devices based on XMPP that both is intuitive for human users
			but at the same time is consistent with other Internet of Things extensions and underlying architecture. The ambition is also to create an interface that is
			both user friendly for human users and at the same time can be automated by machines and is consistent between manufacturers, in case other IoT-related extensions
			cannot be implemented.
		</td>
      </tr>
      <tr valign="top">
        <td><strong>Authors:</strong></td>
        <td>Peter Waher, Joachim Lindborg</td>
      </tr>
      <tr valign="top">
        <td><strong>Copyright:</strong></td>
        <td>© 1999 - 2013 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</td>
      </tr>
      <tr valign="top">
        <td><strong>Status:</strong></td>
        <td>ProtoXEP</td>
      </tr>
      <tr valign="top">
        <td><strong>Type:</strong></td>
        <td>Standards Track</td>
      </tr>
      <tr valign="top">
        <td><strong>Version:</strong></td>
        <td>0.0.1</td>
      </tr>
      <tr valign="top">
        <td><strong>Last Updated:</strong></td>
        <td>2013-10-30</td>
      </tr>
    </table>
    <hr>
    <p style="color:red">WARNING: This document has not yet been accepted for consideration or approved in any official manner by the XMPP Standards Foundation, and this document is not yet an XMPP Extension Protocol (XEP). If this document is accepted as a XEP by the XMPP Council, it will be published at &lt;<a href="http://xmpp.org/extensions/">http://xmpp.org/extensions/</a>&gt; and announced on the &lt;standards@xmpp.org&gt; mailing list.</p>
    <hr>
    <h2>Table of Contents</h2>
    <div class="indent">
      <p><br>1.  <a href="#intro">Introduction</a><br>2.  <a href="#reqs">Requirements</a><br>3.  <a href="#glossary">Glossary</a><br>4.  <a href="#usecases">Use Cases</a><br>   
      4.1.  <a href="#sect-ID0E3FAC">Readout of devices</a><br>      
      4.1.1.  <a href="#sect-ID0EAGAC">Readout of standalone devices</a><br>        
      4.1.1.1.  <a href="#sect-ID0EEGAC">Reading momentary values from single device or currently selected device</a><br>        
      4.1.1.2.  <a href="#sect-ID0EKHAC">Reading all values from single device or currently selected device</a><br>        
      4.1.1.3.  <a href="#sect-ID0EIIAC">Reading specific momentary field value from single device or currently selected device</a><br>        
      4.1.1.4.  <a href="#sect-ID0EAJAC">Reading specific field values from single device or currently selected device</a><br>      
      4.1.2.  <a href="#sect-ID0EXJAC">Readout of device behind concentrator</a><br>        
      4.1.2.1.  <a href="#sect-ID0E2JAC">Reading momentary values from device behind concentrator</a><br>        
      4.1.2.2.  <a href="#sect-ID0EJKAC">Reading all values from device behind concentrator</a><br>        
      4.1.2.3.  <a href="#sect-ID0EXKAC">Reading specific momentary field value from device behind concentrator</a><br>        
      4.1.2.4.  <a href="#sect-ID0EILAC">Reading specific field values from device behind concentrator</a><br>   
      4.2.  <a href="#sect-ID0E2LAC">Control of devices</a><br>      
      4.2.1.  <a href="#sect-ID0E6LAC">Control of standalone devices</a><br>        
      4.2.1.1.  <a href="#sect-ID0EDMAC">Setting control parameter on single device or currently selected device</a><br>        
      4.2.1.2.  <a href="#sect-ID0E2MAC">Listing control parameters on single device or currently selected device</a><br>        
      4.2.1.3.  <a href="#sect-ID0E3NAC">Displaying current value of control parameter on single device or currently selected device</a><br>      
      4.2.2.  <a href="#sect-ID0EWOAC">Control of device behind concentrator</a><br>        
      4.2.2.1.  <a href="#sect-ID0E1OAC">Setting control parameter on single device behind concentrator</a><br>        
      4.2.2.2.  <a href="#sect-ID0E1PAC">Listing control parameters on single device behind concentrator</a><br>        
      4.2.2.3.  <a href="#sect-ID0EIBAE">Displaying current value of control parameter on single device behind concentrator</a><br>   
      4.3.  <a href="#sect-ID0EFCAE">Configuring devices</a><br>      
      4.3.1.  <a href="#sect-ID0EJCAE">Configuring standalone devices</a><br>        
      4.3.1.1.  <a href="#sect-ID0ENCAE">Listing configuration parameters on currently selected device</a><br>        
      4.3.1.2.  <a href="#sect-ID0EEDAE">Displaying current value of configuration parameter on currently selected device</a><br>        
      4.3.1.3.  <a href="#sect-ID0EVDAE">Editing configuration parameter on currently selected device</a><br>      
      4.3.2.  <a href="#sect-ID0EMEAE">Configuration of device behind concentrator</a><br>        
      4.3.2.1.  <a href="#sect-ID0EQEAE">Listing configuration parameters on single device behind concentrator</a><br>        
      4.3.2.2.  <a href="#sect-ID0EHFAE">Displaying current value of configuration parameter on single device behind concentrator</a><br>        
      4.3.2.3.  <a href="#sect-ID0E2FAE">Editing configuration parameter on single device behind concentrator</a><br>   
      4.4.  <a href="#sect-ID0EYGAE">Node Commands on devices</a><br>      
      4.4.1.  <a href="#sect-ID0E3GAE">Node Commands on standalone devices</a><br>        
      4.4.1.1.  <a href="#sect-ID0EAHAE">Displaying commands available on currently selected device</a><br>        
      4.4.1.2.  <a href="#sect-ID0ERHAE">Selecting command on currently selected device</a><br>        
      4.4.1.3.  <a href="#sect-ID0EXIAE">Editing command parameter in currently selected node command</a><br>        
      4.4.1.4.  <a href="#sect-ID0ESJAE">Executing currently selected node command</a><br>      
      4.4.2.  <a href="#sect-ID0EEKAE">Node Commands on device behind concentrator</a><br>        
      4.4.2.1.  <a href="#sect-ID0EIKAE">Displaying commands available on single device behind concentrator</a><br>        
      4.4.2.2.  <a href="#sect-ID0EZKAE">Selecting command on single device behind concentrator</a><br>   
      4.5.  <a href="#sect-ID0EBMAE">Browsing Data Sources and Nodes on a concentrator</a><br>      
      4.5.1.  <a href="#sect-ID0EFMAE">Selecting Root Node in current data source</a><br>      
      4.5.2.  <a href="#sect-ID0EWMAE">Selecting Root Data Source</a><br>      
      4.5.3.  <a href="#sect-ID0EHNAE">Selecting Item</a><br>   
      4.6.  <a href="#sect-ID0EQOAE">Menu Commands</a><br>      
      4.6.1.  <a href="#currentoptions">List current options</a><br>      
      4.6.2.  <a href="#sect-ID0EPPAE">Go to previous menu</a><br>   
      4.7.  <a href="#sect-ID0E3PAE">User authentication</a><br>5.  <a href="#dataforms">Data Forms</a><br>6.  <a href="#syntax">Syntax</a><br>7.  <a href="#output">Output format</a><br>8.  <a href="#support">Determining Support</a><br>9.  <a href="#impl">Implementation Notes</a><br>   
      9.1.  <a href="#sect-ID0E24AE">Chat sessions</a><br>10.  <a href="#i18n">Internationalization Considerations</a><br>   
      10.1.  <a href="#sect-ID0EH5AE">Localization</a><br>11.  <a href="#security">Security Considerations</a><br>12.  <a href="#iana">IANA Considerations</a><br>13.  <a href="#registrar">XMPP Registrar Considerations</a><br>14.  <a href="#moreinfo">For more information</a></p>
      <p><a href="#appendices">Appendices</a><br>    <a href="#appendix-docinfo">A: Document Information</a><br>    <a href="#appendix-authorinfo">B: Author Information</a><br>    <a href="#appendix-legal">C: Legal Notices</a><br>    <a href="#appendix-xmpp">D: Relation to XMPP</a><br>    <a href="#appendix-discuss">E: Discussion Venue</a><br>    <a href="#appendix-conformance">F: Requirements Conformance</a><br>    <a href="#appendix-notes">G: Notes</a><br>    <a href="#appendix-revs">H: Revision History</a></p>
    </div>
    <hr>
    <h2>1.
       <a name="intro">Introduction</a></h2>
		<p class="" style="">
			Internet of Things (IoT) is often believed to be just an extension of machine-to-machine communication over internet but the human interface to devices are one of the biggest advantage in IoT.
			There are numerous interfaces, mobile applications,html and html5 pages in here we create a human-to-machine interface using plain chat messages. One reason for this is to create a simple
			interface that can be accessed from mobile phones without special software and that can be used during installation of devices. This extension create rules for
			how such an interface is constructed, including chat syntax. The goal is to make the interface:
		</p>
		<ul class="" style="">
			<li class="" style="">
				simple and user-friendly for human users.
			</li>
			<li class="" style="">
				possible to automate by machines.
			</li>
			<li class="" style="">
				is consistent between manufacturers.
			</li>
			<li class="" style="">
				is consistent with other Internet-of-Things extensions and possible underlying architecture.
			</li>
			<li class="" style="">
				include both reading of sensors and control of actuators and configuration.
			</li>
			<li class="" style="">
				possibile to extend
			</li>
		</ul>
	<h2>2.
       <a name="reqs">Requirements</a></h2>
		<p class="" style="">
			Clients and devices must support sending and receiving of normal text messages. See XMPP core specifications for more details about syntax.
		</p>
	<h2>3.
       <a name="glossary">Glossary</a></h2>
		<p class="" style="">The following table lists common terms and corresponding descriptions.</p>
		<div class="indent">
      <dl>
			<di>
				<dt><strong>Actuator</strong></dt>
				<dd>Device containing at least one configurable property or output that can and should be controlled by some other entity or device.</dd>
			</di>
			<di>
				<dt><strong>Computed Value</strong></dt>
				<dd>A value that is computed instead of measured.</dd>
			</di>
			<di>
				<dt><strong>Concentrator</strong></dt>
				<dd>Device managing a set of devices which it publishes on the XMPP network.</dd>
			</di>
			<di>
				<dt><strong>Data Source</strong></dt>
				<dd>
					A Data source contains a collection of nodes. Three types of data sources exist: Singular, Flat and Tree. Singular data sources only include one object.
					Flat data sources contain a list of objects and Tree data sources contain nodes formed as a tree graph with one root element.
				</dd>
			</di>
			<di>
				<dt><strong>Field</strong></dt>
				<dd>
					One item of sensor data. Contains information about: Node, Field Name, Value, Precision, Unit, Value Type, Status, Timestamp, Localization information, etc.
					Fields should be unique within the triple (Node ID, Field Name, Timestamp).
				</dd>
			</di>
			<di>
				<dt><strong>Field Name</strong></dt>
				<dd>Name of a field of sensor data. Examples: Energy, Volume, Flow, Power, etc.</dd>
			</di>
			<di>
				<dt><strong>Field Type</strong></dt>
				<dd>What type of value the field represents. Examples: Momentary Value, Status Value, Identification Value, Calculated Value, Peak Value, Historical Value, etc.</dd>
			</di>
			<di>
				<dt><strong>Historical Value</strong></dt>
				<dd>A value stored in memory from a previous timestamp.</dd>
			</di>
			<di>
				<dt><strong>Identification Value</strong></dt>
				<dd>A value that can be used for identification. (Serial numbers, meter IDs, locations, names, etc.)</dd>
			</di>
			<di>
				<dt><strong>Localization information</strong></dt>
				<dd>Optional information for a field, allowing the sensor to control how the information should be presented to human viewers.</dd>
			</di>
			<di>
				<dt><strong>Meter</strong></dt>
				<dd>A device possible containing multiple sensors, used in metering applications. Examples: Electricity meter, Water Meter, Heat Meter, Cooling Meter, etc.</dd>
			</di>
			<di>
				<dt><strong>Momentary Value</strong></dt>
				<dd>A momentary value represents a value measured at the time of the read-out.</dd>
			</di>
			<di>
				<dt><strong>Node</strong></dt>
				<dd>
					Graphs contain nodes and edges between nodes. In Internet of Things, sensors, actuators, meters, devices, gateways, etc., are often depicted as nodes whereas links between sensors (friendships)
					are depicted as edges. In abstract terms, it's easier to talk about a Node, rather than list different possible node types (sensors, actuators, meters, devices, gateways, etc.).
					Each Node has a Node ID. Nodes belong to a data source, and all nodes have a Node Type. Some nodes have a parent node, and some nodes have child nodes. Nodes with the same
					parent nodes a called sibling nodes.
				</dd>
			</di>
			<di>
				<dt><strong>Node ID</strong></dt>
				<dd>
					An ID uniquely identifying a node within its corresponding context. If a globally unique ID is desired, an architecture should be used using a universally accepted
					ID scheme.
				</dd>
			</di>
			<di>
				<dt><strong>Node Type</strong></dt>
				<dd>Each node has a Node Type. The Node Type defines the functionality of the node in the system.</dd>
			</di>
			<di>
				<dt><strong>Parameter</strong></dt>
				<dd>
					Readable and/or writable property on a node/device. The XEP-0326 <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0326.html">Internet of Things - Concentrators</a></span>  [<a href="#nt-ID0EFBAC">1</a>] deals with reading and writing parameters
					on nodes/devices. Fields are not parameters, and parameters are not fields.
				</dd>
			</di>
			<di>
				<dt><strong>Peak Value</strong></dt>
				<dd>A maximum or minimum value during a given period.</dd>
			</di>
			<di>
				<dt><strong>Precision</strong></dt>
				<dd>
					In physics, precision determines the number of digits of precision. In sensor networks however, this definition is not easily applicable. Instead, precision
					determines, for example, the number of decimals of precision, or power of precision. Example: 123.200 MWh contains 3 decimals of precision. All entities parsing and
					delivering field information in sensor networks should always retain the number of decimals in a message.
				</dd>
			</di>
			<di>
				<dt><strong>Sensor</strong></dt>
				<dd>
					Device measuring at least one digital value (0 or 1) or analog value (value with precision and physical unit). Examples: Temperature sensor, pressure sensor, etc.
					Sensor values are reported as fields during read-out. Each sensor has a unique Node ID.
				</dd>
			</di>
			<di>
				<dt><strong>SN</strong></dt>
				<dd>Sensor Network. A network consisting, but not limited to sensors, where transport and use of sensor data is of primary concern. A sensor network may contain actuators, network applications, monitors, services, etc.</dd>
			</di>
			<di>
				<dt><strong>Status Value</strong></dt>
				<dd>A value displaying status information about something.</dd>
			</di>
			<di>
				<dt><strong>Timestamp</strong></dt>
				<dd>Timestamp of value, when the value was sampled or recorded.</dd>
			</di>
			<di>
				<dt><strong>Token</strong></dt>
				<dd>
					A client, device or user can get a token from a provisioning server. These tokens can be included in requests to other entities in the network, so these entities can validate
					access rights with the provisioning server.
				</dd>
			</di>
			<di>
				<dt><strong>Unit</strong></dt>
				<dd>Physical unit of value. Example: MWh, l/s, etc.</dd>
			</di>
			<di>
				<dt><strong>Value</strong></dt>
				<dd>A field value.</dd>
			</di>
			<di>
				<dt><strong>Value Status</strong></dt>
				<dd>Status of field value. Contains important status information for Quality of Service purposes. Examples: Ok, Error, Warning, Time Shifted, Missing, Signed, etc.</dd>
			</di>
			<di>
				<dt><strong>Value Type</strong></dt>
				<dd>Can be numeric, string, boolean, Date &amp; Time, Time Span or Enumeration.</dd>
			</di>
			<di>
				<dt><strong>WSN</strong></dt>
				<dd>Wireless Sensor Network, a sensor network including wireless devices.</dd>
			</di>
			<di>
				<dt><strong>XMPP Client</strong></dt>
				<dd>Application connected to an XMPP network, having a JID. Note that sensors, as well as applications and services requesting sensor data can be XMPP clients.</dd>
			</di>
		</dl>
    </div>
	<h2>4.
       <a name="usecases">Use Cases</a></h2>
		<p class="" style="">
			All communication between two peers (human or machine) is done using normal text messages. Therefore, all examples in this document will only specify
			the actual text messages being sent, not the underlying XMPP XML stanzas. IoT devices can choose to use forms <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0071.html">XHTML-IM</a></span>  [<a href="#nt-ID0EYEAC">2</a>] to enhance text output, but automatons
			interpreting received messages should use the normal text message as source for their interpretation. This document does not specify any HTML formats used.
		</p>
		<p class="" style="">
			For each usecase there are two specific views one when communicating with a single device and the other when comunicating with devices behind a concentrator.
			Commands are just the same but the graphical structure behind the concentrator can be big.

		</p>
		<p class="" style="">
			Together with the examples, suggested regular expressions will be provided to facilitate machine extraction of information from the text. This document does not
			require the use of regular expressions in any implementation. These expressions act as a documentation of the exact syntax or format of the corresponding text messages.
		</p>
		<p class="" style="">
			<span class="strong">Note 1:</span> The client sending commands should not expect messages to be sent for each row, nor expect all rows in a response to be sent in one message.
			The sender is free to send any number of messages, with any number of rows in each message. Each row SHOULD be separated by a CRLF character sequence.
		</p>
		<p class="" style="">
			<span class="strong">Note 2:</span> In examples where messages are sent in both directions, messages from the requesting party (client) will be prefixed by C:
			and messages from the answering party (server) will be prefixed by S: This is for readability purposes only, and do not represent actual characters
			send in messages.
		</p>
		<p class="" style="">
			<span class="strong">Note 3:</span> When the client sends a column based respons it MUST use \t TAB between them.
		</p>
		<div class="indent">
      <h3>4.1 <a name="sect-ID0E3FAC">Readout of devices</a></h3>
			<div class="indent">
        <h3>4.1.1 <a name="sect-ID0EAGAC">Readout of standalone devices</a></h3>
				<div class="indent">
          <h3>4.1.1.1 <a name="sect-ID0EEGAC">Reading momentary values from single device or currently selected device</a></h3>
					<p class="" style="">
						This is the first and most basic usage after the client has logged in. The single ? asks for a momentary readout of values
						from the fields at the device. If the device has a structure each node in the graph kan be traversed and momentary read out
						This is not a recursive command
					</p>
					<p class="caption"><a name="example-1"></a>Example 1. Requesting a readout of momentary values from single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   ?
					</pre>
          </div>
					<p class="" style="">
						If no locale is present in the message from the client or the device cannot support locale the output comes as fieldnames with values and units
						Note: The readout is performed asynchronously, which may imply a delay before the response is returned.
					</p>
					<p class="caption"><a name="example-2"></a>Example 2. Momentary value response without localized field names</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Readout of Vina del Mar started...
   Condition   Fair
   Condition Code   34
   Temperature   18 °C
   Chill   18 °C
   Wind Direction   330 °
   Wind Speed   14,48 km/h
   Humidity   52 %
   Visibility   9,99 km
   Pressure   1015,92 mbar
   Pressure Trend   Steady
					</pre>
          </div>
					<p class="" style="">
						If locale is present in the message and the client can support the provided locale. The output is extended with the localized fieldnames
						NOTE When doing automation it is recomended not to use locale
						
						
					</p>
					<p class="caption"><a name="example-3"></a>Example 3. Momentary value response with localized field names</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Urläsning av Vina del Mar påbörjad...
   Condition   Fair   (Tillstånd)
   Condition Code   34   (Tillståndskod)
   Temperature   19 °C   (Temperatur)
   Chill   19 °C   (Nedkylning)
   Wind Direction   200 °   (Vindriktning)
   Wind Speed   25,75 km/h   (Vindhastighet)
   Humidity   46 %   (Luftfuktighet)
   Visibility   9,99 km   (Visibilitet)
   Pressure   1015,92 mbar   (Tryck)
   Pressure Trend   Falling   (Lufttryckstrend)
					</pre>
          </div>
					<p class="" style="">
						When creation automation with this as basis the result can be parsed with this suggested regular expression.
						The device MUST use \t as the dividor between parts and CRLF pair as end row
					</p>
					<p class="caption"><a name="example-4"></a>Example 4. Multi-line regular expression for parsing readout results</p>
          <div class="indent">
            <pre class="prettyprint">
						
   ^(?'FieldName'[^\t]+)\t(?'Value'[^\t\n]+)(\t[(](?'Localized'[^)]+)[)])?
					</pre>
          </div>
				</div>
				<div class="indent">
          <h3>4.1.1.2 <a name="sect-ID0EKHAC">Reading all values from single device or currently selected device</a></h3>
					<p class="" style="">
						Using a double ?? makes a deeper introspection and gives a more thorough value set in return
						
					</p>
					<p class="caption"><a name="example-5"></a>Example 5. Requesting a readout of momentary values from single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   ??
					</pre>
          </div>
					
					<p class="caption"><a name="example-6"></a>Example 6. Full readout response without localized field names</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Readout of Vina del Mar started...
   Latitude   Latitude   -33,02 °   2013-11-06 16:49:56   Identity   AutomaticReadout
   Longitude   Longitude   -71,55 °   2013-11-06 16:49:56   Identity   AutomaticReadout
   Condition   Condition   Fair   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Condition Code   Condition Code   34   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Temperature   Temperature   19 °C   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Description   Description   Yahoo! Weather - Vina del Mar, CL   2013-11-06 16:49:56   StatusValues   AutomaticReadout
   City   City   Vina del Mar   2013-11-06 16:49:56   StatusValues   AutomaticReadout
   Country   Country   Chile   2013-11-06 16:49:56   StatusValues   AutomaticReadout
   Chill   Chill   19 °C   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Wind Direction   Wind Direction   200 °   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Wind Speed   Wind Speed   25,75 km/h   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Humidity   Humidity   46 %   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Visibility   Visibility   9,99 km   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Pressure   Pressure   1015,92 mbar   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Pressure Trend   Pressure Trend   Falling   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
					</pre>
          </div>
					
					<p class="caption"><a name="example-7"></a>Example 7. Full readout response with localized field names</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Urläsning av Vina del Mar påbörjad...
   Latitude   Latitud   -33,02 °   2013-11-06 16:49:56   Identity   AutomaticReadout
   Longitude   Longitud   -71,55 °   2013-11-06 16:49:56   Identity   AutomaticReadout
   Condition   Tillstånd   Fair   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Condition Code   Tillståndskod   34   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Temperature   Temperatur   19 °C   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Description   Beskrivning   Yahoo! Weather - Vina del Mar, CL   2013-11-06 16:49:56   StatusValues   AutomaticReadout
   City   Stad   Vina del Mar   2013-11-06 16:49:56   StatusValues   AutomaticReadout
   Country   Land   Chile   2013-11-06 16:49:56   StatusValues   AutomaticReadout
   Chill   Nedkylning   19 °C   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Wind Direction   Vindriktning   200 °   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Wind Speed   Vindhastighet   25,75 km/h   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Humidity   Luftfuktighet   46 %   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Visibility   Visibilitet   9,99 km   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Pressure   Tryck   1015,92 mbar   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
   Pressure Trend   Lufttryckstrend   Falling   2013-11-06 16:49:56   MomentaryValues   AutomaticReadout
					</pre>
          </div>
					
					<p class="caption"><a name="example-8"></a>Example 8. Multi-line regular expression for parsing readout results</p>
          <div class="indent">
            <pre class="prettyprint">
						
   ^(?'FieldName'[^\t]+)\t(?'Localized'[^\t]+)\t(?'Value'[^\t]+)\t(?'Year'\d{4})-(?'Month'\d{2})-(?'Day'\d{2}) (?'Hour'\d{2}):(?'Minute'\d{2}):(?'Second'\d{2})\t(?'Type'[^\t]+)\t(?'Status'[^\n]+)
					</pre>
          </div>
				</div>
				<div class="indent">
          <h3>4.1.1.3 <a name="sect-ID0EIIAC">Reading specific momentary field value from single device or currently selected device</a></h3>
					<p class="" style="">
						Instead of doing full readouts a specific field value can be requested from the device.
						Note the caption is important when sending field names
					</p>
					<p class="caption"><a name="example-9"></a>Example 9. Requesting a readout of a specific momentary value from single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Temperature?
					</pre>
          </div>
					
					<p class="caption"><a name="example-10"></a>Example 10. Specific momentary value response without localized field names</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Readout of klart.se - Stockholm (2) - Albano started...
   Temperature   0 °C
					</pre>
          </div>
					
					<p class="caption"><a name="example-11"></a>Example 11. Specific momentary value response with localized field names</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Temperature?
   Urläsning av klart.se - Stockholm (2) - Albano påbörjad...
   Temperature   0 °C   (Temperatur)
					</pre>
          </div>
					
				</div>
				<div class="indent">
          <h3>4.1.1.4 <a name="sect-ID0EAJAC">Reading specific field values from single device or currently selected device</a></h3>
					
					<p class="caption"><a name="example-12"></a>Example 12. Requesting a readout of specific field values from single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Temperature??
					</pre>
          </div>
					
					<p class="caption"><a name="example-13"></a>Example 13. Full readout response without localized field names</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Readout of klart.se - Stockholm (2) - Albano started...
   Temperature   Temperature   0 °C   2013-11-06 16:00:00   MomentaryValues   AutomaticReadout
   Temperature   Temperature   5 °C   2013-11-06 04:00:00   Computed   AutomaticReadout
   Temperature   Temperature   6 °C   2013-11-06 10:00:00   Computed   AutomaticReadout
   Temperature   Temperature   5 °C   2013-11-06 16:00:00   Computed   AutomaticReadout
   Temperature   Temperature   3 °C   2013-11-07 04:00:00   Computed   AutomaticReadout
   Temperature   Temperature   6 °C   2013-11-07 10:00:00   Computed   AutomaticReadout
   Temperature   Temperature   5 °C   2013-11-07 16:00:00   Computed   AutomaticReadout
   Temperature   Temperature   5 °C   2013-11-08 04:00:00   Computed   AutomaticReadout
   Temperature   Temperature   6 °C   2013-11-08 10:00:00   Computed   AutomaticReadout
   Temperature   Temperature   6 °C   2013-11-08 16:00:00   Computed   AutomaticReadout
   Temperature   Temperature   5 °C   2013-11-09 03:00:00   Computed   AutomaticReadout
   Temperature   Temperature   7 °C   2013-11-09 09:00:00   Computed   AutomaticReadout
   Temperature   Temperature   6 °C   2013-11-09 15:00:00   Computed   AutomaticReadout
   Temperature   Temperature   5 °C   2013-11-10 03:00:00   Computed   AutomaticReadout
   Temperature   Temperature   5 °C   2013-11-10 09:00:00   Computed   AutomaticReadout
   Temperature   Temperature   4 °C   2013-11-10 15:00:00   Computed   AutomaticReadout
					</pre>
          </div>
					
					<p class="caption"><a name="example-14"></a>Example 14. Full readout response with localized field names</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Urläsning av klart.se - Stockholm (2) - Albano påbörjad...
   Temperature   Temperatur   0 °C   2013-11-06 16:00:00   MomentaryValues   AutomaticReadout
   Temperature   Temperatur   5 °C   2013-11-06 04:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   6 °C   2013-11-06 10:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   5 °C   2013-11-06 16:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   3 °C   2013-11-07 04:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   6 °C   2013-11-07 10:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   5 °C   2013-11-07 16:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   5 °C   2013-11-08 04:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   6 °C   2013-11-08 10:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   6 °C   2013-11-08 16:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   5 °C   2013-11-09 03:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   7 °C   2013-11-09 09:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   6 °C   2013-11-09 15:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   5 °C   2013-11-10 03:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   5 °C   2013-11-10 09:00:00   Computed   AutomaticReadout
   Temperature   Temperatur   4 °C   2013-11-10 15:00:00   Computed   AutomaticReadout
					</pre>
          </div>
					
				</div>
			</div>
			<div class="indent">
        <h3>4.1.2 <a name="sect-ID0EXJAC">Readout of device behind concentrator</a></h3>
				<div class="indent">
          <h3>4.1.2.1 <a name="sect-ID0E2JAC">Reading momentary values from device behind concentrator</a></h3>
					<p class="" style="">
						To request data from devices behind a concentrator you do the same as for single devices but you need to traverse the graph through the concentrator to extract values
						the traversal is done with the menu numbers returned at each junction in the graph of nodes see the menu command below
					</p>
					<p class="caption"><a name="example-15"></a>Example 15. Requesting a readout of momentary values from a device behind a concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Vina del Mar?
					</pre>
          </div>
					
				</div>
				<div class="indent">
          <h3>4.1.2.2 <a name="sect-ID0EJKAC">Reading all values from device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-16"></a>Example 16. Requesting a readout of all values from a device behind a concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Vina del Mar??
					</pre>
          </div>
					
					
				</div>
				<div class="indent">
          <h3>4.1.2.3 <a name="sect-ID0EXKAC">Reading specific momentary field value from device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-17"></a>Example 17. Requesting a readout of a specific momentary value from a device behind a concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Vina del Mar.Temperature?
					</pre>
          </div>
					
					<p class="caption"><a name="example-18"></a>Example 18. Alternative method of requesting a readout of a specific momentary value from a device behind a concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Temperature@Vina del Mar?
					</pre>
          </div>
					
				</div>
				<div class="indent">
          <h3>4.1.2.4 <a name="sect-ID0EILAC">Reading specific field values from device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-19"></a>Example 19. Requesting a readout of specific field values from a device behind a concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Vina del Mar.Temperature??
					</pre>
          </div>
					
					<p class="caption"><a name="example-20"></a>Example 20. Alternative method of requesting a readout of specific field values from a device behind a concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Temperature@Vina del Mar??
					</pre>
          </div>
					
				</div>
			</div>
		</div>
		<div class="indent">
      <h3>4.2 <a name="sect-ID0E2LAC">Control of devices</a></h3>
			<div class="indent">
        <h3>4.2.1 <a name="sect-ID0E6LAC">Control of standalone devices</a></h3>
				<div class="indent">
          <h3>4.2.1.1 <a name="sect-ID0EDMAC">Setting control parameter on single device or currently selected device</a></h3>
					<p class="" style="">
						When setting a value on a field we use the = or !. The notion for ! is that the value i applied onto the node object. which will
						analog with the applying commands and cofigurations later.
						The caption is important when specifying the the fieldname
					</p>
					<p class="caption"><a name="example-21"></a>Example 21. Requesting a control parameter to be set to a new value on a single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output=75
					</pre>
          </div>
					
					<p class="caption"><a name="example-22"></a>Example 22. Alternative method for requesting a control parameter to be set to a new value on a single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output!75
					</pre>
          </div>
					
					<p class="caption"><a name="example-23"></a>Example 23. Control parameter response when parameter has been successfully set</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output=75
					</pre>
          </div>
					
				</div>
				<div class="indent">
          <h3>4.2.1.2 <a name="sect-ID0E2MAC">Listing control parameters on single device or currently selected device</a></h3>
					
					<p class="caption"><a name="example-24"></a>Example 24. Listing control parameters on single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   =?
					</pre>
          </div>
					
					<p class="caption"><a name="example-25"></a>Example 25. Alternative method for listing control parameters on single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   !?
					</pre>
          </div>
					
					<p class="caption"><a name="example-26"></a>Example 26. List of control parameters</p>
          <div class="indent">
            <pre class="prettyprint">
						
   1. Output=0 (Output)
   0. Tillbaka
					</pre>
          </div>
					
					<p class="" style="">
						After the list of parameters has been sent, the device can optionally send a data form with the same parameters. If the client supports
						forms it can present the form in a more user friendly window. See <a href="#dataforms">Data Forms</a> for more information. Submitting the
						form means executing the corresponding control commands.
					</p>
					<p class="caption"><a name="example-27"></a>Example 27. Using menu shortcuts</p>
          <div class="indent">
            <pre class="prettyprint">
						
   C: =?
   S: 1. Output=0 (Output)
   S: 0. Tillbaka
   C: 1=75
   S: Output=75
					</pre>
          </div>
				</div>
				<div class="indent">
          <h3>4.2.1.3 <a name="sect-ID0E3NAC">Displaying current value of control parameter on single device or currently selected device</a></h3>
					
					<p class="caption"><a name="example-28"></a>Example 28. Displaying current value of control parameter on single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output=?
					</pre>
          </div>
					
					<p class="caption"><a name="example-29"></a>Example 29. Alternative method for displaying current value of control parameter on single device or currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output!?
					</pre>
          </div>
					
					<p class="caption"><a name="example-30"></a>Example 30. Listing control parameter</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output=0
					</pre>
          </div>
					
					<p class="caption"><a name="example-31"></a>Example 31. Using menu shortcuts</p>
          <div class="indent">
            <pre class="prettyprint">
						
   C: =?
   S: 1. Output=0 (Output)
   S: 0. Tillbaka
   C: 1=?
   S: Output=75
					</pre>
          </div>
				</div>
			</div>
			<div class="indent">
        <h3>4.2.2 <a name="sect-ID0EWOAC">Control of device behind concentrator</a></h3>
				<div class="indent">
          <h3>4.2.2.1 <a name="sect-ID0E1OAC">Setting control parameter on single device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-32"></a>Example 32. Requesting a control parameter to be set to a new value on a single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output.Output=75
					</pre>
          </div>
					
					<p class="caption"><a name="example-33"></a>Example 33. Alternative method for requesting a control parameter to be set to a new value on a single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output.Output!75
					</pre>
          </div>
					
					<p class="caption"><a name="example-34"></a>Example 34. Alternative method 2 for requesting a control parameter to be set to a new value on a single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output@Analog Output=75
					</pre>
          </div>
					
					<p class="caption"><a name="example-35"></a>Example 35. Alternative method 3 for requesting a control parameter to be set to a new value on a single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output@Analog Output!75
					</pre>
          </div>
					
					<p class="caption"><a name="example-36"></a>Example 36. Control parameter response when parameter has been successfully set</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output=75
					</pre>
          </div>
					
				</div>
				<div class="indent">
          <h3>4.2.2.2 <a name="sect-ID0E1PAC">Listing control parameters on single device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-37"></a>Example 37. Listing control parameters on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output=?
					</pre>
          </div>
					
					<p class="caption"><a name="example-38"></a>Example 38. Alternative method for listing control parameters on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output!?
					</pre>
          </div>
					
					<p class="caption"><a name="example-39"></a>Example 39. Alternative method 2 for listing control parameters on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output.=?
					</pre>
          </div>
					
					<p class="caption"><a name="example-40"></a>Example 40. Alternative method 3 for listing control parameters on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output.!?
					</pre>
          </div>
					
					<p class="caption"><a name="example-41"></a>Example 41. Alternative method 4 for listing control parameters on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   @Analog Output=?
					</pre>
          </div>
					
					<p class="caption"><a name="example-42"></a>Example 42. Alternative method 5 for listing control parameters on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   @Analog Output?
					</pre>
          </div>
					
					<p class="" style="">
						After the list of parameters has been sent, the device can optionally send a data form with the same parameters. If the client supports
						forms it can present the form in a more user friendly window. See <a href="#dataforms">Data Forms</a> for more information. Submitting the
						form means executing the corresponding control commands.
					</p>
				</div>
				<div class="indent">
          <h3>4.2.2.3 <a name="sect-ID0EIBAE">Displaying current value of control parameter on single device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-43"></a>Example 43. Displaying current value of control parameter on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output.Output=?
					</pre>
          </div>
					
					<p class="caption"><a name="example-44"></a>Example 44. Alternative method for displaying current value of control parameter on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output.Output!?
					</pre>
          </div>
					
					<p class="caption"><a name="example-45"></a>Example 45. Alternative method 2 for displaying current value of control parameter on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output@Analog Output=?
					</pre>
          </div>
					
					<p class="caption"><a name="example-46"></a>Example 46. Alternative method 3 for displaying current value of control parameter on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Output@Analog Output!?
					</pre>
          </div>
					
				</div>
			</div>
		</div>
		<div class="indent">
      <h3>4.3 <a name="sect-ID0EFCAE">Configuring devices</a></h3>
			<div class="indent">
        <h3>4.3.1 <a name="sect-ID0EJCAE">Configuring standalone devices</a></h3>
				<div class="indent">
          <h3>4.3.1.1 <a name="sect-ID0ENCAE">Listing configuration parameters on currently selected device</a></h3>
					
					<p class="caption"><a name="example-47"></a>Example 47. Listing configuration parameters on currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   :?
					</pre>
          </div>
					
					<p class="caption"><a name="example-48"></a>Example 48. List of configuration parameters</p>
          <div class="indent">
            <pre class="prettyprint">
						
   1. id:Analog Output (ID)
   2. customPrivilegeId: (Required User Privilege)
   3. name: (Name)
   4. class:Other (Class)
   5. phase:Installation (Lifecycle Phase)
   6. enabled:true (Enabled)
   7. meterLocationId: (Meter Location ID)
   8. meterNumber: (Meter Number)
   ...
   0. Back
					</pre>
          </div>
					<p class="" style="">
						After the list of parameters has been sent, the device can optionally send a data form with the same parameters. If the client supports
						forms it can present the form in a more user friendly window. See <a href="#dataforms">Data Forms</a> for more information. Submitting the
						form means configuring the node.
					</p>
				</div>
				<div class="indent">
          <h3>4.3.1.2 <a name="sect-ID0EEDAE">Displaying current value of configuration parameter on currently selected device</a></h3>
					
					<p class="caption"><a name="example-49"></a>Example 49. Displaying current value of configuration parameter on currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   phase:?
					</pre>
          </div>
					
					<p class="caption"><a name="example-50"></a>Example 50. Value of configuration parameter</p>
          <div class="indent">
            <pre class="prettyprint">
						
   phase:Installation
					</pre>
          </div>
					
				</div>
				<div class="indent">
          <h3>4.3.1.3 <a name="sect-ID0EVDAE">Editing configuration parameter on currently selected device</a></h3>
					
					<p class="caption"><a name="example-51"></a>Example 51. Editing configuration parameter on currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   phase:Test
					</pre>
          </div>
					
					<p class="caption"><a name="example-52"></a>Example 52. Acknowledge that configuration was performed</p>
          <div class="indent">
            <pre class="prettyprint">
						
   OK
					</pre>
          </div>
					
					<p class="caption"><a name="example-53"></a>Example 53. Configuration error</p>
          <div class="indent">
            <pre class="prettyprint">
						
   C: phase:test
   S: ! Select a value from the list. (Installation, Test, Production)
					</pre>
          </div>
					
				</div>
			</div>
			<div class="indent">
        <h3>4.3.2 <a name="sect-ID0EMEAE">Configuration of device behind concentrator</a></h3>
				<div class="indent">
          <h3>4.3.2.1 <a name="sect-ID0EQEAE">Listing configuration parameters on single device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-54"></a>Example 54. Listing configuration parameters on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output:?
					</pre>
          </div>
					
					<p class="caption"><a name="example-55"></a>Example 55. List of configuration parameters</p>
          <div class="indent">
            <pre class="prettyprint">
						
   1. id:Analog Output (ID)
   2. customPrivilegeId: (Required User Privilege)
   3. name: (Name)
   4. class:Other (Class)
   5. phase:Installation (Lifecycle Phase)
   6. enabled:true (Enabled)
   7. meterLocationId: (Meter Location ID)
   8. meterNumber: (Meter Number)
   ...
   0. Back
					</pre>
          </div>
					<p class="" style="">
						After the list of parameters has been sent, the device can optionally send a data form with the same parameters. If the client supports
						forms it can present the form in a more user friendly window. See <a href="#dataforms">Data Forms</a> for more information. Submitting the
						form means configuring the node.
					</p>
				</div>
				<div class="indent">
          <h3>4.3.2.2 <a name="sect-ID0EHFAE">Displaying current value of configuration parameter on single device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-56"></a>Example 56. Displaying current value of configuration parameter on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output.phase:?
					</pre>
          </div>
					
					<p class="caption"><a name="example-57"></a>Example 57. Alternative way to displaying current value of configuration parameter on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   phase@Analog Output:?
					</pre>
          </div>
					
					<p class="caption"><a name="example-58"></a>Example 58. Value of configuration parameter</p>
          <div class="indent">
            <pre class="prettyprint">
						
   phase:Installation
					</pre>
          </div>
				</div>
				<div class="indent">
          <h3>4.3.2.3 <a name="sect-ID0E2FAE">Editing configuration parameter on single device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-59"></a>Example 59. Editing configuration parameter on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output.phase:Test
					</pre>
          </div>
					
					<p class="caption"><a name="example-60"></a>Example 60. Alternative way to edit configuration parameter on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   phase@Analog Output:Test
					</pre>
          </div>
					
					<p class="caption"><a name="example-61"></a>Example 61. Acknowledge that configuration was performed</p>
          <div class="indent">
            <pre class="prettyprint">
						
   OK
					</pre>
          </div>
					
					<p class="caption"><a name="example-62"></a>Example 62. Configuration error</p>
          <div class="indent">
            <pre class="prettyprint">
						
   C: Analog Output.phase:test
   S: ! Select a value from the list. (Installation, Test, Production)
					</pre>
          </div>
					
				</div>
			</div>
		</div>
		<div class="indent">
      <h3>4.4 <a name="sect-ID0EYGAE">Node Commands on devices</a></h3>
			<div class="indent">
        <h3>4.4.1 <a name="sect-ID0E3GAE">Node Commands on standalone devices</a></h3>
				<div class="indent">
          <h3>4.4.1.1 <a name="sect-ID0EAHAE">Displaying commands available on currently selected device</a></h3>
					
					<p class="caption"><a name="example-63"></a>Example 63. Displaying commands available on currently selected device</p>
          <div class="indent">
            <pre class="prettyprint">
						
   &gt;?
					</pre>
          </div>
					
					<p class="caption"><a name="example-64"></a>Example 64. Menu of available commands</p>
          <div class="indent">
            <pre class="prettyprint">
						
   1. ChangeToProduction (Change lifecycle phase to Production)
   2. ChangeToTest (Change lifecycle phase to Test)
   3. ClearMessages (Clear all messages)
   4. Disable
   5. LogCustomMessage (Log message...)
   0. Back
					</pre>
          </div>
					
				</div>
				<div class="indent">
          <h3>4.4.1.2 <a name="sect-ID0ERHAE">Selecting command on currently selected device</a></h3>
					
					<p class="caption"><a name="example-65"></a>Example 65. Selecting command on currently selected device using Command ID</p>
          <div class="indent">
            <pre class="prettyprint">
						
   &gt;LogCustomMessage
					</pre>
          </div>
					
					<p class="caption"><a name="example-66"></a>Example 66. Selecting command on currently selected device using Command Name</p>
          <div class="indent">
            <pre class="prettyprint">
						
   &gt;Log message...
					</pre>
          </div>
					
					<p class="caption"><a name="example-67"></a>Example 67. Selecting command on currently selected device using menu shortcut</p>
          <div class="indent">
            <pre class="prettyprint">
						
   &gt;5
					</pre>
          </div>
					
					<p class="caption"><a name="example-68"></a>Example 68. Command menu for parametrized command</p>
          <div class="indent">
            <pre class="prettyprint">
						
1. KeepPrevious:true (Keep previous messages.)
2. Type:Information (Message Type)
3. Level:Minor (Message Level)
4. Message: (Message Text)
0. Back
!. Executes the current command.
					</pre>
          </div>
					<p class="" style="">
						After the list of parameters has been sent, the device can optionally send a data form with the same parameters. If the client supports
						forms it can present the form in a more user friendly window. See <a href="#dataforms">Data Forms</a> for more information. Submitting
						the form means executing the command.
					</p>
					
					<p class="caption"><a name="example-69"></a>Example 69. Command menu for simple unparametrized command</p>
          <div class="indent">
            <pre class="prettyprint">
						
0. Back
!. Executes the current command.
					</pre>
          </div>
				</div>
				<div class="indent">
          <h3>4.4.1.3 <a name="sect-ID0EXIAE">Editing command parameter in currently selected node command</a></h3>
					
					<p class="caption"><a name="example-70"></a>Example 70. Editing command parameter in currently selected node command</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Message:Hello there
					</pre>
          </div>
					
					<p class="caption"><a name="example-71"></a>Example 71. Using parameter menu shortcut</p>
          <div class="indent">
            <pre class="prettyprint">
						
   4:Hello there
					</pre>
          </div>
					
					<p class="caption"><a name="example-72"></a>Example 72. Acknowledging parameter is successfully edited</p>
          <div class="indent">
            <pre class="prettyprint">
						
   OK
					</pre>
          </div>
					
					<p class="caption"><a name="example-73"></a>Example 73. Errors in input</p>
          <div class="indent">
            <pre class="prettyprint">
						
   C: Level:major
   S: ! Select a value from the list. (Minor, Medium, Major)
					</pre>
          </div>
					
				</div>
				<div class="indent">
          <h3>4.4.1.4 <a name="sect-ID0ESJAE">Executing currently selected node command</a></h3>
					
					<p class="caption"><a name="example-74"></a>Example 74. Executing currently selected node command</p>
          <div class="indent">
            <pre class="prettyprint">
						
   !
					</pre>
          </div>
					
					<p class="caption"><a name="example-75"></a>Example 75. Some commands require confirmation</p>
          <div class="indent">
            <pre class="prettyprint">
						
   C: &gt;Disable
   S: 1. recursive:false (Disable recursive for all children.)
   S: 0. Back
   S: !. Executes the current command.
   C: !
   S: Are you sure you want to disable this node?
   S: This node will not take part of any jobs, readouts or configurations when disabled.
   S: &lt;peter.waher@clayster.cl&gt; (Type Yes or No)
   C: Yes
   S: Node disabled successfully.
					</pre>
          </div>
					
				</div>
			</div>
			<div class="indent">
        <h3>4.4.2 <a name="sect-ID0EEKAE">Node Commands on device behind concentrator</a></h3>
				<div class="indent">
          <h3>4.4.2.1 <a name="sect-ID0EIKAE">Displaying commands available on single device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-76"></a>Example 76. Displaying commands available on single device behind concentrator</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output&gt;?
					</pre>
          </div>
					
					<p class="caption"><a name="example-77"></a>Example 77. Menu of available commands</p>
          <div class="indent">
            <pre class="prettyprint">
						
   1. ChangeToProduction (Change lifecycle phase to Production)
   2. ChangeToTest (Change lifecycle phase to Test)
   3. ClearMessages (Clear all messages)
   4. Disable
   5. LogCustomMessage (Log message...)
   0. Back
					</pre>
          </div>
					
				</div>
				<div class="indent">
          <h3>4.4.2.2 <a name="sect-ID0EZKAE">Selecting command on single device behind concentrator</a></h3>
					
					<p class="caption"><a name="example-78"></a>Example 78. Selecting command on single device behind concentrator using Command ID</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output&gt;LogCustomMessage
					</pre>
          </div>
					
					<p class="caption"><a name="example-79"></a>Example 79. Selecting command on single device behind concentrator using Command Name</p>
          <div class="indent">
            <pre class="prettyprint">
						
   Analog Output&gt;Log message...
					</pre>
          </div>
					
					<p class="caption"><a name="example-80"></a>Example 80. Selecting command on single device behind concentrator using menu shortcut</p>
          <div class="indent">
            <pre class="prettyprint">
						
   &gt;5
					</pre>
          </div>
					
					<p class="caption"><a name="example-81"></a>Example 81. Command menu for parametrized command</p>
          <div class="indent">
            <pre class="prettyprint">
						
   1. KeepPrevious:true (Keep previous messages.)
   2. Type:Information (Message Type)
   3. Level:Minor (Message Level)
   4. Message: (Message Text)
   0. Back
   !. Executes the current command.
					</pre>
          </div>
					<p class="" style="">
						After the list of parameters has been sent, the device can optionally send a data form with the same parameters. If the client supports
						forms it can present the form in a more user friendly window. See <a href="#dataforms">Data Forms</a> for more information. Submitting
						the form means executing the command.
					</p>
					
					<p class="caption"><a name="example-82"></a>Example 82. Command menu for simple unparametrized command</p>
          <div class="indent">
            <pre class="prettyprint">
						
   0. Back
   !. Executes the current command.
					</pre>
          </div>
				</div>
			</div>
		</div>
		<div class="indent">
      <h3>4.5 <a name="sect-ID0EBMAE">Browsing Data Sources and Nodes on a concentrator</a></h3>
			<div class="indent">
        <h3>4.5.1 <a name="sect-ID0EFMAE">Selecting Root Node in current data source</a></h3>
				
				<p class="caption"><a name="example-83"></a>Example 83. Selecting Root Node in current data source</p>
        <div class="indent">
          <pre class="prettyprint">
					
   /
				</pre>
        </div>
				
				<p class="caption"><a name="example-84"></a>Example 84. Menu of child nodes</p>
        <div class="indent">
          <pre class="prettyprint">
					
   1. COM4
   2. COM7
   3. COM9
   4. Mockups
   5. Script
   0. Back
				</pre>
        </div>
				
			</div>
			<div class="indent">
        <h3>4.5.2 <a name="sect-ID0EWMAE">Selecting Root Data Source</a></h3>
				
				<p class="caption"><a name="example-85"></a>Example 85. Selecting Root Data Source</p>
        <div class="indent">
          <pre class="prettyprint">
					
   //
				</pre>
        </div>
				
				<p class="caption"><a name="example-86"></a>Example 86. Menu of child data sources</p>
        <div class="indent">
          <pre class="prettyprint">
					
   1. Metering
   2. Security
   3. Services
   4. System
   5. Tools
   0. Back
				</pre>
        </div>
				
			</div>
			<div class="indent">
        <h3>4.5.3 <a name="sect-ID0EHNAE">Selecting Item</a></h3>
				
				<p class="caption"><a name="example-87"></a>Example 87. Selecting item in current menu</p>
        <div class="indent">
          <pre class="prettyprint">
					
   1
				</pre>
        </div>
				
				<p class="caption"><a name="example-88"></a>Example 88. Selecting node in a data source menu</p>
        <div class="indent">
          <pre class="prettyprint">
					
   A
				</pre>
        </div>
				
				<p class="caption"><a name="example-89"></a>Example 89. Selecting node using its Node ID</p>
        <div class="indent">
          <pre class="prettyprint">
					
   Analog Output
				</pre>
        </div>
				
				<p class="caption"><a name="example-90"></a>Example 90. Selecting node using an index value like meter number</p>
        <div class="indent">
          <pre class="prettyprint">
					
   123
				</pre>
        </div>
				
				<p class="caption"><a name="example-91"></a>Example 91. Menu displayed when selecting nodes using an index value shared by multiple nodes</p>
        <div class="indent">
          <pre class="prettyprint">
					
   C: 123
   S: 1. Analog Output Mockup
   S: 2. Digital Output Mockup
   S: 0. Back
				</pre>
        </div>
				
				<p class="caption"><a name="example-92"></a>Example 92. Selecting node and then performing an action on the node</p>
        <div class="indent">
          <pre class="prettyprint">
					
   C: Analog Output Mockup
   S: 0. Back
   C: Output=75
   S: Output=75
				</pre>
        </div>
				
				<p class="caption"><a name="example-93"></a>Example 93. Alternative way of performing the above action</p>
        <div class="indent">
          <pre class="prettyprint">
					
   C: Analog Output Mockup.Output=75
   S: Output=75
				</pre>
        </div>
			</div>
		</div>
		<div class="indent">
      <h3>4.6 <a name="sect-ID0EQOAE">Menu Commands</a></h3>
			<div class="indent">
        <h3>4.6.1 <a name="currentoptions">List current options</a></h3>
				
				<p class="caption"><a name="example-94"></a>Example 94. Showing brief list of options</p>
        <div class="indent">
          <pre class="prettyprint">
					
   #
				</pre>
        </div>
				
				<p class="caption"><a name="example-95"></a>Example 95. Example response with brief list of options</p>
        <div class="indent">
          <pre class="prettyprint">
					
   /   Selects the root node of the current data source (Topology).
   //  Selects the root data source.
   #   Displays the short version of the menu.
   ##  Displays the extended version of the menu.
   0   Goes back to the previous menu.
   ?   Reads momentary values of the currently selected object.
   ??  Performs a full readout of the currently selected object.
   =?  Lists available controllable parameters on the currently selected object.
   !?  Same as =?.
   :?  Lists available configurable parameters on the currently selected object.
   &gt;?  Lists available commands on the currently selected object.
   !   Executes the currently selected command.
   
   TODO:
   c   break dignal stop the last sent command.
				</pre>
        </div>
				
				<p class="caption"><a name="example-96"></a>Example 96. Showing extended list of options</p>
        <div class="indent">
          <pre class="prettyprint">
					
   ##
				</pre>
        </div>
				
				<p class="caption"><a name="example-97"></a>Example 97. Example response with extended list of options</p>
        <div class="indent">
          <pre class="prettyprint">
					
   /   Selects the root node of the current data source (Topology).
   //  Selects the root data source.
   #   Displays the short version of the menu.
   ##  Displays the extended version of the menu.
   0   Goes back to the previous menu.
   ?   Reads momentary values of the currently selected object.
   ??  Performs a full readout of the currently selected object.
   =?  Lists available controllable parameters on the currently selected object.
   !?  Same as =?.
   :?  Lists available configurable parameters on the currently selected object.
   &gt;?  Lists available commands on the currently selected object.
   !   Executes the currently selected command.
   
   TODO:
   c   break dignal stop the last sent command.
 
   If an object is currently selected, the following commands are also available.
 
   FIELD?   Performs a momentary readout of the currently selected object and lists the value of the field FIELD.
   CONTROL_PARAMETER=?   Shows the value of the control parameter CONTROL_PARAMETER on the currently selected object.
   CONTROL_PARAMETER!?   Same as CONTROL_PARAMETER=?.
   PARAMETER:?   Shows the value of the configuration parameter PARAMETER on the currently selected object.
   &gt;COMMAND_ID   Selects the command with ID COMMAND_ID on the currently selected object.
   &gt;COMMAND_NAME   Selects the command named COMMAND_NAME on the currently selected object.
   CONTROL_PARAMETER=VALUE   Sets the control parameter named CONTROL_PARAMETER in the currently selected object to the value VALUE.
   CONTROL_PARAMETER!VALUE   Same as CONTROL_PARAMETER=VALUE.
   PARAMETER:VALUE   Sets the configurable parameter named PARAMETER in the currently selected object to the value VALUE.
   COMMAND_PARAMETER:VALUE   Sets the command parameter named COMMAND_PARAMETER in the currently selected command to the value VALUE.
 
   Knowing the ID (NODE_ID) of the object in the current data source, you can address it directly as follows.
 
   NODE_ID?   Reads momentary values of the object NODE_ID in the current data source.
   NODE_ID??   Reads all values of the object NODE_ID in the current data source.
   NODE_ID.?   Lists all controllable parameters on the object NODE_ID in the current data source.
   NODE_ID.=?   Same as NODE_ID.?.
   NODE_ID=?   Same as NODE_ID.?.
   NODE_ID.!?   Same as NODE_ID.?.
   NODE_ID!?   Same as NODE_ID.?.
   @NODE_ID=?   Same as NODE_ID.?.
   @NODE_ID?   Same as NODE_ID.?.
   NODE_ID:?   Lists all configurable parameters on the object NODE_ID in the current data source.
   NODE_ID&gt;?   Lists all commands on the object NODE_ID in the current data source.
 
   You can also access commands explicitly if you know all IDs beforehand as follows.
 
   NODE_ID.FIELD?   Reads the momentary value FIELD on the object NODE_ID in the current data source.
   NODE_ID.FIELD??   Reads the value FIELD on the object NODE_ID in the current data source.
   FIELD@NODE_ID?   Same as NODE_ID.FIELD?.
   FIELD@NODE_ID??   Same as NODE_ID.FIELD??.
   NODE_ID.CONTROL_PARAMETER=?   Returns the value of the controllable parameter CONTROL_PARAMETER on object NODE_ID in the current data source.
   NODE_ID.CONTROL_PARAMETER!?   Same as NODE_ID.CONTROL_PARAMETER=?.
   CONTROL_PARAMETER@NODE_ID=?   Same as NODE_ID.CONTROL_PARAMETER=?.
   CONTROL_PARAMETER@NODE_ID!?   Same as NODE_ID.CONTROL_PARAMETER=?.
   NODE_ID.PARAMETER:?   Returns the value of the configurable parameter PARAMETER on object NODE_ID in the current data source.
   PARAMETER@NODE_ID:?   Same as NODE_ID.PARAMETER:?.
   NODE_ID&gt;COMMAND_ID   Selects the command with ID COMMAND_ID on object NODE_ID in the current data source.
   NODE_ID&gt;COMMAND_NAME   Selects the command named COMMAND_NAME on object NODE_ID in the current data source.
   NODE_ID.CONTROL_PARAMETER=VALUE   Sets the controllable parameter CONTROL_PARAMETER on object NODE_ID to value VALUE in the current data source.
   NODE_ID.CONTROL_PARAMETER!VALUE   Same as NODE_ID.CONTROL_PARAMETER=VALUE.
   CONTROL_PARAMETER@NODE_ID=VALUE   Same as NODE_ID.CONTROL_PARAMETER=VALUE.
   CONTROL_PARAMETER@NODE_ID!VALUE   Same as NODE_ID.CONTROL_PARAMETER=VALUE.
   NODE_ID.PARAMETER:VALUE   Sets the configurable parameter PARAMETER on object NODE_ID to value VALUE in the current data source.
   PARAMETER@NODE_ID:VALUE   Same as NODE_ID.PARAMETER:VALUE.
 
   Flags:
   html+   Turns on HTML output.
   html-   Turns off HTML output.
   ar   العربية
   da   Dansk
   de   Deutsch
   en   English
   es   Español
   fi   Soumi
   fr   Français
   no   Norsk
   sv   Svenska
   zh   中文
 
   Other possibilities:
   * If in a menu, you can use the corresponding menu item numbers or letter combinations in any of the commands above, instead of typing in the corresponding literal values.
   * When typing in an Object ID, that ID can be either global to the current data source, or an ID of any of available indices registered in the data source (if any).
   * You can enter any Clayster Script and as long as it does not conflict with the above commands, the server will execute the script and return the response.
				</pre>
        </div>
				
			</div>
			<div class="indent">
        <h3>4.6.2 <a name="sect-ID0EPPAE">Go to previous menu</a></h3>
				
				<p class="caption"><a name="example-98"></a>Example 98. Showing brief list of options</p>
        <div class="indent">
          <pre class="prettyprint">
					
   0
				</pre>
        </div>
				
			</div>
		</div>
		<div class="indent">
      <h3>4.7 <a name="sect-ID0E3PAE">User authentication</a></h3>
			<p class="" style="">
				Sometimes a device or subsystem might want to require a client to authenticate itself before giving the user access to the chat interface described in this
				document. If this is the case, the following guidelines should be adhered to, to make sure both a human chat interface can be used as well as an automatable one.
			</p>
			<p class="" style="">
				A chat session is started when a chat client says something to the chat server:
			</p>
			<p class="caption"><a name="example-99"></a>Example 99. Starting chat session</p>
      <div class="indent">
        <pre class="prettyprint">
				
   &lt;message from="iotchatclient@jabber.org/client" to="device@clayster.cl" type="chat" id="aed4a"&gt;
      &lt;body&gt;hello&lt;/body&gt;
   &lt;/message&gt;
			</pre>
      </div>
			<p class="" style="">
				The chat server decides that it wants to authenticate the user behind the chat client, and responds with a chat message asking the user to enter a user name.
			</p>
			<p class="caption"><a name="example-100"></a>Example 100. Asking for user name</p>
      <div class="indent">
        <pre class="prettyprint">
				
   &lt;message from="device@clayster.cl/aa87c13e" to="iotchatclient@jabber.org/client" id="21" xml:lang="en" type="chat"&gt;
      &lt;body&gt;User Name:&lt;/body&gt;
   &lt;/message&gt;
			</pre>
      </div>
			<p class="" style="">
				Following this message, it also sends a login form that can be used to login, if the chat client supports data forms. Data forms has the benefit of letting
				the password be masked, so that others cannot see what the user is writing by looking on the screen. A login form is also easier to automate.
			</p>
			<p class="caption"><a name="example-101"></a>Example 101. Sending login form</p>
      <div class="indent">
        <pre class="prettyprint">
				
   &lt;message from="device@clayster.cl/aa87c13e" to="iotchatclient@jabber.org/client" id="22" xml:lang="en" type="normal"&gt;
      &lt;x type="form" xmlns="jabber:x:data"&gt;
         &lt;title&gt;Login&lt;/title&gt;
         &lt;field var="FORM_TYPE" type="hidden"&gt;
            &lt;value&gt;urn:xmpp:login&lt;/value&gt;
         &lt;/field&gt;
         &lt;field var="userName" type="text-single" label="User Name"&gt;
            &lt;required /&gt;
            &lt;value /&gt;
         &lt;/field&gt;
         &lt;field var="password" type="text-private" label="Password"&gt;
            &lt;required /&gt;
            &lt;value /&gt;
         &lt;/field&gt;
      &lt;/x&gt;
   &lt;/message&gt;
			</pre>
      </div>
			<p class="" style="">
				The login form sent thus MUST have two fields, and called <span class="strong">userName</span> of type <span class="strong">text-single</span> and the other
				<span class="strong">password</span> of type <span class="strong">text-private</span>. It must also have the hidden <span class="strong">FORM_TYPE</span> parameter set to
				value <span class="strong">urn:xmpp:login</span>, as defined in <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0068.html">Field Standardization for Data Forms</a></span>  [<a href="#nt-ID0EPRAE">3</a>] so that automatons can automate the user login if necessary.
			</p>
			<p class="" style="">
				When the client has filled in the form, it submits it back to the server:
			</p>
			<p class="caption"><a name="example-102"></a>Example 102. Submitting login form</p>
      <div class="indent">
        <pre class="prettyprint">
				
   &lt;message from="iotchatclient@jabber.org/client" to="device@clayster.cl/aa87c13e" id="aed5a"&gt;
      &lt;x xmlns="jabber:x:data" type="submit"&gt;
         &lt;field var="FORM_TYPE" type="hidden"&gt;
            &lt;value&gt;urn:xmpp:login&lt;/value&gt;
         &lt;/field&gt;
         &lt;field type="text-single" var="userName"&gt;
            &lt;value&gt;**************&lt;/value&gt;
         &lt;/field&gt;
         &lt;field type="text-private" var="password"&gt;
            &lt;value&gt;**************&lt;/value&gt;
         &lt;/field&gt;
      &lt;/x&gt;
   &lt;/message&gt;
			</pre>
      </div>
			<p class="" style="">
				If unsuccessful, the above procedure can be repeated. If successful the chat server would respond with a welcome message and a small note
				on how to get more help if the user has forgotten the syntax. The welcome message must at least contain a reference to the # command, as
				is shown in the following example:
			</p>
			<p class="caption"><a name="example-103"></a>Example 103. Welcome message</p>
      <div class="indent">
        <pre class="prettyprint">
				
   Welcome **************. What do you want to do?
   Type # for options.
			</pre>
      </div>
			<p class="" style="">
				Automatons are required to use the login data form for user authentication when accessing a chat server. However, if a human user uses a chat client
				that does not support data forms, user authentication can be done using the chat interface as well. However, since automation is required to use data forms,
				the format for authentication strings in the following example can be viewed as a recommendation only, and not a requirement. One of the reasons being that
				login strings are locale specific and difficult for an automaton to recognize.
			</p>
			<p class="caption"><a name="example-104"></a>Example 104. User authentication using normal chat messages</p>
      <div class="indent">
        <pre class="prettyprint">
				
   C: Hello
   S: User Name:
   C: *************
   S: Password:
   C: *************
   Welcome **************. What do you want to do?
   Type # for options.
			</pre>
      </div>
		</div>
	<h2>5.
       <a name="dataforms">Data Forms</a></h2>
		<p class="" style="">
			For commandos that list a menu containing a set of parameters, the chat server can choose to send a data form to the client at the end for a richer
			user experience. If the client supports data forms, the form will be displayed. If not, the normal chat interface can still be used.
		</p>
		<p class="" style="">
			When the client submits the form, the corresponding actions will take place on the chat server. Hidden parameters in the form can be used to store state
			information. When submitting the form and after performing the corresponding actions, a menu back operation (0) must also be performed.
		</p>
		<p class="" style="">
			The following list details the different extensions available detailing how data forms work. For a richer user experience, it is recommended that as many
			of these be supported by the client as possible. However, the most important, apart from XEP-0004, for Internet of Things devices is the
			<a href="http://xmpp.org/extensions/xep-0336.html">XEP-0336</a>, since it defines how undefined values are reported and asynchronous updates of the form. These
			are very useful for displaying parameters in control forms since all parameters should be marked as uncertain (greyed) so that only edited parameters are
			sent and result in control actions. Furthermore, since current values might be uncertain and take time to retrieve, asynchronous updates of the form
			are permitted when values are received. For a more detailed discussion, see <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0326.html">Internet of Things - Concentrators</a></span>  [<a href="#nt-ID0EGTAE">4</a>].
		</p>
		<p class="" style="">
			XMPP data forms are defined and enhanced in many different XEPs, as is shown in the following list:
		</p>
		<ul class="" style="">
			<li class="" style="">
				<p class="" style="">
					<span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0004.html">Data Forms</a></span>  [<a href="#nt-ID0EDUAE">5</a>] defines the basics of data forms: How forms are defined, sent to the recipient, how the recipient submits forms (or cancels them)
					and how results can be returned. It defines the concepts of field, field type and field value.
				</p>
			</li>
			<li class="" style="">
				<p class="" style="">
					<span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0122.html">Data Forms Validation</a></span>  [<a href="#nt-ID0EZUAE">6</a>] enhances the data forms architecture permitting rules for client-side validation of fields in the form.
				</p>
			</li>
			<li class="" style="">
				<p class="" style="">
					<span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0137.html">Publishing Stream Initiation Requests</a></span>  [<a href="#nt-ID0EPVAE">7</a>] defines a new data type that can be used to publish file upload controls.
				</p>
			</li>
			<li class="" style="">
				<p class="" style="">
					<span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0141.html">Data Forms Layout</a></span>  [<a href="#nt-ID0EFWAE">8</a>] enhances the data forms architecture permitting the form to have pages or tabs with sections containing grouped controls.
				</p>
			</li>
			<li class="" style="">
				<p class="" style="">
					<span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0221.html">Data Forms Media Element</a></span>  [<a href="#nt-ID0E2WAE">9</a>] defines a means to include content such as images, video or audio in forms.
				</p>
			</li>
			<li class="" style="">
				<p class="" style="">
					<span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0331.html">Data Forms - Color Field Types</a></span>  [<a href="#nt-ID0ERXAE">10</a>] permits the publication of color fields, where the end user can be presented with a color picker dialog instead of having to
					enter a color value manually or select one from a limited list of colors.
				</p>
			</li>
			<li class="" style="">
				<p class="" style="">
					<span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0336.html">XEP-0336</a></span>
					 [<a href="#nt-ID0EHYAE">11</a>] handles server-side validation, asynchronous updates, editing of multiple objects, undefined values, readonly values, etc.
				</p>
			</li>
		</ul>
		<p class="" style="">
			The following list of commands can return data forms containing corresponding parameters:
		</p>
		<div class="indent">
      <p class="caption"><a name="table-1"></a>Table 1: Commands that may return data forms</p>
      <table border="1" cellpadding="3" cellspacing="0">
			<tr class="body">
				<th colspan="" rowspan="">Command</th>
				<th colspan="" rowspan="">Meaning</th>
			</tr>
			<tr class="body">
				<td colspan="" rowspan="">=?</td>
				<td colspan="" rowspan="">List of control parameters for single device or currently selected device.</td>
			</tr>
			<tr class="body">
				<td colspan="" rowspan="">!?</td>
				<td colspan="" rowspan="">Alternative way of writing =?.</td>
			</tr>
			<tr class="body">
				<td colspan="" rowspan="">NodeID=?</td>
				<td colspan="" rowspan="">List of control parameters for specific node in current data source.</td>
			</tr>
			<tr class="body">
				<td colspan="" rowspan="">NodeID!?</td>
				<td colspan="" rowspan="">Alternative way of writing NodeID=?.</td>
			</tr>
			<tr class="body">
				<td colspan="" rowspan="">:?</td>
				<td colspan="" rowspan="">List of configurable parameters for single device or currently selected device.</td>
			</tr>
			<tr class="body">
				<td colspan="" rowspan="">NodeID:?</td>
				<td colspan="" rowspan="">List of configurable parameters for specific node in current data source.</td>
			</tr>
			<tr class="body">
				<td colspan="" rowspan="">&gt;Command</td>
				<td colspan="" rowspan="">List of command parameters for for single device or currently selected device. (Parametrized commands only.)</td>
			</tr>
			<tr class="body">
				<td colspan="" rowspan="">NodeID&gt;Command</td>
				<td colspan="" rowspan="">List of command parameters for for specific node in current data source. (Parametrized commands only.)</td>
			</tr>
		</table>
    </div>
	<h2>6.
       <a name="syntax">Syntax</a></h2>
		
	<h2>7.
       <a name="output">Output format</a></h2>
		
	<h2>8.
       <a name="support">Determining Support</a></h2>
		<p class="" style="">If an entity supports the chat interface specified herein, it MUST advertise that fact by returning a feature of "urn:xmpp:iot:chat" in response to <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0030.html">Service Discovery</a></span>  [<a href="#nt-ID0EY3AE">12</a>] information requests.</p>
		<p class="caption"><a name="example-105"></a>Example 105. Service discovery information request</p>
    <div class="indent">
      <pre class="prettyprint">
			
&lt;iq type='get'
    from='user@clayster.com/chatclient'
    to='device@clayster.com'
    id='disco1'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
		</pre>
    </div>
		<p class="caption"><a name="example-106"></a>Example 106. Service discovery information response</p>
    <div class="indent">
      <pre class="prettyprint">
			
&lt;iq type='result'
    from='device@clayster.com'
    to='user@clayster.com/chatclient'
    id='disco1'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    ...
    &lt;feature var='urn:xmpp:iot:chat'/&gt;
    ...
  &lt;/query&gt;
&lt;/iq&gt;
		</pre>
    </div>
		<p class="" style="">
			In order for an application to determine whether an entity supports this protocol, where possible it SHOULD use the dynamic, presence-based profile of service discovery defined
			in <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0115.html">Entity Capabilities</a></span>  [<a href="#nt-ID0EP4AE">13</a>]. However, if an application has not received entity capabilities information from an entity, it SHOULD use explicit service discovery instead.
		</p>
	<h2>9.
       <a name="impl">Implementation Notes</a></h2>
		<div class="indent">
      <h3>9.1 <a name="sect-ID0E24AE">Chat sessions</a></h3>
			
		</div>
	<h2>10.
       <a name="i18n">Internationalization Considerations</a></h2>
		<div class="indent">
      <h3>10.1 <a name="sect-ID0EH5AE">Localization</a></h3>
			<p class="" style="">
				Localization of content can be performed if clients provide <span class="strong">xml:lang</span> attributes in messages made to the device. If omitted, the
				<span class="strong">default language</span> will be used in responses. If provided, but the concentrator does not support localization, or the requested language,
				the <span class="strong">default language</span> will also be used.
			</p>
		</div>
	<h2>11.
       <a name="security">Security Considerations</a></h2>
		<p class="" style="">
			This document publishes a lot of commands with which to interact with a device. If security and access rights is an issue, it might not be sufficient
			to allow all friends access to the system. There are many ways in which to restrict access to the contents of the device. See <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0324.html">Internet of Things - Provisioning</a></span>  [<a href="#nt-ID0EG6AE">14</a>] and
			XEP-0326 <a href="http://xmpp.org/extensions/xep-0326.html">Internet of Things - Concentrators</a> for more information on how to restrict access
			to parts of the device or contents on the device.
		</p>
		
	<h2>12.
       <a name="iana">IANA Considerations</a></h2>
			<p class="" style="">This document requires no interaction with the <span class="ref" style=""><a href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a></span>  [<a href="#nt-ID0ECAAG">15</a>].</p>
	<h2>13.
       <a name="registrar">XMPP Registrar Considerations</a></h2>
		<p class="" style="">
			As per <a href="http://xmpp.org/extensions/xep-0068.html">Field Standardization for Data Forms</a>, following is a registration of fields used in the
			login form specified in this document.
		</p>
		<p class="caption">Registry Submission</p>
    <div class="indent">
      <pre class="prettyprint">
			
   &lt;form_type&gt;
      &lt;name&gt;urn:xmpp:login&lt;/name&gt;
      &lt;doc&gt;xep-0000-IoT-Chat.xml&lt;/doc&gt;
      &lt;desc&gt;Form for end user authentication, or login into subsystem, where JID authentication is not sufficient.&lt;/desc&gt;
      &lt;field
         var='userName'
         type='text-single'
         label='User name'/&gt;
      &lt;field
         var='password'
         type='text-private'
         label='Password'/&gt;
   &lt;/form_type&gt;
		</pre>
    </div>
	<h2>14.
       <a name="moreinfo">For more information</a></h2>
		<p class="" style="">
			For more information, please see the following resources:
		</p>
		<ul class="" style="">
			<li class="" style="">
				<p class="" style="">
					The <a href="http://wiki.xmpp.org/web/Tech_pages/SensorNetworks">Sensor Network section of the XMPP Wiki</a> contains further information about the
					use of the sensor network XEPs, links to implementations, discussions, etc.
				</p>
			</li>
			<li class="" style="">
				<p class="" style="">
					The XEP's and related projects are also available on <a href="https://github.com/joachimlindborg/">github</a>, thanks to Joachim Lindborg.
				</p>
			</li>
			<li class="" style="">
				<p class="" style="">
					A presentation giving an overview of all extensions related to Internet of Things can be found here:
					<a href="http://prezi.com/esosntqhewhs/iot-xmpp/">http://prezi.com/esosntqhewhs/iot-xmpp/</a>.
				</p>
			</li>
		</ul>
	<hr><a name="appendices"></a><h2>Appendices</h2>
    <hr><a name="appendix-docinfo"></a><h3>Appendix A: Document Information</h3>
    <p class="indent">
            Series: <a href="http://xmpp.org/extensions/">XEP</a><br>
            Number: xxxx<br>
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br>
            Status: 
            <a href="http://xmpp.org/extensions/xep-0001.html#states-ProtoXEP">ProtoXEP</a><br>
            Type:
            <a href="http://xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards Track</a><br>
            Version: 0.0.1<br>
            Last Updated: 2013-10-30<br>
                Approving Body: <a href="http://xmpp.org/council/">XMPP Council</a><br>Dependencies: XMPP Core, XEP-0004, XEP-0068, XEP-0071, XEP-0122, XEP-0137, XEP-0141, XEP-0323, XEP-0325, XEP-0326, XEP-0331, XEP-0336<br>
                Supersedes: None<br>
                Superseded By: None<br>
            Short Name: iot-h2m-chat<br>
            This document in other formats: 
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-xxxx.xml">XML</a> 
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-xxxx.pdf">PDF</a></p>
    <hr><a name="appendix-authorinfo"></a><h3>Appendix B: Author Information</h3>
    <div class="indent">
      <h3>Peter Waher</h3>
      <p class="indent">
        Email:
        <a href="mailto:peter.waher@clayster.com">peter.waher@clayster.com</a><br>
        JabberID: 
        <a href="xmpp:peter.waher@jabber.org">peter.waher@jabber.org</a><br>
        URI: 
        <a href="http://www.linkedin.com/in/peterwaher">http://www.linkedin.com/in/peterwaher</a><br></p>
      <h3>Joachim Lindborg</h3>
      <p class="indent">
        Email:
        <a href="mailto:joachim.lindborg@sust.se">joachim.lindborg@sust.se</a><br>
        JabberID: 
        <a href="xmpp:joachim.lindborg@jabber.se">joachim.lindborg@jabber.se</a><br>
        URI: 
        <a href="http://se.linkedin.com/in/joachimlindborg/">http://se.linkedin.com/in/joachimlindborg/</a><br></p>
    </div>
    <hr><a name="appendix-legal"></a><h3>Appendix C: Legal Notices</h3>
    <div class="indent">
      <h4>Copyright</h4>This XMPP Extension Protocol is copyright © 1999 - 2013 by the <a href="http://xmpp.org/">XMPP Standards Foundation</a> (XSF).<h4>Permissions</h4>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h4>Disclaimer of Warranty</h4><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. ##</span><h4>Limitation of Liability</h4>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h4>IPR Conformance</h4>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which can be found at &lt;<a href="http://xmpp.org/about-xmpp/xsf/xsf-ipr-policy/">http://xmpp.org/about-xmpp/xsf/xsf-ipr-policy/</a>&gt; or obtained by writing to XMPP Standards Foundation, 1899 Wynkoop Street, Suite 600, Denver, CO 80202 USA).</div>
    <hr><a name="appendix-xmpp"></a><h3>Appendix D: Relation to XMPP</h3>
    <p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 6120) and XMPP IM (RFC 6121) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p>
    <hr><a name="appendix-discuss"></a><h3>Appendix E: Discussion Venue</h3>
    <p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p>
    <p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p>
    <p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p>
    <hr><a name="appendix-conformance"></a><h3>Appendix F: Requirements Conformance</h3>
    <p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p>
    <hr><a name="appendix-notes"></a><h3>Appendix G: Notes</h3>
    <div class="indent">
      <p><a name="nt-ID0EFBAC">1</a>. XEP-0326: Internet of Things - Concentrators &lt;<a href="http://xmpp.org/extensions/xep-0326.html">http://xmpp.org/extensions/xep-0326.html</a>&gt;.</p>
      <p><a name="nt-ID0EYEAC">2</a>. XEP-0071: XHTML-IM &lt;<a href="http://xmpp.org/extensions/xep-0071.html">http://xmpp.org/extensions/xep-0071.html</a>&gt;.</p>
      <p><a name="nt-ID0EPRAE">3</a>. XEP-0068: Field Data Standardization for Data Forms &lt;<a href="http://xmpp.org/extensions/xep-0068.html">http://xmpp.org/extensions/xep-0068.html</a>&gt;.</p>
      <p><a name="nt-ID0EGTAE">4</a>. XEP-0326: Internet of Things - Concentrators &lt;<a href="http://xmpp.org/extensions/xep-0326.html">http://xmpp.org/extensions/xep-0326.html</a>&gt;.</p>
      <p><a name="nt-ID0EDUAE">5</a>. XEP-0004: Data Forms &lt;<a href="http://xmpp.org/extensions/xep-0004.html">http://xmpp.org/extensions/xep-0004.html</a>&gt;.</p>
      <p><a name="nt-ID0EZUAE">6</a>. XEP-0122: Data Forms Validation &lt;<a href="http://xmpp.org/extensions/xep-0122.html">http://xmpp.org/extensions/xep-0122.html</a>&gt;.</p>
      <p><a name="nt-ID0EPVAE">7</a>. XEP-0137: Publishing Stream Initiation Requests &lt;<a href="http://xmpp.org/extensions/xep-0137.html">http://xmpp.org/extensions/xep-0137.html</a>&gt;.</p>
      <p><a name="nt-ID0EFWAE">8</a>. XEP-0141: Data Forms Layout &lt;<a href="http://xmpp.org/extensions/xep-0141.html">http://xmpp.org/extensions/xep-0141.html</a>&gt;.</p>
      <p><a name="nt-ID0E2WAE">9</a>. XEP-0221: Data Forms Media Element &lt;<a href="http://xmpp.org/extensions/xep-0221.html">http://xmpp.org/extensions/xep-0221.html</a>&gt;.</p>
      <p><a name="nt-ID0ERXAE">10</a>. XEP-0331: Data Forms - Color Field Types &lt;<a href="http://xmpp.org/extensions/xep-0331.html">http://xmpp.org/extensions/xep-0331.html</a>&gt;.</p>
      <p><a name="nt-ID0EHYAE">11</a>. 
						XEP-0336: Dynamic Data Forms &lt;<a href="http://xmpp.org/extensions/xep-0336.html">http://xmpp.org/extensions/xep-0336.html</a>&gt;
					</p>
      <p><a name="nt-ID0EY3AE">12</a>. XEP-0030: Service Discovery &lt;<a href="http://xmpp.org/extensions/xep-0030.html">http://xmpp.org/extensions/xep-0030.html</a>&gt;.</p>
      <p><a name="nt-ID0EP4AE">13</a>. XEP-0115: Entity Capabilities &lt;<a href="http://xmpp.org/extensions/xep-0115.html">http://xmpp.org/extensions/xep-0115.html</a>&gt;.</p>
      <p><a name="nt-ID0EG6AE">14</a>. XEP-0324: Internet of Things - Provisioning &lt;<a href="http://xmpp.org/extensions/xep-0324.html">http://xmpp.org/extensions/xep-0324.html</a>&gt;.</p>
      <p><a name="nt-ID0ECAAG">15</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p>
    </div>
    <hr><a name="appendix-revs"></a><h3>Appendix H: Revision History</h3>
    <p>Note: Older versions of this specification might be available at <a href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a></p>
    <div class="indent">
      <h4>Version 0.0.1 (2013-10-30)</h4>
      <div class="indent">
				<p class="" style="">First draft.</p>
			 (pw)
    </div>
    </div>
    <hr>
    <p>END</p>
  </body>
</html>