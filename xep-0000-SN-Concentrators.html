<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>XEP-xxxx: XEP - Sensor Networks - Concentrators</title>
    <link rel="stylesheet" type="text/css" href="xmpp.css">
    <link href="prettify.css" type="text/css" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico"><script type="text/javascript" src="prettify.js"></script><meta name="DC.Title" content="XEP - Sensor Networks - Concentrators">
    <meta name="DC.Creator" content="Peter Waher">
    <meta name="DC.Description" content="This specification describes how to manage and get information from concentrators of devices over XMPP networks.">
    <meta name="DC.Publisher" content="XMPP Standards Foundation">
    <meta name="DC.Contributor" content="XMPP Extensions Editor">
    <meta name="DC.Date" content="2013-03-20">
    <meta name="DC.Type" content="XMPP Extension Protocol">
    <meta name="DC.Format" content="XHTML">
    <meta name="DC.Identifier" content="XEP-xxxx">
    <meta name="DC.Language" content="en">
    <meta name="DC.Rights" content="This XMPP Extension Protocol is copyright (c) 1999 - 2013 by the XMPP Standards Foundation (XSF).">
  </head>
  <body onload="prettyPrint()">
    <h1>XEP-xxxx: XEP - Sensor Networks - Concentrators</h1>
    <table>
      <tr valign="top">
        <td><strong>Abstract:</strong></td>
        <td>This specification describes how to manage and get information from concentrators of devices over XMPP networks.</td>
      </tr>
      <tr valign="top">
        <td><strong>Author:</strong></td>
        <td>Peter Waher</td>
      </tr>
      <tr valign="top">
        <td><strong>Copyright:</strong></td>
        <td>© 1999 - 2013 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</td>
      </tr>
      <tr valign="top">
        <td><strong>Status:</strong></td>
        <td>ProtoXEP</td>
      </tr>
      <tr valign="top">
        <td><strong>Type:</strong></td>
        <td>Standards Track</td>
      </tr>
      <tr valign="top">
        <td><strong>Version:</strong></td>
        <td>0.0.1</td>
      </tr>
      <tr valign="top">
        <td><strong>Last Updated:</strong></td>
        <td>2013-03-20</td>
      </tr>
    </table>
    <hr>
    <p style="color:red">WARNING: This document has not yet been accepted for consideration or approved in any official manner by the XMPP Standards Foundation, and this document is not yet an XMPP Extension Protocol (XEP). If this document is accepted as a XEP by the XMPP Council, it will be published at &lt;<a href="http://xmpp.org/extensions/">http://xmpp.org/extensions/</a>&gt; and announced on the &lt;standards@xmpp.org&gt; mailing list.</p>
    <hr>
    <h2>Table of Contents</h2>
    <div class="indent">
      <p><br>1.  <a href="#intro">Introduction</a><br>2.  <a href="#glossary">Glossary</a><br>3.  <a href="#usecases">Use Cases</a><br>   
      3.1.  <a href="#sect-ID0EUCAE">Capabilities</a><br>      
      3.1.1.  <a href="#sect-ID0EYCAE">Get Capabilities</a><br>   
      3.2.  <a href="#sect-ID0E3DAE">Data Sources</a><br>      
      3.2.1.  <a href="#sect-ID0EAEAE">Get All Data Sources</a><br>      
      3.2.2.  <a href="#sect-ID0EMEAE">Get Top Data Sources</a><br>      
      3.2.3.  <a href="#sect-ID0EYEAE">Get Child Data Sources</a><br>      
      3.2.4.  <a href="#sect-ID0EEFAE">Contains Node</a><br>      
      3.2.5.  <a href="#sect-ID0EQFAE">Subscribe to data source changes</a><br>      
      3.2.6.  <a href="#sect-ID0ESGAE">Unsubscribe to data source changes</a><br>      
      3.2.7.  <a href="#sect-ID0EFHAE">Get changes since given timestamp before subscribing</a><br>   
      3.3.  <a href="#sect-ID0EXHAE">Nodes</a><br>      
      3.3.1.  <a href="#sect-ID0E2HAE">Contains Nodes</a><br>      
      3.3.2.  <a href="#sect-ID0ELIAE">Get Node</a><br>      
      3.3.3.  <a href="#sect-ID0E6IAE">Get Nodes</a><br>      
      3.3.4.  <a href="#sect-ID0ETJAE">Get Node with parameters</a><br>      
      3.3.5.  <a href="#sect-ID0EHKAE">Get Nodes with parameters</a><br>      
      3.3.6.  <a href="#sect-ID0E2KAE">Get All Nodes</a><br>      
      3.3.7.  <a href="#sect-ID0EHLAE">Get All Nodes with Parameters</a><br>      
      3.3.8.  <a href="#sect-ID0ETLAE">Get All Nodes derived from</a><br>      
      3.3.9.  <a href="#sect-ID0E6LAE">Get All Nodes derived from, with Parameters</a><br>      
      3.3.10.  <a href="#sect-ID0EPMAE">Get node inheritence</a><br>      
      3.3.11.  <a href="#sect-ID0E2MAE">Get Root Nodes</a><br>      
      3.3.12.  <a href="#sect-ID0EHNAE">Get Root Nodes with Parameters</a><br>      
      3.3.13.  <a href="#sect-ID0ETNAE">Get Child Nodes</a><br>      
      3.3.14.  <a href="#sect-ID0E6NAE">Get Child Nodes with Parameters</a><br>      
      3.3.15.  <a href="#sect-ID0ELOAE">Get indices of Data Source</a><br>      
      3.3.16.  <a href="#sect-ID0EXOAE">Get Nodes from index</a><br>      
      3.3.17.  <a href="#sect-ID0EDPAE">Get Nodes from index with Parameters</a><br>      
      3.3.18.  <a href="#sect-ID0EPPAE">Get Nodes from indices</a><br>      
      3.3.19.  <a href="#sect-ID0E2PAE">Get Nodes from indices with Parameters</a><br>      
      3.3.20.  <a href="#sect-ID0EHQAE">Get All Index Values</a><br>      
      3.3.21.  <a href="#sect-ID0ETQAE">Get Node Ancestors</a><br>      
      3.3.22.  <a href="#sect-ID0ELRAE">Move Node Up</a><br>      
      3.3.23.  <a href="#sect-ID0EBSAE">Move Node Down</a><br>      
      3.3.24.  <a href="#sect-ID0EXSAE">Move Nodes Up</a><br>      
      3.3.25.  <a href="#sect-ID0ENTAE">Move Nodes Down</a><br>   
      3.4.  <a href="#sect-ID0EEUAE">Node Parameters</a><br>      
      3.4.1.  <a href="#sect-ID0EIUAE">Get Node Parameters for editing</a><br>      
      3.4.2.  <a href="#sect-ID0E6XAE">Set Node Parameters after editing</a><br>      
      3.4.3.  <a href="#sect-ID0E2YAE">Set Node Parameters after editing, Failure</a><br>      
      3.4.4.  <a href="#sect-ID0EZZAE">Get Common Node Parameters for editing</a><br>      
      3.4.5.  <a href="#sect-ID0EC2AE">Set Common Node Parameters after editing</a><br>      
      3.4.6.  <a href="#sect-ID0EI3AE">Set Common Node Parameters after editing, Failure</a><br>      
      3.4.7.  <a href="#sect-ID0ED4AE">Get Node Status</a><br>   
      3.5.  <a href="#sect-ID0ESCAG">Creating and Destroying Nodes</a><br>      
      3.5.1.  <a href="#sect-ID0EWCAG">Get Addable Node Types</a><br>      
      3.5.2.  <a href="#sect-ID0EFDAG">Get Parameters for New Node</a><br>      
      3.5.3.  <a href="#sect-ID0EUDAG">Create New Node</a><br>      
      3.5.4.  <a href="#sect-ID0EQEAG">Create New Node, Failure</a><br>      
      3.5.5.  <a href="#sect-ID0ELFAG">Destroy Node</a><br>      
      3.5.6.  <a href="#sect-ID0EDGAG">Destroy Node, Failure</a><br>   
      3.6.  <a href="#sect-ID0EXGAG">Node Commands</a><br>      
      3.6.1.  <a href="#sect-ID0E2GAG">Get Node Commands</a><br>      
      3.6.2.  <a href="#sect-ID0E6HAG">Execute Simple Node Command</a><br>      
      3.6.3.  <a href="#sect-ID0EOIAG">Get Node Command Parameters</a><br>      
      3.6.4.  <a href="#sect-ID0E1IAG">Execute Parametrized Node Command</a><br>      
      3.6.5.  <a href="#sect-ID0EJJAG">Execute Node Command, Failure</a><br>      
      3.6.6.  <a href="#sect-ID0EAKAG">Get Common Commands for Nodes</a><br>      
      3.6.7.  <a href="#sect-ID0EPKAG">Execute Simple Command on multiple nodes</a><br>      
      3.6.8.  <a href="#sect-ID0E5KAG">Get Common Command Parameters from command on multiple nodes</a><br>      
      3.6.9.  <a href="#sect-ID0EKLAG">Execute Common Parametrized Command on multiple nodes</a><br>      
      3.6.10.  <a href="#sect-ID0EZLAG">Execute Parametrized Command on multiple Nodes, Failure</a><br>   
      3.7.  <a href="#sourceevents">Data Source Events</a><br>   
      3.8.  <a href="#sect-ID0EYMAG">Data Sets</a><br>4.  <a href="#impl">Implementation Notes</a><br>   
      4.1.  <a href="#nodeinfo">Node Information</a><br>5.  <a href="#i18n">Internationalization Considerations</a><br>   
      5.1.  <a href="#sect-ID0EDVAG">Localization</a><br>   
      5.2.  <a href="#sect-ID0ETVAG">Time Zones</a><br>   
      5.3.  <a href="#sect-ID0EAWAG">Interoperability</a><br>6.  <a href="#security">Security Considerations</a><br>   
      6.1.  <a href="#sect-ID0EMWAG">Access rights</a><br>   
      6.2.  <a href="#sect-ID0E6XAG">Restricting access to commands per contact</a><br>   
      6.3.  <a href="#sect-ID0EGYAG">Restricting access to node properties per contact</a><br>   
      6.4.  <a href="#sect-ID0ENYAG">Restricting access to node commands per contact</a><br>7.  <a href="#iana">IANA Considerations</a><br>8.  <a href="#registrar">XMPP Registrar Considerations</a><br>9.  <a href="#schema">XML Schema</a></p>
      <p><a href="#appendices">Appendices</a><br>    <a href="#appendix-docinfo">A: Document Information</a><br>    <a href="#appendix-authorinfo">B: Author Information</a><br>    <a href="#appendix-legal">C: Legal Notices</a><br>    <a href="#appendix-xmpp">D: Relation to XMPP</a><br>    <a href="#appendix-discuss">E: Discussion Venue</a><br>    <a href="#appendix-conformance">F: Requirements Conformance</a><br>    <a href="#appendix-notes">G: Notes</a><br>    <a href="#appendix-revs">H: Revision History</a></p>
    </div>
    <hr>
    <h2>1.
       <a name="intro">Introduction</a></h2>
        <p class="" style="">
            Concentrators are devices in sensor networks, concentrating the management of a sub set of devices to one point. They can be small (for example: PLC:s managing a small
            set of sensors and actuators), medium-sized (for example: mid-level concentrators, controlling branches of the network, islands, perhaps using separate comunication protocols),
            large (for example: entire sub-systems, perhaps managed by a separate child/partner organisation) to massive (for example: The entire top-level system, smart-grid, IoT network).
        </p>
        <p class="" style="">
            Even though this XEP is generally written and can be used by other implementations not based on sensor networks, much of the requirements used to define this specification
            comes from requirements used in sensor networks and Internet of Things applications and infrastructure.
        </p>
        <p class="" style="">
            This specification will define the following aspects of a general concentrator profile, that can handle all different types of concentrators available in sensor network architectures:
        </p>
        <ul class="" style="">
            <li class="" style="">
                A concentrator works with multiple <span class="strong">data sources</span>. Effective management of data sources and their contents is a vital part of this XEP.
            </li>
            <li class="" style="">The ability to work with massive quantities of entities.</li>
            <li class="" style="">Effective synchronization of contents between interested parties.</li>
            <li class="" style="">Effective ways to interact with entities controlled by the concentrator.</li>
        </ul>
        <p class="" style="">
            Even though there are technologies available in forms of XEPs that solve parts of the above mentioned problem, they do not provide sufficient support. The following paragraphs will
            take the time to list why different technologies are not applicable.
        </p>
        <p class="" style="">
            This XEP defines tree structures for nodes in different data sources. <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0060.html">Publish-Subscribe</a></span>  [<a href="#nt-ID0E2E">1</a>] defines a model where a tree structure of nodes is published and users can browse this
            tree structure. Furthermore, it allows the possibility to publish items on these nodes as well as syndicalization of this information.
        </p>
        <p class="" style="">
            This XEP also defines data sources (in a tree structure). These data sources contain nodes. <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0248.html">PubSub Collection Nodes</a></span>  [<a href="#nt-ID0EMF">2</a>] defines a structure called a node collection, a structure that 
            allows the creation of collections containing loosly coupled nodes.
        </p>
        <p class="" style="">
            Even though this document defines tree structures of data, it is not however based on XEP-0060. There are multiple reasons for this:
        </p>
        <ul class="" style="">
            <li class="" style="">
                The structures defined in this specification do not include items to publish for each node.
            </li>
            <li class="" style="">
                We want to be able to use XEP-0060 in parallell to this specification, for the purpose of publishing sensor data.
                More information about this is found in <a href="xep-0000-SN-PubSub.html">xep-0000-SN-PubSub.html</a>.
            </li>
            <li class="" style="">
                For massive systems (hundreds of thousands, or millions, of nodes behind a concentrator, its vitally important to be able to manage sets of nodes directly 
                (for example: Edit multiple nodes at once). Many of the operations in XEP-0060 only allow for operations of singular nodes. Furthermore, many simple operations 
                require multiple messages per node. This document defines way to operate of sets of nodes simultaneously, as well as ways to perform operations with a smaller 
                number of operations.
            </li>
            <li class="" style="">
                In this document, nodes have specific functions, controlled by a specific Node Type. Different Node Types have different parameter sets, different options, commands, 
                capabilities, etc. XEP-0060 does not differ between node types. There, nodes are only a structural way to sort data into a tree graph.
            </li>
            <li class="" style="">
                In this document, nodes have real-time status, like errors, warnings, etc.
            </li>
        </ul>
        <p class="" style="">
            XEP-0248 defines the concept of node collections and syndicalization of information from nodes in these collections. But XEP-0248 is not used in this specification.
            There are multiple reasons:
        </p>
        <ul class="" style="">
            <li class="" style="">
                We want to be able to use XEP-0248 in parallell to this specification, for the purpose of publishing sensor data.
                More information about this is found in <a href="xep-0000-SN-PubSub.html">xep-0000-SN-PubSub.html</a>.
            </li>
            <li class="" style="">
                Node IDs are not necessarily unique by themselves in the system. This document defines a uniqueness concept based on a triple of data: (Data Source ID, Cache Type, Node ID). This
                means that Nodes must have IDs unique within a given Cache Type, within a given data source.
            </li>
            <li class="" style="">
                We need to expand on types of events generated from a data source, to make them adhere to the particulars of nodes as defined in this specification.
            </li>
            <li class="" style="">
                Data sources own their nodes. XEP-0248 define a loosly coupled structure with references to nodes. In this document, a data source is the owner of all nodes
                contained in it.
            </li>
        </ul>
        <p class="" style="">
            <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0050.html">Ad-Hoc Commands</a></span>  [<a href="#nt-ID0E2H">3</a>] defines how ad-hoc commands can be implemented and how clients can use such commands to interact with underlying logic. But XEP-0050 is not used in this specification.
            There are multiple reasons:
        </p>
        <ul class="" style="">
            <li class="" style="">
                We want to be able to use XEP-0050 for other types of commands, than commands defined in this specification. Generally, XEP-0050 is used to implement
                system-wide commands.
            </li>
            <li class="" style="">
                Commands defined in this specification are context sensitive, i.e. they depend on the type of node and the context of the node on which the act.
            </li>
            <li class="" style="">
                It is a requirement to be able to execute commands on sets of nodes directly.
            </li>
            <li class="" style="">
                Since commands have to be context sensitive, a large concentrator system may have hundreds or thousands of different commands, making it impossible to create
                context sensitive GUI's using XEP-0050.
            </li>
            <li class="" style="">
                Dialog types used for Ad-Hoc-commands are not sufficient. First, dynamic dialogs are required in the general case. 
                (XEP <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms.html</a> define how to create dynamic forms.) Further more, the
                wizard style type of dialogs used for more complex dialogs in ad-hoc commands, are difficult to automate.
            </li>
        </ul>

        <p class="" style="">
            Sensor networks contains many different architectures and use cases. For this reason, the sensor network standards have been divided into multiple XEPs according to the following table:
        </p>

        <div class="indent">
      <p class="caption"><a name="table-1"></a>Table 1: Sensor Network XEPs</p>
      <table border="1" cellpadding="3" cellspacing="0">
            <tr class="body">
                <th colspan="" rowspan="">XEP</th>
                <th colspan="" rowspan="">Description</th>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">XEP-0000-DynamicForms</td>
                <td colspan="" rowspan="">Defines extensions for how dynamic forms can be created, based on <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0004.html">Data Forms</a></span>  [<a href="#nt-ID0ECCAC">4</a>], <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0122.html">Data Forms Validation</a></span>  [<a href="#nt-ID0EOCAC">5</a>], <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0137.html">Publishing Stream Initiation Requests</a></span>  [<a href="#nt-ID0E1CAC">6</a>] and <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0141.html">Data Forms Layout</a></span>  [<a href="#nt-ID0EGDAC">7</a>].</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">XEP-0000-Exi</td>
                <td colspan="" rowspan="">
                    Defines how to EXI can be used in XMPP to achieve efficient compression of data. Albeit not a sensor network specific XEP, this XEP should be considered
                    in all sensor network implementations where memory and packet size is an issue.
                </td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-BatteryPoweredSensors</td>
                <td colspan="" rowspan="">Defines how to handle the peculiars related to battery powered devices, and other devices intermittently available on the network.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-Concentrators</td>
                <td colspan="" rowspan="">This specification. Defines how to handle architectures containing concentrators or servers handling multiple sensors.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-Control</td>
                <td colspan="" rowspan="">Defines how to control actuators and other devices in sensor networks.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-Discovery</td>
                <td colspan="" rowspan="">Defines the peculiars of sensor discovery in sensor networks. Apart from discovering sensors by JID, it also defines how to discover sensors based on location, etc.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-Events</td>
                <td colspan="" rowspan="">Defines how sensors send events, how event subscription, hysteresis levels, etc., are configured.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-Interoperability</td>
                <td colspan="" rowspan="">Defines guidelines for how to achieve interoperability in sensor networks, publishing interoperability interfaces for different types of devices.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-Multicast</td>
                <td colspan="" rowspan="">Defines how sensor data can be multicast in efficient ways.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-Provisioning</td>
                <td colspan="" rowspan="">Defines how provisioning, the management of access privileges, etc., can be efficiently and easily implemented.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-PubSub</td>
                <td colspan="" rowspan="">Defines how efficient publication of sensor data can be made in sensor networks.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">xep-0000-SN-SensorData</td>
                <td colspan="" rowspan="">
                    Provides the underlying architecture, basic operations and data structures for sensor data communication over XMPP networks.
                    It includes a hardware abstraction model, removing any technical detail implemented in underlying technologies. This XEP is used by all other sensor network XEPs.
                </td>
            </tr>
        </table>
    </div>
    <h2>2.
       <a name="glossary">Glossary</a></h2>
        <p class="" style="">The following table lists common terms and corresponding descriptions.</p>
        <div class="indent">
      <p class="caption"><a name="table-2"></a>Table 2: Glossary</p>
      <table border="1" cellpadding="3" cellspacing="0">
            <tr class="body">
                <th colspan="" rowspan="">Term</th>
                <th colspan="" rowspan="">Description</th>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Actuator</td>
                <td colspan="" rowspan="">Device containing at least one configurable property or output that can and should be controlled by some other entity or device.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Cache Type</td>
                <td colspan="" rowspan="">Node IDs are unique within a given cache type (and data source id). Examples of cache types may be: Sensor nodes, streets, buildings, groupings, etc.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Computed Value</td>
                <td colspan="" rowspan="">A value that is computed instead of measured.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Concentrator</td>
                <td colspan="" rowspan="">Device managing a set of devices which it publishes on the XMPP network.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Data Source</td>
                <td colspan="" rowspan="">A Data source contains a collection of nodes. Three types of data sources exist: Singular, Flat and Tree. Singular data sources only include one object.
                Flat data sources contain a list of objects and Tree data sources contain nodes formed as a tree graph with one root element.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Field</td>
                <td colspan="" rowspan="">
                    One item of sensor data. Contains information about: Node, Field Name, Value, Precision, Unit, Value Type, Status, Timestamp, Localization information, etc.
                    Fields should be unique within the triple (Node ID, Field Name, Timestamp).
                </td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Field Name</td>
                <td colspan="" rowspan="">Name of a field of sensor data. Examples: Energy, Volume, Flow, Power, etc.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Field Type</td>
                <td colspan="" rowspan="">What type of value the field represents. Examples: Momentary Value, Status Value, Identification Value, Calculated Value, Peak Value, Historical Value, etc.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Historical Value</td>
                <td colspan="" rowspan="">A value stored in memory from a previous timestamp.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Identification Value</td>
                <td colspan="" rowspan="">A value that can be used for identification. (Serial numbers, meter IDs, locations, names, etc.)</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Localization information</td>
                <td colspan="" rowspan="">Optional information for a field, allowing the sensor to control how the information should be presented to human viewers.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Meter</td>
                <td colspan="" rowspan="">A device possible containing multiple sensors, used in metering applications. Examples: Electricity meter, Water Meter, Heat Meter, Cooling Meter, etc.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Momentary Value</td>
                <td colspan="" rowspan="">A momentary value represents a value measured at the time of the read-out.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Node</td>
                <td colspan="" rowspan="">
                    Graphs contain nodes and edges between nodes. In Sensor Networks, sensors, actuators, meters, devices, gateways, etc., are often depicted as nodes and links between sensors (friendships)
                    are depicted as edges. In abstract terms, it's easier to talk about a Node, than have to list different types of nodes possible (sensors, actuators, meters, devices, gateways, etc.).
                    Each Node has a Node ID. Nodes belong to a data source, and all nodes have a Node Type. Some nodes have a parent node, and some nodes have child nodes. Nodes with the same 
                    parent nodes a called sibling nodes.
                </td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Node ID</td>
                <td colspan="" rowspan="">
                    An ID uniquely identifying a node within its corresponding context. If a globally unique ID is desired, an architecture should be used using a universally accepted
                    ID scheme.
                </td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Node Type</td>
                <td colspan="" rowspan="">Each node has a Node Type. The Node Type defines the funcionality of the node in the system.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Parameter</td>
                <td colspan="" rowspan="">
                    Readable and/or writable property on a node/device. The XEP xep-0000-SN-Concentrators deals with reading and writing parameters
                    on nodes/devices. Fields are not parameters, and parameters are not fields.
                </td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Peak Value</td>
                <td colspan="" rowspan="">A maximum or minimum value during a given period.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Precision</td>
                <td colspan="" rowspan="">
                    In physics, precision determines the number of digits of precision. In sensor networks however, this definition is not easily applicable. Instead, precision
                    determines, for example, the number of decimals of precision, or power of precision. Example: 123.200 MWh contains 3 decimals of precision. All entities parsing and
                    delivering field information in sensor networks should always retain the number of decimals in a message.
                </td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Sensor</td>
                <td colspan="" rowspan="">
                    Device measuring at least one digital value (0 or 1) or analog value (value with precision and physical unit). Examples: Temperature sensor, pressure sensor, etc.
                    Sensor values are reported as fields during read-out. Each sensor has a unique Node ID.
                </td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">SN</td>
                <td colspan="" rowspan="">Sensor Network. A network consisting, but not limited to sensors, where transport and use of sensor data is of primary concern. A sensor network may contain actuators, network applications, monitors, services, etc.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Status Value</td>
                <td colspan="" rowspan="">A value displaying status information about something.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Timestamp</td>
                <td colspan="" rowspan="">Timestamp of value, when the value was sampled or recorded.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Token</td>
                <td colspan="" rowspan="">
                    A client, device or user can get a token from a provisioning server. These tokens can be included in requeests to other entities in the network, so these entities can validate
                    access rights with the provisioning server.
                </td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Unit</td>
                <td colspan="" rowspan="">Physical unit of value. Example: MWh, l/s, etc.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Value</td>
                <td colspan="" rowspan="">A field value.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Value Status</td>
                <td colspan="" rowspan="">Status of field value. Contains important status information for Quality of Service purposes. Examples: Ok, Error, Warning, Time Shifted, Missing, Signed, etc.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">Value Type</td>
                <td colspan="" rowspan="">Can be numeric, string, boolean, Date &amp; Time, Time Span or Enumeration.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">WSN</td>
                <td colspan="" rowspan="">Wireless Sensor Network, a sensor network including wireless devices.</td>
            </tr>
            <tr class="body">
                <td colspan="" rowspan="">XMPP Client</td>
                <td colspan="" rowspan="">Application connected to an XMPP network, having a JID. Note that sensors, as well as applications requesting sensor data can be XMPP clients.</td>
            </tr>
        </table>
    </div>
    <h2>3.
       <a name="usecases">Use Cases</a></h2>
        <p class="" style="">
            To create a complete set of operations supported by all types of concentrators, ranging from PLCs to subsystems to entire systems is very difficult. So, the aim
            of this document is instead to create a very small reduced set of operations, a common denominator, that would allow for basic maintenance and interoperability of
            concentrators of different makes and models and of these varying ranges.
        </p>
        <div class="indent">
      <h3>3.1 <a name="sect-ID0EUCAE">Capabilities</a></h3>
            <div class="indent">
        <h3>3.1.1 <a name="sect-ID0EYCAE">Get Capabilities</a></h3>
                <p class="" style="">
                    This document lists a sequence of commands. Some are very basic, while others are used for managing massive amounts of devices. When developing a small PLC, it might
                    be difficult to motivate the implementation of the more advanced commands. They are simply not necessary for the management of the device. So, clients connecting to
                    the concentrator need a way to learn what operations are available in the concentrator, and as a consequence what operations are not. To do this, the
                    <span class="strong">getCapabilities</span> command is sent, as is shown in the following example.
                </p>
                <p class="caption"><a name="example-1"></a>Example 1. Full capabilities</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='subsystem@clayster.com'
       id='1'&gt;
      &lt;getCapabilities xmlns='urn:xmpp:sn:concentrators'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='subsystem@clayster.com'
       to='client@clayster.com'
       id='1'&gt;
      &lt;getCapabilitiesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;value&gt;getCapabilities&lt;/value&gt;
          &lt;value&gt;getAllDataSources&lt;/value&gt;
          &lt;value&gt;getTopDataSources&lt;/value&gt;
          &lt;value&gt;getChildDataSources&lt;/value&gt;
          &lt;value&gt;containsNode&lt;/value&gt;
          &lt;value&gt;containsNodes&lt;/value&gt;
          &lt;value&gt;getNode&lt;/value&gt;
          &lt;value&gt;getNodes&lt;/value&gt;
          &lt;value&gt;getAllNodes&lt;/value&gt;
          &lt;value&gt;getRootNodes&lt;/value&gt;
          &lt;value&gt;getChildNodes&lt;/value&gt;
          &lt;value&gt;getIndices&lt;/value&gt;
          &lt;value&gt;getNodeFromIndex&lt;/value&gt;
          &lt;value&gt;getNodesFromIndex&lt;/value&gt;
          &lt;value&gt;getAllNodesFromIndex&lt;/value&gt;
          &lt;value&gt;getNodeParameters&lt;/value&gt;
          &lt;value&gt;getCommonNodeParameters&lt;/value&gt;
          &lt;value&gt;getNodeParameterNames&lt;/value&gt;
          &lt;value&gt;getNodeParameterValues&lt;/value&gt;
          &lt;value&gt;setNodeParameterValues&lt;/value&gt;
          &lt;value&gt;getNodeStatus&lt;/value&gt;
          &lt;value&gt;getAddableNodeTypes&lt;/value&gt;
          &lt;value&gt;getParametersForNewNode&lt;/value&gt;
          &lt;value&gt;createNewNode&lt;/value&gt;
          &lt;value&gt;destroyNode&lt;/value&gt;
          &lt;value&gt;getAncestors&lt;/value&gt;
          &lt;value&gt;getNodeCommands&lt;/value&gt;
          &lt;value&gt;getCommonNodeCommands&lt;/value&gt;
          &lt;value&gt;getCommandParameters&lt;/value&gt;
          &lt;value&gt;getCommonCommandParameters&lt;/value&gt;
          &lt;value&gt;moveUp&lt;/value&gt;
          &lt;value&gt;moveDown&lt;/value&gt;
      &lt;/getCapabilitiesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    A smaller gateway on the other hand, may have skipped the implementation of the batch commands that are used for larger systems:
                </p>
                
                <p class="caption"><a name="example-2"></a>Example 2. No batch command capabilities</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='gateway@clayster.com'
       id='2'&gt;
      &lt;getCapabilities xmlns='urn:xmpp:sn:concentrators'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='gateway@clayster.com'
       to='client@clayster.com'
       id='2'&gt;
      &lt;getCapabilitiesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;value&gt;getCapabilities&lt;/value&gt;
          &lt;value&gt;getAllDataSources&lt;/value&gt;
          &lt;value&gt;getTopDataSources&lt;/value&gt;
          &lt;value&gt;getChildDataSources&lt;/value&gt;
          &lt;value&gt;containsNode&lt;/value&gt;
          &lt;value&gt;getNode&lt;/value&gt;
          &lt;value&gt;getRootNodes&lt;/value&gt;
          &lt;value&gt;getChildNodes&lt;/value&gt;
          &lt;value&gt;getNodeParameters&lt;/value&gt;
          &lt;value&gt;getNodeStatus&lt;/value&gt;
          &lt;value&gt;getAddableNodeTypes&lt;/value&gt;
          &lt;value&gt;getParametersForNewNode&lt;/value&gt;
          &lt;value&gt;createNewNode&lt;/value&gt;
          &lt;value&gt;destroyNode&lt;/value&gt;
          &lt;value&gt;getAncestors&lt;/value&gt;
          &lt;value&gt;getNodeCommands&lt;/value&gt;
          &lt;value&gt;getCommandParameters&lt;/value&gt;
          &lt;value&gt;moveUp&lt;/value&gt;
          &lt;value&gt;moveDown&lt;/value&gt;
      &lt;/getCapabilitiesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    But a small PLC, possibly with a fixed set of nodes, might have support for an even more reduced set of commands:
                </p>
                <p class="caption"><a name="example-3"></a>Example 3. No edit capabilities</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='plc@clayster.com'
       id='3'&gt;
      &lt;getCapabilities xmlns='urn:xmpp:sn:concentrators'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='plc@clayster.com'
       to='client@clayster.com'
       id='3'&gt;
      &lt;getCapabilitiesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;value&gt;getCapabilities&lt;/value&gt;
          &lt;value&gt;getAllDataSources&lt;/value&gt;
          &lt;value&gt;getNode&lt;/value&gt;
          &lt;value&gt;getRootNodes&lt;/value&gt;
          &lt;value&gt;getChildNodes&lt;/value&gt;
          &lt;value&gt;getNodeParameters&lt;/value&gt;
          &lt;value&gt;getNodeStatus&lt;/value&gt;
          &lt;value&gt;getNodeCommands&lt;/value&gt;
          &lt;value&gt;getCommandParameters&lt;/value&gt;
      &lt;/getCapabilitiesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    So, clients who need to interact with different types of concentrators need to be aware of what commands are supported, and limit operations to thos commands.
                </p>
            </div>
        </div>
        <div class="indent">
      <h3>3.2 <a name="sect-ID0E3DAE">Data Sources</a></h3>
            <div class="indent">
        <h3>3.2.1 <a name="sect-ID0EAEAE">Get All Data Sources</a></h3>
                <p class="" style="">
                    This command will return a flat list of all available data sources on the concentrator. It is not structured hierarchically.
                </p>
                <p class="caption"><a name="example-4"></a>Example 4. Get All Data Sources</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='4'&gt;
      &lt;getAllDataSources xmlns='urn:xmpp:sn:concentrators' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='4'&gt;
      &lt;getAllDataSourcesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;dataSource id='Applications' name='Applications' hasChildren='false' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;dataSource id='Certificates' name='Certificates' hasChildren='false' lastChanged='2013-02-20T12:31:54'/&gt;
          &lt;dataSource id='Clayster.EventSink.Programmable' name='Programmable Event Log' hasChildren='false' lastChanged='2012-10-25T09:31:12'/&gt;
          ...
      &lt;/getAllDataSourcesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.2.2 <a name="sect-ID0EMEAE">Get Top Data Sources</a></h3>
                <p class="" style="">
                    If the client is interested in the hierarchical structure of available data sources, it should request only the root sources, and then ask the client for their
                    corresponding child data sources. If the client wants to present the data sources to a user, presenting them in their hierarchical order may be more intuitive.
                </p>
                <p class="caption"><a name="example-5"></a>Example 5. Get Top Data Sources</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='5'&gt;
      &lt;getTopDataSources xmlns='urn:xmpp:sn:concentrators' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='5'&gt;
      &lt;getTopDataSourcesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;dataSource id='MeteringRoot' name='Metering' hasChildren='true' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;dataSource id='SecurityRoot' name='Security' hasChildren='true' lastChanged='2013-01-12T22:03:50'/&gt;
          &lt;dataSource id='SystemRoot' name='System' hasChildren='true' lastChanged='2012-02-20T12:34:56'/&gt;
          ...
      &lt;/getAllDataSourcesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.2.3 <a name="sect-ID0EYEAE">Get Child Data Sources</a></h3>
                <p class="" style="">
                    Having the ID of a data source that contains child data sources, you can fetch the child sources as follows:
                </p>
                <p class="caption"><a name="example-6"></a>Example 6. Get Child Data Sources</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='6'&gt;
      &lt;getChildDataSources xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringRoot' xml:lang='en' lastChanged='2013-03-19T17:58:01'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='6'&gt;
      &lt;getChildDataSourcesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;dataSource id='MeteringFieldImports' name='Field Imports' hasChildren='false' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;dataSource id='MeteringFieldProcessors' name='Field Processors' hasChildren='false' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;dataSource id='MeteringFieldSinks' name='Field Sinks' hasChildren='false' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;dataSource id='MeteringGroups' name='Groups' hasChildren='false' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;dataSource id='MeteringJobs' name='Jobs' hasChildren='false' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;dataSource id='MeteringTopology' name='Topology' hasChildren='false' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;dataSource id='MeteringUnitConversion' name='Unit Conversion' hasChildren='false' lastChanged='2013-03-19T17:58:01'/&gt;
      &lt;/getChildDataSourcesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.2.4 <a name="sect-ID0EEFAE">Contains Node</a></h3>
                <p class="" style="">
                    This command permits the client to check the existance of a node on the concetrator.
                </p>
                <p class="caption"><a name="example-7"></a>Example 7. Checking the existance of a node</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='7'&gt;
      &lt;containsNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='7'&gt;
      &lt;containsNodeResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;true&lt;/containsNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.2.5 <a name="sect-ID0EQFAE">Subscribe to data source changes</a></h3>
                <p class="" style="">
                    A client can subscribe to changes made in a data source. It does this by sending the <span class="strong">subscribe</span> command to the concentrator,
                    as is shown in the following example:
                </p>
                <p class="caption"><a name="example-8"></a>Example 8. Subscribing to data source events</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='57'&gt;
      &lt;subscribe xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='57'&gt;
      &lt;subscribeResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Multiple subscriptions to the same source will not result in an error, however the server will still only send one event message for each event in the data source.
                </p>
                <p class="" style="">
                    <span class="strong">Important:</span> Event subscriptions only last for as long as the client and concentrator both maintains precense. The concentrator must not persist
                    event notification subscriptions, and if it goes offline and back online, or if the client goes offline or online again for any reason, the event subscription
                    is removed.
                </p>
                <p class="" style="">
                    For more information on types of events sent, see the <a href="#sourceevents">Data Source Events</a> section.
                </p>
            </div>
            <div class="indent">
        <h3>3.2.6 <a name="sect-ID0ESGAE">Unsubscribe to data source changes</a></h3>
                <p class="" style="">
                    A client can unsubscribe to changes made in a data source it is subscribed to. It does this by sending the <span class="strong">unsubscribe</span> command to the concentrator,
                    as is shown in the following example:
                </p>
                <p class="caption"><a name="example-9"></a>Example 9. Unsubscribing to data source events</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='58'&gt;
      &lt;unsubscribe xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='58'&gt;
      &lt;unsubscribeResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    An unsubscription made to an existing data source, but where an even subscription does not exist, must not result in an error.
                </p>
            </div>
            <div class="indent">
        <h3>3.2.7 <a name="sect-ID0EFHAE">Get changes since given timestamp before subscribing</a></h3>
                <p class="" style="">
                    If a client comes back online and wants to know any changes that have taken place on the concentrator since last time it was in contact with it,
                    it can include a <span class="strong">getEventsSince</span> attribute in the <span class="strong">subscribe</span> command sent to the concentrator. This will make the
                    concentrator send all event messages since the given timestamp to the client before subscribing the client to events in the given data source.
                </p>
                <p class="caption"><a name="example-10"></a>Example 10. Get changes since given timestamp before subscribing</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='59'&gt;
      &lt;subscribe xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' getEventsSince='2013-03-21T19:24:00'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='59'&gt;
      &lt;subscribeResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
   
   ... Sequence of event messages sent from concentrator to client.
                </pre>
        </div>
            </div>
        </div>
        <div class="indent">
      <h3>3.3 <a name="sect-ID0EXHAE">Nodes</a></h3>
            <div class="indent">
        <h3>3.3.1 <a name="sect-ID0E2HAE">Contains Nodes</a></h3>
                <p class="" style="">
                    If the client wants to check the existance of multiple nodes on the concentrator, it can use this batch command instead:
                </p>
                <p class="caption"><a name="example-11"></a>Example 11. Checking the existance of a multiple nodes</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='8'&gt;
      &lt;containsNodes xmlns='urn:xmpp:sn:concentrators'&gt;
         &lt;node sourceId='MeteringTopology' nodeId='Node1'/&gt;
         &lt;node sourceId='MeteringTopology' nodeId='Node2'/&gt;
         &lt;node sourceId='MeteringTopology' nodeId='Node3'/&gt;
         &lt;node sourceId='MeteringGroups' nodeId='Group1'/&gt;
      &lt;/containsNodes&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='8'&gt;
      &lt;containsNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
         &lt;value&gt;true&lt;/value&gt;
         &lt;value&gt;true&lt;/value&gt;
         &lt;value&gt;false&lt;/value&gt;
         &lt;value&gt;true&lt;/value&gt;
      &lt;/containsNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    The array returned will have one item for each item in the request, in the same order.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.2 <a name="sect-ID0ELIAE">Get Node</a></h3>
                <p class="" style="">
                    This command returns basic information about a node in the concentrator.
                </p>
                <p class="caption"><a name="example-12"></a>Example 12. Get Node</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='9'&gt;
      &lt;getNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='9'&gt;
      &lt;getNodeResponse xmlns='urn:xmpp:sn:concentrators' 
                       result='OK'
                       id='Node1' 
                       nodeType='Namespace.NodeType1' 
                       cacheType='Node' 
                       state='WarningUnsigned' 
                       hasChildren='false'
                       isReadable='true' 
                       isConfigurable='true' 
                       hasCommands='true' 
                       parentId='Root' 
                       lastChanged='2013-03-19T17:58:01'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    For more information, see <a href="#nodeinfo">Node Information</a>.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.3 <a name="sect-ID0E6IAE">Get Nodes</a></h3>
                <p class="" style="">
                    This commands lets the client get information from multiple nodes at once.
                </p>
                <p class="caption"><a name="example-13"></a>Example 13. Get Nodes</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='10'&gt;
      &lt;getNodes xmlns='urn:xmpp:sn:concentrators'&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node1'/&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node2'/&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node3'/&gt;
      &lt;/getNodes&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='10'&gt;
      &lt;getNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' isReadable='true' 
                isConfigurable='true' hasCommands='true' parentId='Root' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;node id='Node2' nodeType='Namespace.NodeType2' cacheType='Node' state='None' hasChildren='false' isReadable='true' 
                isConfigurable='true' hasCommands='true' parentId='Root' lastChanged='2013-03-19T17:58:01'/&gt;
          &lt;node id='Node3' nodeType='Namespace.NodeType3' cacheType='Node' state='None' hasChildren='false' isReadable='true' 
                isConfigurable='true' hasCommands='true' parentId='Root' lastChanged='2013-03-19T17:58:01'/&gt;
      &lt;/getNodesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    For more information, see <a href="#nodeinfo">Node Information</a>.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.4 <a name="sect-ID0ETJAE">Get Node with parameters</a></h3>
                <p class="" style="">
                    This command returns basic information about a node in the concentrator, but also adds properties for the node.
                </p>
                <p class="caption"><a name="example-14"></a>Example 14. Get Node with parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='11'&gt;
      &lt;getNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1' xml:lang='en' parameters='true'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='11'&gt;
      &lt;getNodeResponse xmlns='urn:xmpp:sn:concentrators' result='OK' id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' 
                       hasChildren='false' isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root' lastChanged='2013-03-19T17:58:01'&gt;
          &lt;string id='id' name='Node ID' value='Node1'/&gt;
          &lt;string id='type' name='Node Type' value='Watchamacallit Temperature Sensor v1.2'/&gt;
          &lt;string id='sn' name='Serial Number' value='123456'/&gt;
          &lt;string id='class' name='Node Class' value='Temperature'/&gt;
          &lt;string id='meterLoc' name='Meter Location' value='P123502-2'/&gt;
          &lt;int id='addr' name='Address' value='123'/&gt;
          &lt;double id='lat' name='Latitude' value='12.345'/&gt;
          &lt;double id='long' name='Longitude' value='123.45'/&gt;
      &lt;/getNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    For more information, see <a href="#nodeinfo">Node Information</a>.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.5 <a name="sect-ID0EHKAE">Get Nodes with parameters</a></h3>
                <p class="" style="">
                    This commands lets the client get information from multiple nodes at once, including node properties.
                </p>
                <p class="caption"><a name="example-15"></a>Example 15. Get Nodes with parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='12'&gt;
      &lt;getNodes xmlns='urn:xmpp:sn:concentrators' parameters='true' xml:lang='true'&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node1'/&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node2'/&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node3'/&gt;
      &lt;/getNodes&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='12'&gt;
      &lt;getNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' isReadable='true' 
                isConfigurable='true' hasCommands='true' parentId='Root' lastChanged='2013-03-19T17:58:01'&gt;
              &lt;string id='id' name='Node ID' value='Node1'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Temperature Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='123456'/&gt;
              &lt;string id='class' name='Node Class' value='Temperature'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P123502-2'/&gt;
              &lt;int id='addr' name='Address' value='123'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
          &lt;node id='Node2' nodeType='Namespace.NodeType2' cacheType='Node' state='None' hasChildren='false' isReadable='true' 
                isConfigurable='true' hasCommands='true' parentId='Root' lastChanged='2013-03-19T17:58:01'&gt;
              &lt;string id='id' name='Node ID' value='Node2'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Pressure Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='234567'/&gt;
              &lt;string id='class' name='Node Class' value='Pressure'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P668632-6'/&gt;
              &lt;int id='addr' name='Address' value='124'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
          &lt;node id='Node3' nodeType='Namespace.NodeType3' cacheType='Node' state='None' hasChildren='false' isReadable='true' 
                isConfigurable='true' hasCommands='true' parentId='Root' lastChanged='2013-03-19T17:58:01'&gt;
              &lt;string id='id' name='Node ID' value='Node3'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Electricity Meter v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='345678'/&gt;
              &lt;string id='class' name='Node Class' value='Electricity'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P332367-9'/&gt;
              &lt;int id='addr' name='Address' value='125'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
      &lt;/getNodesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    For more information, see <a href="#nodeinfo">Node Information</a>.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.6 <a name="sect-ID0E2KAE">Get All Nodes</a></h3>
                <p class="" style="">
                    If the device does not manage too many nodes, it could choose to implement this function. It would return all all available nodes with one call.
                </p>
                <p class="caption"><a name="example-16"></a>Example 16. Get All Nodes</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='13'&gt;
      &lt;getAllNodes xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='13'&gt;
      &lt;getAllNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'/&gt;
          &lt;node id='Node2' nodeType='Namespace.NodeType2' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'/&gt;
          &lt;node id='Node3' nodeType='Namespace.NodeType3' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'/&gt;
          &lt;node id='Root' nodeType='Namespace.Root' cacheType='Node' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true'/&gt;
      &lt;/getNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.7 <a name="sect-ID0EHLAE">Get All Nodes with Parameters</a></h3>
                <p class="" style="">
                    If the device does not manage too many nodes, it could choose to implement this function. It would return all all available nodes with their parameters with one call.
                </p>
                <p class="caption"><a name="example-17"></a>Example 17. Get All Nodes with Parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='14'&gt;
      &lt;getAllNodes xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' parameters='true' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='14'&gt;
      &lt;getAllNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node1'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Temperature Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='123456'/&gt;
              &lt;string id='class' name='Node Class' value='Temperature'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P123502-2'/&gt;
              &lt;int id='addr' name='Address' value='123'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
          &lt;node id='Node2' nodeType='Namespace.NodeType2' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node2'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Pressure Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='234567'/&gt;
              &lt;string id='class' name='Node Class' value='Pressure'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P668632-6'/&gt;
              &lt;int id='addr' name='Address' value='124'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
          &lt;node id='Node3' nodeType='Namespace.NodeType3' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node3'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Electricity Meter v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='345678'/&gt;
              &lt;string id='class' name='Node Class' value='Electricity'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P332367-9'/&gt;
              &lt;int id='addr' name='Address' value='125'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
          &lt;node id='Root' nodeType='Namespace.Root' cacheType='Node' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true'&gt;
              &lt;string id='id' name='Node ID' value='Root'/&gt;
              &lt;string id='type' name='Node Type' value='Root Node'/&gt;
          &lt;/node&gt;
      &lt;/getNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.8 <a name="sect-ID0ETLAE">Get All Nodes derived from</a></h3>
                <p class="" style="">
                    This command assumes node types exist in a class hierarchy, and allows the caller to retrieve nodes with similar inheritance.
                </p>
                <p class="caption"><a name="example-18"></a>Example 18. Get All Nodes derived from</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='15'&gt;
      &lt;getAllNodes xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology'&gt;
          &lt;onlyIfDerivedFrom&gt;Namespace.BaseClass1&lt;/onlyIfDerivedFrom&gt;
      &lt;/getAllNodes&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='15'&gt;
      &lt;getAllNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'/&gt;
          &lt;node id='Node3' nodeType='Namespace.NodeType3' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'/&gt;
      &lt;/getNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.9 <a name="sect-ID0E6LAE">Get All Nodes derived from, with Parameters</a></h3>
                <p class="" style="">
                    This command assumes node types exist in a class hierarchy, and allows the caller to retrieve nodes with similar inheritance. It also returns node parameters
                    directly in the response.
                </p>
                <p class="caption"><a name="example-19"></a>Example 19. Get All Nodes derived from, with Parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='16'&gt;
      &lt;getAllNodes xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' parameters='true' xml:lang='en'&gt;
          &lt;onlyIfDerivedFrom&gt;Namespace.BaseClass1&lt;/onlyIfDerivedFrom&gt;
      &lt;/getAllNodes&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='16'&gt;
      &lt;getAllNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node1'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Temperature Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='123456'/&gt;
              &lt;string id='class' name='Node Class' value='Temperature'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P123502-2'/&gt;
              &lt;int id='addr' name='Address' value='123'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
          &lt;node id='Node3' nodeType='Namespace.NodeType3' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node3'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Electricity Meter v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='345678'/&gt;
              &lt;string id='class' name='Node Class' value='Electricity'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P332367-9'/&gt;
              &lt;int id='addr' name='Address' value='125'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
      &lt;/getNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that the caller can list multiple classes in the request. This would return only nodes having the correct base class(es) and
                    implementing all interfaces.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.10 <a name="sect-ID0EPMAE">Get node inheritence</a></h3>
                <p class="" style="">
                    This command assumes node types exist in a class hierarchy. It allows the caller to get a list of the node class hierarchy and implemented interfaces the
                    node has.
                </p>
                <p class="caption"><a name="example-20"></a>Example 20. Get node inheritence</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='17'&gt;
      &lt;getNodeInheritence xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='17'&gt;
      &lt;getNodeInheritenceResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;baseClasses&gt;
              &lt;value&gt;Namespace.BaseClass1&lt;/value&gt;
              &lt;value&gt;Namespace.AbstractBase&lt;/value&gt;
          &lt;/baseClasses&gt;
      &lt;/getNodeInheritenceResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.11 <a name="sect-ID0E2MAE">Get Root Nodes</a></h3>
                <p class="" style="">
                    This commands returns the root node of a data source (in case the source is a tree-shaped data source) or the root nodes of a data source (in case the
                    source is flat).
                </p>
                <p class="caption"><a name="example-21"></a>Example 21. Get Root Nodes</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='18'&gt;
      &lt;getRootNodes xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' /&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='18'&gt;
      &lt;getRootNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'/&gt;
      &lt;/getRootNodesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.12 <a name="sect-ID0EHNAE">Get Root Nodes with Parameters</a></h3>
                <p class="" style="">
                    This commands returns the root node of a data source (in case the source is a tree-shaped data source) or the root nodes of a data source (in case the
                    source is flat), and also returns the parameters for the corresponding nodes.
                </p>
                <p class="caption"><a name="example-22"></a>Example 22. Get Root Nodes with Parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='19'&gt;
      &lt;getRootNodes xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' parameters='true' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='19'&gt;
      &lt;getRootNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node1'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Temperature Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='123456'/&gt;
              &lt;string id='class' name='Node Class' value='Temperature'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P123502-2'/&gt;
              &lt;int id='addr' name='Address' value='123'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
      &lt;/getRootNodesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.13 <a name="sect-ID0ETNAE">Get Child Nodes</a></h3>
                <p class="" style="">
                    This commands returns the child nodes of a node in a data source.
                </p>
                <p class="caption"><a name="example-23"></a>Example 23. Get Child Nodes</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='20'&gt;
      &lt;getChildNodes xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1' /&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='20'&gt;
      &lt;getChildNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node2' nodeType='Namespace.NodeType2' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'/&gt;
          &lt;node id='Node3' nodeType='Namespace.NodeType3' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'/&gt;
      &lt;/getRootNodesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.14 <a name="sect-ID0E6NAE">Get Child Nodes with Parameters</a></h3>
                <p class="" style="">
                    This commands returns the child nodes of a node in a data source, and also returns the parameters for the corresponding nodes.
                </p>
                <p class="caption"><a name="example-24"></a>Example 24. Get Child Nodes with Parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='21'&gt;
      &lt;getChildNodes xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1' parameters='true' xml:lang='en' /&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='21'&gt;
      &lt;getChildNodesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node2' nodeType='Namespace.NodeType2' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node2'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Pressure Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='234567'/&gt;
              &lt;string id='class' name='Node Class' value='Pressure'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P668632-6'/&gt;
              &lt;int id='addr' name='Address' value='124'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
          &lt;node id='Node3' nodeType='Namespace.NodeType3' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node3'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Electricity Meter v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='345678'/&gt;
              &lt;string id='class' name='Node Class' value='Electricity'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P332367-9'/&gt;
              &lt;int id='addr' name='Address' value='125'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
      &lt;/getRootNodesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.15 <a name="sect-ID0ELOAE">Get indices of Data Source</a></h3>
                <p class="" style="">
                    This commands returns a list of available indices in a data source. Indices can be used for efficient node look-up.
                </p>
                <p class="caption"><a name="example-25"></a>Example 25. Get Child Nodes with Parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='22'&gt;
      &lt;getIndices xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' /&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='22'&gt;
      &lt;getIndicesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;value&gt;country&lt;/value&gt;
          &lt;value&gt;region&lt;/value&gt;
          &lt;value&gt;city&lt;/value&gt;
          &lt;value&gt;area&lt;/value&gt;
          &lt;value&gt;street&lt;/value&gt;
          &lt;value&gt;building&lt;/value&gt;
          &lt;value&gt;apartment&lt;/value&gt;
          &lt;value&gt;oid&lt;/value&gt;
      &lt;/getIndicesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.16 <a name="sect-ID0EXOAE">Get Nodes from index</a></h3>
                <p class="" style="">
                    This command can be used to get a node or nodes from a data source using an index and an index value.
                </p>
                <p class="caption"><a name="example-26"></a>Example 26. Get Nodes from index</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='23'&gt;
      &lt;getNodesFromIndex xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' index='apartment' indexValue='A1-1' /&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='23'&gt;
      &lt;getNodesFromIndexResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node2' nodeType='Namespace.MeteringTopologyReference' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Apartment 1-1'/&gt;
      &lt;/getNodesFromIndexResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.17 <a name="sect-ID0EDPAE">Get Nodes from index with Parameters</a></h3>
                <p class="" style="">
                    This command can be used to get a node or nodes from a data source using an index and an index value, and also returns the parameters for the corresponding nodes.
                </p>
                <p class="caption"><a name="example-27"></a>Example 27. Get Nodes from index with Parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='24'&gt;
      &lt;getNodesFromIndex xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' index='apartment' indexValue='A1-1' 
                         parameters='true' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='24'&gt;
      &lt;getNodesFromIndexResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node2' nodeType='Namespace.MeteringTopologyReference' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Apartment 1-1'&gt;
              &lt;string id='id' name='Node ID' value='Node2'/&gt;
              &lt;string id='type' name='Node Type' value='Metering Topology Reference'/&gt;
              &lt;string id='referenceId' name='Reference ID' value='Node2'/&gt;
          &lt;/node&gt;
      &lt;/getNodesFromIndexResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.18 <a name="sect-ID0EPPAE">Get Nodes from indices</a></h3>
                <p class="" style="">
                    This command can be used to get nodes from a set of data source using indices and index values.
                </p>
                <p class="caption"><a name="example-28"></a>Example 28. Get Nodes from indices</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='25'&gt;
      &lt;getNodesFromIndices xmlns='urn:xmpp:sn:concentrators'&gt;
          &lt;indexRef sourceId='MeteringGroups' index='apartment' indexValue='A1-1'/&gt;
          &lt;indexRef sourceId='MeteringGroups' index='apartment' indexValue='A1-2'/&gt;
      &lt;/getNodesFromIndices&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='25'&gt;
      &lt;getNodesFromIndicesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node2' nodeType='Namespace.MeteringTopologyReference' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Apartment 1-1'/&gt;
          &lt;node id='Node3' nodeType='Namespace.MeteringTopologyReference' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Apartment 1-2'/&gt;
      &lt;/getNodesFromIndicesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.19 <a name="sect-ID0E2PAE">Get Nodes from indices with Parameters</a></h3>
                <p class="" style="">
                    This command can be used to get nodes from a set of data source using indices and index values, and also returns the parameters for the corresponding nodes.
                </p>
                <p class="caption"><a name="example-29"></a>Example 29. Get Nodes from indices with Parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='26'&gt;
      &lt;getNodesFromIndices xmlns='urn:xmpp:sn:concentrators' parameters='true' xml:lang='en'&gt;
          &lt;indexRef sourceId='MeteringGroups' index='apartment' indexValue='A1-1'/&gt;
          &lt;indexRef sourceId='MeteringGroups' index='apartment' indexValue='A1-2'/&gt;
      &lt;/getNodesFromIndices&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='26'&gt;
      &lt;getNodesFromIndicesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node2' nodeType='Namespace.MeteringTopologyReference' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Apartment 1-1'&gt;
              &lt;string id='id' name='Node ID' value='Node2'/&gt;
              &lt;string id='type' name='Node Type' value='Metering Topology Reference'/&gt;
              &lt;string id='referenceId' name='Reference ID' value='Node2'/&gt;
          &lt;/node&gt;
          &lt;node id='Node3' nodeType='Namespace.MeteringTopologyReference' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Apartment 1-2'&gt;
              &lt;string id='id' name='Node ID' value='Node3'/&gt;
              &lt;string id='type' name='Node Type' value='Metering Topology Reference'/&gt;
              &lt;string id='referenceId' name='Reference ID' value='Node3'/&gt;
          &lt;/node&gt;
      &lt;/getNodesFromIndicesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.20 <a name="sect-ID0EHQAE">Get All Index Values</a></h3>
                <p class="" style="">
                    This command can be used to get a list of available index values, given a data source and an index.
                </p>
                <p class="caption"><a name="example-30"></a>Example 30. Get All Index Values</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='27'&gt;
      &lt;getAllIndexValues xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' index='apartment'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='27'&gt;
      &lt;getAllIndexValuesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;value&gt;A1-1&lt;/value&gt;
          &lt;value&gt;A1-2&lt;/value&gt;
          ...
      &lt;/getAllIndexValuesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.3.21 <a name="sect-ID0ETQAE">Get Node Ancestors</a></h3>
                <p class="" style="">
                    In a tree formed data source, all nodes except the root node has a parent node. The <span class="strong">getAncestors</span> command allows the client to get a list
                    of all ancestors (parent, grand parent, etc.) of a node, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-31"></a>Example 31. Get Node Ancestors</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='42'&gt;
      &lt;getAncestors xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='Node2' parameters='false' messages='false' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='42'&gt;
      &lt;getAncestorsResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node2' nodeType='Namespace.MeteringTopologyReference' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Apartment 1-1'/&gt;
          &lt;node id='Apartment 1-1' nodeType='Namespace.Apartment' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true' parentId='Building 1'/&gt;
          &lt;node id='Building 1' nodeType='Namespace.Building' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true' parentId='Street'/&gt;
          &lt;node id='Street' nodeType='Namespace.Street' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true' parentId='Area'/&gt;
          &lt;node id='Area' nodeType='Namespace.Area' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true' parentId='City'/&gt;
          &lt;node id='City' nodeType='Namespace.City' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true' parentId='Region'/&gt;
          &lt;node id='Region' nodeType='Namespace.Region' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true' parentId='Country'/&gt;
          &lt;node id='Country' nodeType='Namespace.Country' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true' parentId='Root'/&gt;
          &lt;node id='Root' nodeType='Namespace.Root' state='None' hasChildren='true' 
                isReadable='false' isConfigurable='false' hasCommands='true'/&gt;
      &lt;/getAncestorsResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that the concentrator returns information about the node itself in the response. The <span class="strong">parameters</span> and <span class="strong">messages</span>
                    attributes are used in the request to control if the concentrator should return node parameters and node status messages in the response as well.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.22 <a name="sect-ID0ELRAE">Move Node Up</a></h3>
                <p class="" style="">
                    As the order of siblings in a tree can be important, depending on the context and type of nodes involved, the client may be allowed to move nodes up and down among siblings.
                    To move a node upwards among its siblings is done using the command <span class="strong">moveNodeUp</span>, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-32"></a>Example 32. Move Node Up</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='53'&gt;
      &lt;moveNodeUp xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringFieldProcessors' nodeId='LogicalOperator'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='53'&gt;
      &lt;moveNodeUpResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that a node that is first among its siblings will maintain its position. The response to the command must still be <span class="strong">OK</span>.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.23 <a name="sect-ID0EBSAE">Move Node Down</a></h3>
                <p class="" style="">
                    As the order of siblings in a tree can be important, depending on the context and type of nodes involved, the client may be allowed to move nodes up and down among siblings.
                    To move a node downwards among its siblings is done using the command <span class="strong">moveNodeDown</span>, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-33"></a>Example 33. Move Node Up</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='54'&gt;
      &lt;moveNodeDown xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringFieldProcessors' nodeId='LogicalOperator'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='54'&gt;
      &lt;moveNodeDownResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that a node that is last among its siblings will maintain its position. The response to the command must still be <span class="strong">OK</span>.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.24 <a name="sect-ID0EXSAE">Move Nodes Up</a></h3>
                <p class="" style="">
                    To move a set of nodes upwards among its siblings is done using the command <span class="strong">moveNodesUp</span>, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-34"></a>Example 34. Move Nodes Up</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='55'&gt;
      &lt;moveNodseUp xmlns='urn:xmpp:sn:concentrators'&gt;
          &lt;node sourceId='MeteringFieldProcessors' nodeId='LogicalOperator3'/&gt;
          &lt;node sourceId='MeteringFieldProcessors' nodeId='LogicalOperator4'/&gt;
          &lt;node sourceId='MeteringFieldProcessors' nodeId='LogicalOperator5'/&gt;
      &lt;/moveNodseUp&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='55'&gt;
      &lt;moveNodesUpResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that a node that is first among its siblings will maintain its position. The response to the command must still be <span class="strong">OK</span>. If an attempt is performed to move a
                    sequence of nodes that are together first as siblings, none of the nodes move relative to each other.
                </p>
            </div>
            <div class="indent">
        <h3>3.3.25 <a name="sect-ID0ENTAE">Move Nodes Down</a></h3>
                <p class="" style="">
                    To move a set of nodes downwards among its siblings is done using the command <span class="strong">moveNodesDown</span>, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-35"></a>Example 35. Move Node Up</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='56'&gt;
      &lt;moveNodesDown xmlns='urn:xmpp:sn:concentrators'&gt;
          &lt;node sourceId='MeteringFieldProcessors' nodeId='LogicalOperator3'/&gt;
          &lt;node sourceId='MeteringFieldProcessors' nodeId='LogicalOperator4'/&gt;
          &lt;node sourceId='MeteringFieldProcessors' nodeId='LogicalOperator5'/&gt;
      &lt;/moveNodseDown&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='56'&gt;
      &lt;moveNodesDownResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that a node that is last among its siblings will maintain its position. The response to the command must still be <span class="strong">OK</span>. If an attempt is performed to move a
                    sequence of nodes that are together last as siblings, none of the nodes move relative to each other.
                </p>
            </div>
        </div>
        <div class="indent">
      <h3>3.4 <a name="sect-ID0EEUAE">Node Parameters</a></h3>
            <div class="indent">
        <h3>3.4.1 <a name="sect-ID0EIUAE">Get Node Parameters for editing</a></h3>
                <p class="" style="">
                    Previously described commands can return parameters for a node. But these parameters are for presentational or informational use. If the client wants to edit
                    the parameters of a node, another set of commands must be used. This use case shows how <span class="strong">getNodeParametersForEdit</span> can be used to edit available
                    parameters for one node.
                </p>
                <p class="" style="">
                    <span class="strong">Note:</span> When editing parameters for a node, a different set of parameters might be returned compared to the set of parameters available in commands
                    mentioned above. There may be various resons for this, among other things (but not limited to) user rights, node settings, and parameter type. User rights may restrict the number
                    of parameters the user can access. The node may be configured not to allow editing of certain parameters. Also, some types of parameters may only be available in
                    an edit mode (like long multi-line parameters) and not in a shorter presentation mode.
                </p>
                <p class="caption"><a name="example-36"></a>Example 36. Get Node Parameters for editing</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='28'&gt;
      &lt;getNodeParametersForEdit xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='28'&gt;
      &lt;getNodeParametersForEditResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;x type='form' 
             xmlns='jabber:x:data' 
             xmlns:xdv='http://jabber.org/protocol/xdata-validate'
             xmlns:xdl:='http://jabber.org/protocol/xdata-layout'
             xmlns:xdd:='http://jabber.org/protocol/xdata-dynamic'&gt;
              &lt;title&gt;Node1&lt;/title&gt;
              &lt;xdl:page label='Identity'&gt;
                  &lt;xdl:fieldref var='id'/&gt;
                  &lt;xdl:fieldref var='type'/&gt;
                  &lt;xdl:fieldref var='class'/&gt;
                  &lt;xdl:fieldref var='sn'/&gt;
              &lt;/xdl:page&gt;
              &lt;xdl:page label='Location'&gt;
                  &lt;xdl:fieldref var='meterLoc'/&gt;
                  &lt;xdl:fieldref var='lat'/&gt;
                  &lt;xdl:fieldref var='long'/&gt;
              &lt;/xdl:page&gt;
              &lt;xdl:page label='Communication'&gt;
                  &lt;xdl:fieldref var='addr'/&gt;
              &lt;/xdl:page&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;009c7956-001c-43fb-8edb-76bcf74272c9&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='id' type='text-single' label='Node ID:'&gt;
                  &lt;desc&gt;ID of the node.&lt;/desc&gt;
                  &lt;required/&gt;
                  &lt;value&gt;Node1&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='type' type='text-single' label='Node Type:'&gt;
                  &lt;desc&gt;Type of node.&lt;/desc&gt;
                  &lt;value&gt;Watchamacallit Temperature Sensor v1.2&lt;/value&gt;
                  &lt;xdd:readOnly/&gt;
              &lt;/field&gt;
              &lt;field var='class' type='list-single' label='Node Class:'&gt;
                  &lt;desc&gt;Class of node&lt;/desc&gt;
                  &lt;value&gt;Temperature&lt;/value&gt;
                  &lt;option label='Cooling'&gt;&lt;value&gt;Cooling&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Electricity'&gt;&lt;value&gt;Electricity&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Heating'&gt;&lt;value&gt;Heating&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Pressure'&gt;&lt;value&gt;Pressure&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Temperature'&gt;&lt;value&gt;Temperature&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Water'&gt;&lt;value&gt;Water&lt;/value&gt;&lt;/option&gt;
                  ...
              &lt;/field&gt;
              &lt;field var='sn' type='text-single' label='Serial Number:'&gt;
                  &lt;desc&gt;Serial number of node/device.&lt;/desc&gt;
                  &lt;value&gt;123456&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='meterLoc' type='text-single' label='Meter Location:'&gt;
                  &lt;desc&gt;Meter Location.&lt;/desc&gt;
                  &lt;value&gt;P123502-2&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='addr' type='text-single' label='Address:'&gt;
                  &lt;xdv:validate datatype='xs:int'&gt;
                      &lt;xdv:range min='1' max='250'/&gt;
                  &lt;/xdv:validate&gt;
                  &lt;desc&gt;Bus address&lt;/desc&gt;
                  &lt;value&gt;123&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='lat' type='text-single' label='Latitude:'&gt;
                  &lt;xdv:validate datatype='xs:double'&gt;
                      &lt;xdv:range min='-90' max='90'/&gt;
                  &lt;/xdv:validate&gt;
                  &lt;desc&gt;Latitude of node.&lt;/desc&gt;
                  &lt;value&gt;12.345&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='long' type='text-single' label='Longitude:'&gt;
                  &lt;xdv:validate datatype='xs:double'&gt;
                      &lt;xdv:range min='-180' max='180'/&gt;
                  &lt;/xdv:validate&gt;
                  &lt;desc&gt;Longitude of node.&lt;/desc&gt;
                  &lt;value&gt;123.45&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/getNodeParametersForEditResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    The following table lists the different XEP's the client should implement to be able to support parameter forms according to this proposal:
                </p>
                <div class="indent">
          <p class="caption"><a name="table-3"></a>Table 3: Form XEPs</p>
          <table border="1" cellpadding="3" cellspacing="0">
                    <tr class="body">
                        <th colspan="" rowspan="">XEP</th>
                        <th colspan="" rowspan="">Description</th>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">XEP-0004</td>
                        <td colspan="" rowspan="">Describes how basic forms are handled.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">XEP-0122</td>
                        <td colspan="" rowspan="">Makes it possible to add certain client validation rules to form parameters.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">XEP-0137</td>
                        <td colspan="" rowspan="">Makes it possible to publish a file upload parameter.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">XEP-0141</td>
                        <td colspan="" rowspan="">Makes it possible to layout parameters into pages and sections.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">XEP-0141</td>
                        <td colspan="" rowspan="">Makes it possible to layout parameters into pages and sections.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">xep-0000-DynamicForms</td>
                        <td colspan="" rowspan="">Makes it possible to create dynamic forms, with server-side validation and forms that change dynamically depending on input.</td>
                    </tr>
                    
                </table>
        </div>
                <p class="" style="">
                    Read-only parameters will be returned with the <span class="strong">readOnly</span> element, as defined in <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms</a>.
                    Clients SHOULD support this extension if using this command. However, the server MUST NOT change parameters in a node that are read-only, even if clients happen
                    to try to set them.
                </p>
            </div>
            <div class="indent">
        <h3>3.4.2 <a name="sect-ID0E6XAE">Set Node Parameters after editing</a></h3>
                <p class="" style="">
                    After editing the form, the client uses the <span class="strong">setNodeParametersAfterEdit</span> command to set the parameters in the node. Note that it is possible to
                    set the same parameters (or a sub-set of the same parameters) to a different node using this command, without the need to get new form parameters. However, after the first
                    successful set operation, any form session used for dynamic validation during edit will not be available on the server any more.
                </p>
                <p class="caption"><a name="example-37"></a>Example 37. Set Node Parameters after editing</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='29'&gt;
      &lt;setNodeParametersAfterEdit xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1' xml:lang='en'&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;009c7956-001c-43fb-8edb-76bcf74272c9&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='id' type='text-single'&gt;
                  &lt;value&gt;Node1&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='class' type='list-single'&gt;
                  &lt;value&gt;Temperature&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='sn' type='text-single'&gt;
                  &lt;value&gt;123456&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='meterLoc' type='text-single'&gt;
                  &lt;value&gt;P123502-2&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='addr' type='text-single'&gt;
                  &lt;value&gt;123&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='lat' type='text-single'&gt;
                  &lt;value&gt;12.345&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='long' type='text-single'&gt;
                  &lt;value&gt;123.45&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/setNodeParametersAfterEdit&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='29'&gt;
      &lt;setNodeParametersAfterEditResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node1'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Temperature Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='123456'/&gt;
              &lt;string id='class' name='Node Class' value='Temperature'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P123502-2'/&gt;
              &lt;int id='addr' name='Address' value='123'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
      &lt;/setNodeParametersAfterEditResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that validation rules, pagination, etc., can be stripped from the form when submitting it to the server. Also the form type attribute must be set
                    to <span class="strong">'submit'</span>. Note also that as the <span class="strong">result</span> attribute is <span class="strong">OK</span>, it is assumed the server has dropped any parameter form resources
                    related to the form, which disables any future dynamic validation of the contents of the form. The newly edited node will also be available in the response
                    in a <span class="strong">node</span> element.
                </p>
            </div>
            <div class="indent">
        <h3>3.4.3 <a name="sect-ID0E2YAE">Set Node Parameters after editing, Failure</a></h3>
                <p class="" style="">
                    The following example shows how the server responds when the client tries to set invalid parameters. The response contains detailed information about why,
                    information which the client can use to inform the user (if any) of what went wrong.
                </p>
                <p class="caption"><a name="example-38"></a>Example 38. Set Node Parameters after editing, Failure</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='30'&gt;
      &lt;setNodeParametersAfterEdit xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node2' xml:lang='en'&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;009c7956-001c-43fb-8edb-76bcf74272c9&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='id' type='text-single'&gt;
                  &lt;value&gt;Node1&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='class' type='list-single'&gt;
                  &lt;value&gt;Temperature&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='sn' type='text-single'&gt;
                  &lt;value&gt;123456&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='meterLoc' type='text-single'&gt;
                  &lt;value&gt;P123502-2&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='addr' type='text-single'&gt;
                  &lt;value&gt;123&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='lat' type='text-single'&gt;
                  &lt;value&gt;12.345&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='long' type='text-single'&gt;
                  &lt;value&gt;123.45&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/setNodeParametersAfterEdit&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='30'&gt;
      &lt;setNodeParametersAfterEditResponse xmlns='urn:xmpp:sn:concentrators' result='FormError'&gt;
          &lt;error var='id'&gt;There already exists a node with this ID.&lt;/error&gt;
      &lt;/setNodeParametersAfterEditResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    As the <span class="strong">result</span> attribute is <span class="strong">FormError</span>, the server maintains any parameter form resources related to the form, and features such as
                    dynamic validation of the contents of the form will still be available until the parameters have been successfully set, the operation has been
                    explicitly cancelled or a form session time-out has occurred. See <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms</a>
                     [<a href="#nt-ID0ERZAE">8</a>] for more information.
                </p>
            </div>
            <div class="indent">
        <h3>3.4.4 <a name="sect-ID0EZZAE">Get Common Node Parameters for editing</a></h3>
                <p class="" style="">
                    Advanced concentrators handling large quantities of nodes may let users edit sets of nodes at once to be practical. This is done by publising the
                    <span class="strong">getCommonNodeParametersForEdit</span> command. It will return a form with parameters that are common for all selected nodes. Since nodes
                    may have different node types it is assumed that different nodes have different sets of parameters. But if this command is used, only parameters matching
                    in IDs, descriptions, validation rules, etc., (but not values) will be returned in a form.
                </p>
                <p class="" style="">
                    <span class="strong">Important:</span> A parameter that exists in multiple nodes but having different values will be marked with the <span class="strong">notSame</span> element,
                    according to <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms</a>. Clients using this command MUST support the extensions defined in
                    <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms</a>.
                </p>
                <p class="caption"><a name="example-39"></a>Example 39. Get Common Node Parameters for editing</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='31'&gt;
      &lt;getCommonNodeParametersForEdit xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' xml:lang='en'&gt;
         &lt;node sourceId='MeteringTopology' nodeId='Node1'/&gt;
         &lt;node sourceId='MeteringTopology' nodeId='Node2'/&gt;
         &lt;node sourceId='MeteringTopology' nodeId='Node3'/&gt;
      &lt;/getCommonNodeParametersForEdit&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='31'&gt;
      &lt;getCommonNodeParametersForEditResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;x type='form' 
             xmlns='jabber:x:data' 
             xmlns:xdv='http://jabber.org/protocol/xdata-validate'
             xmlns:xdl:='http://jabber.org/protocol/xdata-layout'
             xmlns:xdd:='http://jabber.org/protocol/xdata-dynamic'&gt;
              &lt;title&gt;Node1, Node2, Node3&lt;/title&gt;
              &lt;xdl:page label='Identity'&gt;
                  &lt;xdl:fieldref var='type'/&gt;
                  &lt;xdl:fieldref var='class'/&gt;
                  &lt;xdl:fieldref var='sn'/&gt;
              &lt;/xdl:page&gt;
              &lt;xdl:page label='Location'&gt;
                  &lt;xdl:fieldref var='meterLoc'/&gt;
                  &lt;xdl:fieldref var='lat'/&gt;
                  &lt;xdl:fieldref var='long'/&gt;
              &lt;/xdl:page&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;009c7956-001c-43fb-8edb-76bcf74272c9&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='type' type='text-single' label='Node Type:'&gt;
                  &lt;desc&gt;Type of node.&lt;/desc&gt;
                  &lt;value&gt;Watchamacallit Temperature Sensor v1.2&lt;/value&gt;
                  &lt;xdd:readOnly/&gt;
                  &lt;xdd:notSame/&gt;
              &lt;/field&gt;
              &lt;field var='class' type='list-single' label='Node Class:'&gt;
                  &lt;desc&gt;Class of node&lt;/desc&gt;
                  &lt;value&gt;Temperature&lt;/value&gt;
                  &lt;xdd:notSame/&gt;
                  &lt;option label='Cooling'&gt;&lt;value&gt;Cooling&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Electricity'&gt;&lt;value&gt;Electricity&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Heating'&gt;&lt;value&gt;Heating&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Pressure'&gt;&lt;value&gt;Pressure&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Temperature'&gt;&lt;value&gt;Temperature&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Water'&gt;&lt;value&gt;Water&lt;/value&gt;&lt;/option&gt;
                  ...
              &lt;/field&gt;
              &lt;field var='sn' type='text-single' label='Serial Number:'&gt;
                  &lt;desc&gt;Serial number of node/device.&lt;/desc&gt;
                  &lt;value&gt;123456&lt;/value&gt;
                  &lt;xdd:notSame/&gt;
              &lt;/field&gt;
              &lt;field var='meterLoc' type='text-single' label='Meter Location:'&gt;
                  &lt;desc&gt;Meter Location.&lt;/desc&gt;
                  &lt;value&gt;P123502-2&lt;/value&gt;
                  &lt;xdd:notSame/&gt;
              &lt;/field&gt;
              &lt;field var='addr' type='text-single' label='Address:'&gt;
                  &lt;xdv:validate datatype='xs:int'&gt;
                      &lt;xdv:range min='1' max='250'/&gt;
                  &lt;/xdv:validate&gt;
                  &lt;desc&gt;Bus address&lt;/desc&gt;
                  &lt;value&gt;123&lt;/value&gt;
                  &lt;xdd:notSame/&gt;
              &lt;/field&gt;
              &lt;field var='lat' type='text-single' label='Latitude:'&gt;
                  &lt;xdv:validate datatype='xs:double'&gt;
                      &lt;xdv:range min='-90' max='90'/&gt;
                  &lt;/xdv:validate&gt;
                  &lt;desc&gt;Latitude of node.&lt;/desc&gt;
                  &lt;value&gt;12.345&lt;/value&gt;
                  &lt;xdd:notSame/&gt;
              &lt;/field&gt;
              &lt;field var='long' type='text-single' label='Longitude:'&gt;
                  &lt;xdv:validate datatype='xs:double'&gt;
                      &lt;xdv:range min='-180' max='180'/&gt;
                  &lt;/xdv:validate&gt;
                  &lt;desc&gt;Longitude of node.&lt;/desc&gt;
                  &lt;value&gt;123.45&lt;/value&gt;
                  &lt;xdd:notSame/&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/getCommonNodeParametersForEditResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that parameters that are not available in all selected nodes will have been removed. Also and ID-parameter will have been removed, since they
                    cannot be set for a collection of nodes.
                </p>
                <p class="" style="">
                    Fields marked with the <span class="strong">notSame</span> element only present one value, perhaps the value of the first node. However, the field should be clearly
                    marked in any end-user GUI (for example by graying the field), and MUST ONLY be sent back to the server in a set operation if explicitly edited by the end-user.
                    The parameter will be set in all selected nodes in that case. Unedited fields should be treated as if the end-user accepts the different values for the current set of nodes.
                </p>
            </div>
            <div class="indent">
        <h3>3.4.5 <a name="sect-ID0EC2AE">Set Common Node Parameters after editing</a></h3>
                <p class="" style="">
                    After editing the form, the client uses the <span class="strong">setCommonNodeParametersAfterEdit</span> command to set the parameters in the set of nodes. Note that it is possible to
                    set the same parameters (or a sub-set of the same parameters) to a different set of nodes using this command, without the need to get new form parameters. However, after the first
                    successful set operation, any form session used for dynamic validation during edit will not be available on the server any more.
                </p>
                <p class="caption"><a name="example-40"></a>Example 40. Set Common Node Parameters after editing</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='32'&gt;
      &lt;setCommonNodeParametersAfterEdit xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1' xml:lang='en'&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node1'/&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node2'/&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node3'/&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;009c7956-001c-43fb-8edb-76bcf74272c9&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='class' type='list-single'&gt;
                  &lt;value&gt;Temperature&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/setCommonNodeParametersAfterEdit&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='32'&gt;
      &lt;setCommonNodeParametersAfterEditResponse xmlns='urn:xmpp:sn:concentrators' result='FormError'&gt;
          &lt;node id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node1'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Temperature Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='123456'/&gt;
              &lt;string id='class' name='Node Class' value='Temperature'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P123502-2'/&gt;
              &lt;int id='addr' name='Address' value='123'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
          &lt;node id='Node2' nodeType='Namespace.NodeType2' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node2'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Pressure Sensor v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='234567'/&gt;
              &lt;string id='class' name='Node Class' value='Temperature'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P668632-6'/&gt;
              &lt;int id='addr' name='Address' value='124'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
          &lt;node id='Node3' nodeType='Namespace.NodeType3' cacheType='Node' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root'&gt;
              &lt;string id='id' name='Node ID' value='Node3'/&gt;
              &lt;string id='type' name='Node Type' value='Watchamacallit Electricity Meter v1.2'/&gt;
              &lt;string id='sn' name='Serial Number' value='345678'/&gt;
              &lt;string id='class' name='Node Class' value='Temperature'/&gt;
              &lt;string id='meterLoc' name='Meter Location' value='P332367-9'/&gt;
              &lt;int id='addr' name='Address' value='125'/&gt;
              &lt;double id='lat' name='Latitude' value='12.345'/&gt;
              &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;/node&gt;
      &lt;/setCommonNodeParametersAfterEditResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that validation rules, pagination, etc., can be stripped from the form when submitting it to the server. Also the form type attribute must be set
                    to <span class="strong">'submit'</span>. Note also that as the <span class="strong">result</span> attribute is <span class="strong">OK</span>, it is assumed the server has dropped any parameter form resources
                    related to the form, which disables any future dynamic validation of the contents of the form.
                </p>
                <p class="" style="">
                    <span class="strong">Important:</span> A parameter that exists in multiple nodes but having different values will be marked with the <span class="strong">notSame</span> element,
                    according to <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms</a>. Such parameters MUST NOT be sent back to the server unless they have explicitly
                    beed edited or signed by the end-user. The value sent back to the server will be set in all nodes.
                </p>
            </div>
            <div class="indent">
        <h3>3.4.6 <a name="sect-ID0EI3AE">Set Common Node Parameters after editing, Failure</a></h3>
                <p class="" style="">
                    The following example shows how the server responds when the client tries to set invalid parameters to a set of nodes. The response contains detailed information about why,
                    information which the client can use to inform the user (if any) of what went wrong.
                </p>
                <p class="caption"><a name="example-41"></a>Example 41. Set Node Parameters after editing, Failure</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='33'&gt;
      &lt;setCommonNodeParametersAfterEdit xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' xml:lang='en'&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node1'/&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node2'/&gt;
          &lt;node sourceId='MeteringTopology' nodeId='Node3'/&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;009c7956-001c-43fb-8edb-76bcf74272c9&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='id' type='text-single'&gt;
                  &lt;value&gt;Node1&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='class' type='list-single'&gt;
                  &lt;value&gt;Temperature&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/setCommonNodeParametersAfterEdit&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='33'&gt;
      &lt;setCommonNodeParametersAfterEditResponse xmlns='urn:xmpp:sn:concentrators' result='FormError'&gt;
          &lt;error var='id'&gt;Parameter not available.&lt;/error&gt;
      &lt;/setCommonNodeParametersAfterEditResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    As the <span class="strong">result</span> attribute is <span class="strong">FormError</span>, the server maintains any parameter form resources related to the form, and features such as
                    dynamic validation of the contents of the form will still be available until the parameters have been successfully set, the operation has been
                    explicitly cancelled or a form session time-out has occurred. See <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms</a>
                    <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms.html</a> for more information.
                </p>
            </div>
            <div class="indent">
        <h3>3.4.7 <a name="sect-ID0ED4AE">Get Node Status</a></h3>
                <p class="" style="">
                    Each node in the concentrator has a <span class="strong">state</span>. This state is a dynamic run-time state, and therefore not presented as a more static property.
                    This state can be any of the following values, in order of increasing importance:
                </p>
                <div class="indent">
          <p class="caption"><a name="table-4"></a>Table 4: Node states</p>
          <table border="1" cellpadding="3" cellspacing="0">
                    <tr class="body">
                        <th colspan="" rowspan="">State</th>
                        <th colspan="" rowspan="">Description</th>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">None</td>
                        <td colspan="" rowspan="">Nothing has been reported on the node.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">Information</td>
                        <td colspan="" rowspan="">There are informative events reported on the node.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">WarningSigned</td>
                        <td colspan="" rowspan="">There are warnings reported on the node. But these warnings have been viewed by an operator.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">WarningUnsigned</td>
                        <td colspan="" rowspan="">There are new or unreviewed warnings reported on the node.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">ErrorSigned</td>
                        <td colspan="" rowspan="">There are errors reported on the node. But these errors have been viewed by an operator.</td>
                    </tr>
                    <tr class="body">
                        <td colspan="" rowspan="">ErrorUnsigned</td>
                        <td colspan="" rowspan="">There are new or unreviewed errors reported on the node.</td>
                    </tr>
                </table>
        </div>
                <p class="" style="">
                    Other types of "states" are of course possible, such as phase - installation phase, test phase, production phase, etc. - but such "states" are seen as static
                    and presented as properties on the node. The dynamic information of the <span class="strong">state</span> attribute of a node, is to give a dynamic runtime state that has
                    the possibility to change during runtime, and that operators must be aware of.
                </p>
                <p class="" style="">
                    The following commands have an optional attribute, with which they can ask the server to return any events logged on the node, giving more details of the
                    current state of the node:
                </p>
                <ul class="" style="">
                    <li class="" style="">
                        <span class="strong">getNode</span>
                    </li>
                    <li class="" style="">
                        <span class="strong">getNodes</span>
                    </li>
                    <li class="" style="">
                        <span class="strong">getChildNodes</span>
                    </li>
                    <li class="" style="">
                        <span class="strong">getAllNodes</span>
                    </li>
                    <li class="" style="">
                        <span class="strong">getRootNodes</span>
                    </li>
                    <li class="" style="">
                        <span class="strong">getNodesFromIndex</span>
                    </li>
                    <li class="" style="">
                        <span class="strong">getNodesFromIndices</span>
                    </li>
                </ul>
                <p class="caption"><a name="example-42"></a>Example 42. Get Node Status</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='34'&gt;
      &lt;getNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1' messages='true' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='34'&gt;
      &lt;getNodeResponse xmlns='urn:xmpp:sn:concentrators' result='OK' 
                       id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false'
                       isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root' lastChanged='2013-03-19T17:58:01'&gt;
          &lt;message timestamp='2013-03-21T11:06:15' type='WarningUnsigned' id='ClockWarning'&gt;Internal clock is offset more than 7 seconds.&lt;/message&gt;
      &lt;/getNodeResponse&gt;                       
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    The <span class="strong">messages</span> attribute can be combined with the <span class="strong">parameters</span> attribute to provide both node properties and
                    messages in the response.
                </p>
                <p class="caption"><a name="example-43"></a>Example 43. Get Node with parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='35'&gt;
      &lt;getNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringTopology' nodeId='Node1' xml:lang='en' parameters='true' messages='true'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='35'&gt;
      &lt;getNodeResponse xmlns='urn:xmpp:sn:concentrators' result='OK' 
                       id='Node1' nodeType='Namespace.NodeType1' cacheType='Node' state='WarningUnsigned' hasChildren='false' 
                       isReadable='true' isConfigurable='true' hasCommands='true' parentId='Root' lastChanged='2013-03-19T17:58:01'&gt;
          &lt;string id='id' name='Node ID' value='Node1'/&gt;
          &lt;string id='type' name='Node Type' value='Watchamacallit Temperature Sensor v1.2'/&gt;
          &lt;string id='sn' name='Serial Number' value='123456'/&gt;
          &lt;string id='class' name='Node Class' value='Temperature'/&gt;
          &lt;string id='meterLoc' name='Meter Location' value='P123502-2'/&gt;
          &lt;int id='addr' name='Address' value='123'/&gt;
          &lt;double id='lat' name='Latitude' value='12.345'/&gt;
          &lt;double id='long' name='Longitude' value='123.45'/&gt;
          &lt;message timestamp='2013-03-21T11:06:15' type='WarningUnsigned' id='ClockWarning'&gt;Internal clock is offset more than 7 seconds.&lt;/message&gt;
      &lt;/getNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
        </div>
        <div class="indent">
      <h3>3.5 <a name="sect-ID0ESCAG">Creating and Destroying Nodes</a></h3>
            <div class="indent">
        <h3>3.5.1 <a name="sect-ID0EWCAG">Get Addable Node Types</a></h3>
                <p class="" style="">
                    Since nodes are context sensitive, depending on node type and tree structure, before being able to create a new node, it is important to know what types of nodes
                    can be added to a given node. This is done using the <span class="strong">getAddableNodeTypes</span> command, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-44"></a>Example 44. Get Addable Node Types</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='36'&gt;
      &lt;getAddableNodeTypes xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='B1' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='36'&gt;
      &lt;getAddableNodeTypesResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;nodeType type='Namespace.Apartment' name='Apartment'/&gt;
          &lt;nodeType type='Namespace.MeteringTopologyReference' name='Metering Topology Reference'/&gt;
          &lt;nodeType type='Namespace.Location' name='Service Location'/&gt;
      &lt;/getAddableNodeTypesResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.5.2 <a name="sect-ID0EFDAG">Get Parameters for New Node</a></h3>
                <p class="" style="">
                    When you what type of node you want to create, you need to get a set of parameters you need to fill in for the new node, before you can create it.
                    This is done using the <span class="strong">getParametersForNewNode</span> command, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-45"></a>Example 45. Get Parameters for New Node</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='37'&gt;
      &lt;getParametersForNewNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='B1' type='Namespace.MeteringTopologyReference' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='37'&gt;
      &lt;getParametersForNewNodeResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;x type='form' 
             xmlns='jabber:x:data' 
             xmlns:xdv='http://jabber.org/protocol/xdata-validate'
             xmlns:xdl:='http://jabber.org/protocol/xdata-layout'
             xmlns:xdd:='http://jabber.org/protocol/xdata-dynamic'&gt;
              &lt;title&gt;Metering Topology&lt;/title&gt;
              &lt;xdl:page label='Identity'&gt;
                  &lt;xdl:fieldref var='id'/&gt;
                  &lt;xdl:fieldref var='referenceId'/&gt;
              &lt;/xdl:page&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;0B146517-8EA3-4BEC-A2E9-CF3F209D4A5D&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='id' type='text-single' label='Node ID:'&gt;
                  &lt;desc&gt;ID of the node.&lt;/desc&gt;
                  &lt;required/&gt;
                  &lt;value/&gt;
              &lt;/field&gt;
              &lt;field var='referenceId' type='text-single' label='Metering Node ID:'&gt;
                  &lt;desc&gt;ID of the node in the metering topology.&lt;/desc&gt;
                  &lt;required/&gt;
                  &lt;value/&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/getParametersForNewNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.5.3 <a name="sect-ID0EUDAG">Create New Node</a></h3>
                <p class="" style="">
                    After editing the form, the client uses the <span class="strong">createNewNode</span> command to create the new node using the parameters provided in the form.
                </p>
                <p class="caption"><a name="example-46"></a>Example 46. Create New Node after editing</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='38'&gt;
      &lt;createNewNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='B1' type='Namespace.MeteringTopologyReference' xml:lang='en'&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;0B146517-8EA3-4BEC-A2E9-CF3F209D4A5D&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='id' type='text-single'&gt;
                  &lt;value&gt;Reference to Node1&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='referenceId' type='text-single'&gt;
                  &lt;value&gt;Node1&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/setNodeParametersAfterEdit&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='38'&gt;
      &lt;createNewNodeResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;node id='Reference to Node1' nodeType='Namespace.MeteringTopologyReference' state='None' hasChildren='false' 
                isReadable='true' isConfigurable='true' hasCommands='true' parentId='B1'&gt;
              &lt;string id='id' name='Node ID' value='Reference to Node1'/&gt;
              &lt;string id='type' name='Node Type' value='Metering Topology Reference'/&gt;
              &lt;string id='referenceId' name='Reference ID' value='Node1'/&gt;
          &lt;/node&gt;
      &lt;/createNewNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Note that validation rules, pagination, etc., can be stripped from the form when submitting it to the server. Also the form type attribute must be set
                    to <span class="strong">'submit'</span>. Note also that as the <span class="strong">result</span> attribute is <span class="strong">OK</span>, it is assumed the server has dropped any parameter form resources
                    related to the form, which disables any future dynamic validation of the contents of the form. The newly created node with corresponding parameters is also returned
                    in the response in a <span class="strong">node</span> element.
                </p>
            </div>
            <div class="indent">
        <h3>3.5.4 <a name="sect-ID0EQEAG">Create New Node, Failure</a></h3>
                <p class="" style="">
                    The following example shows how the server responds when it cannot accept parameters provided when trying to create a node. The response will contain detailed information
                    about why, information which the client can use to inform the user (if any) of what went wrong.
                </p>
                <p class="caption"><a name="example-47"></a>Example 47. Create New Node, Failure</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='39'&gt;
      &lt;createNewNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='B1' type='Namespace.MeteringTopologyReference' xml:lang='en'&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;0B146517-8EA3-4BEC-A2E9-CF3F209D4A5D&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='id' type='text-single'&gt;
                  &lt;value&gt;Node2&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='referenceId' type='text-single'&gt;
                  &lt;value&gt;NodeX&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/setNodeParametersAfterEdit&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='39'&gt;
      &lt;createNewNodeResponse xmlns='urn:xmpp:sn:concentrators' result='FormError'&gt;
          &lt;error var='id'&gt;There already exists a node with this ID.&lt;/error&gt;
          &lt;error var='referenceId'&gt;Referenced node was not found.&lt;/error&gt;
      &lt;/createNewNodeResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    As the <span class="strong">result</span> attribute is <span class="strong">FormError</span>, the server maintains any parameter form resources related to the form, and features such as
                    dynamic validation of the contents of the form will still be available until the parameters have been successfully set, the operation has been
                    explicitly cancelled or a form session time-out has occurred. See <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms</a>
                    <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms.html</a> for more information.
                </p>
            </div>
            <div class="indent">
        <h3>3.5.5 <a name="sect-ID0ELFAG">Destroy Node</a></h3>
                <p class="" style="">
                    To destroy (remove) a node from the concentrator, the <span class="strong">destroyNode</span> command is sent, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-48"></a>Example 48. Destroy Node</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='40'&gt;
      &lt;destroyNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='B1' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='40'&gt;
      &lt;destroyNodeResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    Since the <span class="strong">result</span> attribute in the response is <span class="strong">OK</span>, the node has been removed.
                </p>
            </div>
            <div class="indent">
        <h3>3.5.6 <a name="sect-ID0EDGAG">Destroy Node, Failure</a></h3>
                <p class="" style="">
                    If the <span class="strong">result</span> attribute in the response is other than <span class="strong">OK</span>, the node was not removed from the concentrator.
                    The <span class="strong">result</span> attribute contains the reason why the operation failed, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-49"></a>Example 49. Destroy Node, Failure</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='41'&gt;
      &lt;destroyNode xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='B1' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='41'&gt;
      &lt;destroyNodeResponse xmlns='urn:xmpp:sn:concentrators' result='InsufficientPrivileges'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
        </div>
        <div class="indent">
      <h3>3.6 <a name="sect-ID0EXGAG">Node Commands</a></h3>
            <div class="indent">
        <h3>3.6.1 <a name="sect-ID0E2GAG">Get Node Commands</a></h3>
                <p class="" style="">
                    Each node can have a context sensitive set of commands available to it. This is shown using the <span class="strong">hasCommands</span> attribute in the
                    <a href="#nodeinfo">Node Information</a> record describing the corresponding node. If the client wants to get a list of available commands,
                    the <span class="strong">getNodeCommands</span> command is sent to the concentrator, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-50"></a>Example 50. Get Node Commands</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='43'&gt;
      &lt;getNodeCommands xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='Apartment 1-1' xml:lang='en'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='43'&gt;
      &lt;getNodeCommandsResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;command id='knockDoor' name='Knock on door' type='Simple' 
                   confirmationString='Are you sure you want to knock on the door?'
                   failureString='Unable to knock on the dorr.'
                   successString='Door knocked.'/&gt;
          &lt;command id='scheduleWakeupCall' name='Schedule wakeup call' type='Parametrized' 
                   failureString='Unable to schedule the wakeup call.'
                   successString='Wakeup call scheduled.'/&gt;
      &lt;/getNodeCommandsResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
                <p class="" style="">
                    There are two types of commands available: <span class="strong">Simple</span> and <span class="strong">Parametrized</span>. <span class="strong">Simple</span> commands take no parameters, and
                    are therefore simpler to execute. <span class="strong">Parametrized</span> commands require the client to get a set of parameters for the corresponding command before it
                    can be executed. For more information about command attributes, see <a href="#nodecommands">Node Commands</a>.
                </p>
            </div>
            <div class="indent">
        <h3>3.6.2 <a name="sect-ID0E6HAG">Execute Simple Node Command</a></h3>
                <p class="" style="">
                    Executing a simple command is done by sending the <span class="strong">executeNodeCommand</span> command to the concentrator, as is shown in the following example:
                </p>
                <p class="caption"><a name="example-51"></a>Example 51. Execute Simple Node Command</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='44'&gt;
      &lt;executeNodeCommand xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='Apartment 1-1' command='knockDoor'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='44'&gt;
      &lt;executeNodeCommandResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.6.3 <a name="sect-ID0EOIAG">Get Node Command Parameters</a></h3>
                <p class="" style="">
                    To execute a parametrized command on the node, the client first needs to get (and edit) a set of parameters for the command. Getting a set of parameters for a
                    parametrized command is done as follows:
                </p>
                <p class="caption"><a name="example-52"></a>Example 52. Get Node Command Parameters</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='45'&gt;
      &lt;getCommandParameters xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='Apartment 1-1' command='scheduleWakeupCall'/&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='45'&gt;
      &lt;getCommandParametersResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;x type='form' 
             xmlns='jabber:x:data' 
             xmlns:xdv='http://jabber.org/protocol/xdata-validate'
             xmlns:xdl:='http://jabber.org/protocol/xdata-layout'
             xmlns:xdd:='http://jabber.org/protocol/xdata-dynamic'&gt;
              &lt;title&gt;Schedule wake-up call&lt;/title&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;E14E330F-8496-46F0-8F40-178808AB13A7&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='time' type='text-single' label='Time:'&gt;
                  &lt;desc&gt;Time of the wake-up call.&lt;/desc&gt;
                  &lt;required/&gt;
                  &lt;value&gt;&lt;/value&gt;
                  &lt;xdv:validate datatype='xs:time'/&gt;
                      &lt;xdv:basic/&gt;
                  &lt;/xdv:validate&gt;
              &lt;/field&gt;
              &lt;field var='mode' type='list-single' label='Wake-up mode:'&gt;
                  &lt;desc&gt;Type of wake-up call&lt;/desc&gt;
                  &lt;value&gt;Soft&lt;/value&gt;
                  &lt;option label='Soft'&gt;&lt;value&gt;Soft&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Normal'&gt;&lt;value&gt;Normal&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Harass'&gt;&lt;value&gt;Harass&lt;/value&gt;&lt;/option&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/getCommandParametersResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.6.4 <a name="sect-ID0E1IAG">Execute Parametrized Node Command</a></h3>
                <p class="" style="">
                    Executing a parametrized command is also done by sending the <span class="strong">executeNodeCommand</span> command to the concentrator, but including the edited form parameters,
                    as is shown in the following example:
                </p>
                <p class="caption"><a name="example-53"></a>Example 53. Execute Parametrized Node Command</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='46'&gt;
      &lt;executeNodeCommand xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='Apartment 1-1' command='scheduleWakeupCall' xml:lang='en'&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;E14E330F-8496-46F0-8F40-178808AB13A7&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='time' type='text-single'&gt;
                  &lt;value&gt;04:30:00&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='mode' type='list-single'&gt;
                  &lt;value&gt;Harass&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/executeNodeCommand&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='46'&gt;
      &lt;executeNodeCommandResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.6.5 <a name="sect-ID0EJJAG">Execute Node Command, Failure</a></h3>
                <p class="" style="">
                    If an error occurs during the execution of a command or if the server rejects the execution of a command, the server returns a response code different from
                    <span class="strong">OK</span>. If the response code is <span class="strong">FormError</span>, the server maintains any parameter form resources related to the form, and features such as
                    dynamic validation of the contents of the form will still be available until the parameters have been successfully set, the operation has been
                    explicitly cancelled or a form session time-out has occurred. See <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms</a>
                    <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms.html</a> for more information.
                </p>
                <p class="caption"><a name="example-54"></a>Example 54. Execute Node Command, Failure</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='47'&gt;
      &lt;executeNodeCommand xmlns='urn:xmpp:sn:concentrators' sourceId='MeteringGroups' nodeId='Apartment 1-1' command='scheduleWakeupCall' xml:lang='en'&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;E14E330F-8496-46F0-8F40-178808AB13A7&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='time' type='text-single'&gt;
                  &lt;value&gt;04:30:00&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='mode' type='list-single'&gt;
                  &lt;value&gt;Harass&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/executeNodeCommand&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='47'&gt;
      &lt;executeNodeCommandResponse xmlns='urn:xmpp:sn:concentrators' result='FormError'&gt;
          &lt;error var='mode'&gt;You are not allowed to harass people at 04:30:00!&lt;/error&gt;
      &lt;/executeNodeCommandResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.6.6 <a name="sect-ID0EAKAG">Get Common Commands for Nodes</a></h3>
                <p class="" style="">
                    Using the command <span class="strong">getCommonNodeCommands</span>, the client can receive commands that are common for a set of nodes,
                    as is shown in the following example:
                </p>
                <p class="caption"><a name="example-55"></a>Example 55. Get Common Commands for Nodes</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='48'&gt;
      &lt;getCommonNodeCommands xmlns='urn:xmpp:sn:concentrators' xml:lang='en'&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-1'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-2'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-3'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-4'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-5'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-6'/&gt;
      &lt;/getCommonNodeCommands&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='48'&gt;
      &lt;getNodeCommandsResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;command id='knockDoor' name='Knock on door' type='Simple' 
                   confirmationString='Are you sure you want to knock on the door?'
                   failureString='Unable to knock on the dorr.'
                   successString='Door knocked.'/&gt;
          &lt;command id='scheduleWakeupCall' name='Schedule wakeup call' type='Parametrized' 
                   failureString='Unable to schedule the wakeup call.'
                   successString='Wakeup call scheduled.'/&gt;
      &lt;/getNodeCommandsResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.6.7 <a name="sect-ID0EPKAG">Execute Simple Command on multiple nodes</a></h3>
                <p class="" style="">
                    Executing a simple command on multiple nodes is done by sending the <span class="strong">executeCommonNodeCommand</span> command to the concentrator,
                    as is shown in the following example:
                </p>
                <p class="caption"><a name="example-56"></a>Example 56. Execute Simple Command on multiple nodes</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='49'&gt;
      &lt;executeCommonNodeCommand xmlns='urn:xmpp:sn:concentrators' command='knockDoor'&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-1'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-2'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-3'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-4'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-5'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-6'/&gt;
      &lt;/executeCommonNodeCommand&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='49'&gt;
      &lt;executeCommonNodeCommandResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.6.8 <a name="sect-ID0E5KAG">Get Common Command Parameters from command on multiple nodes</a></h3>
                <p class="" style="">
                    To execute a parametrized command on a set of nodes, the client first needs to get (and edit) a set of parameters for the common command. Getting a set of parameters for a
                    common parametrized command is done as follows:
                </p>
                <p class="caption"><a name="example-57"></a>Example 57. Get Common Command Parameters from command on multiple nodes</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='get'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='50'&gt;
      &lt;getCommonCommandParameters xmlns='urn:xmpp:sn:concentrators' command='scheduleWakeupCall'&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-1'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-2'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-3'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-4'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-5'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-6'/&gt;
      &lt;/getCommonCommandParameters&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='50'&gt;
      &lt;getCommonCommandParametersResponse xmlns='urn:xmpp:sn:concentrators' result='OK'&gt;
          &lt;x type='form' 
             xmlns='jabber:x:data' 
             xmlns:xdv='http://jabber.org/protocol/xdata-validate'
             xmlns:xdl:='http://jabber.org/protocol/xdata-layout'
             xmlns:xdd:='http://jabber.org/protocol/xdata-dynamic'&gt;
              &lt;title&gt;Schedule wake-up call&lt;/title&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;E14E330F-8496-46F0-8F40-178808AB13A7&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='time' type='text-single' label='Time:'&gt;
                  &lt;desc&gt;Time of the wake-up call.&lt;/desc&gt;
                  &lt;required/&gt;
                  &lt;value&gt;&lt;/value&gt;
                  &lt;xdv:validate datatype='xs:time'/&gt;
                      &lt;xdv:basic/&gt;
                  &lt;/xdv:validate&gt;
              &lt;/field&gt;
              &lt;field var='mode' type='list-single' label='Wake-up mode:'&gt;
                  &lt;desc&gt;Type of wake-up call&lt;/desc&gt;
                  &lt;value&gt;Soft&lt;/value&gt;
                  &lt;option label='Soft'&gt;&lt;value&gt;Soft&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Normal'&gt;&lt;value&gt;Normal&lt;/value&gt;&lt;/option&gt;
                  &lt;option label='Harass'&gt;&lt;value&gt;Harass&lt;/value&gt;&lt;/option&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/getCommandParametersResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.6.9 <a name="sect-ID0EKLAG">Execute Common Parametrized Command on multiple nodes</a></h3>
                <p class="" style="">
                    Executing a common parametrized command is also done by sending the <span class="strong">executeCommonNodeCommand</span> command to the concentrator, but including the edited form parameters,
                    as is shown in the following example:
                </p>
                <p class="caption"><a name="example-58"></a>Example 58. Execute Common Parametrized Command on multiple nodes</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='51'&gt;
      &lt;executeCommonNodeCommand xmlns='urn:xmpp:sn:concentrators' command='scheduleWakeupCall' xml:lang='en'&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-1'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-2'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-3'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-4'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-5'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-6'/&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;E14E330F-8496-46F0-8F40-178808AB13A7&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='time' type='text-single'&gt;
                  &lt;value&gt;04:30:00&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='mode' type='list-single'&gt;
                  &lt;value&gt;Harass&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/executeCommonNodeCommand&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='51'&gt;
      &lt;executeCommonNodeCommandResponse xmlns='urn:xmpp:sn:concentrators' result='OK'/&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
            <div class="indent">
        <h3>3.6.10 <a name="sect-ID0EZLAG">Execute Parametrized Command on multiple Nodes, Failure</a></h3>
                <p class="" style="">
                    If an error occurs during the execution of a common command or if the server rejects the execution of a common command, the server returns a response code different from
                    <span class="strong">OK</span>. If the response code is <span class="strong">FormError</span>, the server maintains any parameter form resources related to the form, and features such as
                    dynamic validation of the contents of the form will still be available until the parameters have been successfully set, the operation has been
                    explicitly cancelled or a form session time-out has occurred. See <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms</a>
                    <a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms.html</a> for more information.
                </p>
                <p class="caption"><a name="example-59"></a>Example 59. Execute Parametrized Command on multiple Nodes, Failure</p>
        <div class="indent">
          <pre class="prettyprint">
                    
   &lt;iq type='set'
       from='client@clayster.com'
       to='concentrator@clayster.com'
       id='52'&gt;
      &lt;executeCommonNodeCommand xmlns='urn:xmpp:sn:concentrators' command='scheduleWakeupCall' xml:lang='en'&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-1'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-2'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-3'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-4'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-5'/&gt;
          &lt;node sourceId='MeteringGroups' nodeId='Apartment 1-6'/&gt;
          &lt;x type='submit' xmlns='jabber:x:data'&gt;
              &lt;field var='xdd session' type='hidden'&gt;
                  &lt;value&gt;E14E330F-8496-46F0-8F40-178808AB13A7&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='time' type='text-single'&gt;
                  &lt;value&gt;04:30:00&lt;/value&gt;
              &lt;/field&gt;
              &lt;field var='mode' type='list-single'&gt;
                  &lt;value&gt;Harass&lt;/value&gt;
              &lt;/field&gt;
          &lt;/x&gt;
      &lt;/executeCommonNodeCommand&gt;
   &lt;/iq&gt;
   
   &lt;iq type='result'
       from='concentrator@clayster.com'
       to='client@clayster.com'
       id='52'&gt;
      &lt;executeCommonNodeCommandResponse xmlns='urn:xmpp:sn:concentrators' result='FormError'&gt;
          &lt;error var='mode'&gt;You are not allowed to harass people at 04:30:00!&lt;/error&gt;
      &lt;/executeCommonNodeCommandResponse&gt;
   &lt;/iq&gt;
                </pre>
        </div>
            </div>
        </div>
        <div class="indent">
      <h3>3.7 <a name="sourceevents">Data Source Events</a></h3>
            
        </div>
        <div class="indent">
      <h3>3.8 <a name="sect-ID0EYMAG">Data Sets</a></h3>
            
        </div>
    <h2>4.
       <a name="impl">Implementation Notes</a></h2>
        <div class="indent">
      <h3>4.1 <a name="nodeinfo">Node Information</a></h3>
            <p class="" style="">
                Several commands return basic node information. The following table lists possible fields with corresponding descriptions.
            </p>
            
            <div class="indent">
        <p class="caption"><a name="table-5"></a>Table 5: Basic Node Information</p>
        <table border="1" cellpadding="3" cellspacing="0">
                <tr class="body">
                    <th colspan="" rowspan="">Attribute</th>
                    <th colspan="" rowspan="">Use</th>
                    <th colspan="" rowspan="">Default</th>
                    <th colspan="" rowspan="">Description</th>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">id</td>
                    <td colspan="" rowspan="">required</td>
                    <td colspan="" rowspan=""> </td>
                    <td colspan="" rowspan="">The ID of the node in the data source.</td>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">displayName</td>
                    <td colspan="" rowspan="">optional</td>
                    <td colspan="" rowspan=""> </td>
                    <td colspan="" rowspan="">If provided, a string presentable to users. If localization is supported and a correct language attribute was provided, this string will be localized.</td>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">localId</td>
                    <td colspan="" rowspan="">optional</td>
                    <td colspan="" rowspan=""> </td>
                    <td colspan="" rowspan="">If provided, an ID for the node, but unique locally between siblings.</td>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">logId</td>
                    <td colspan="" rowspan="">optional</td>
                    <td colspan="" rowspan=""> </td>
                    <td colspan="" rowspan="">If provided, an ID for the node, as it would appear or be used in system logs.</td>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">cacheType</td>
                    <td colspan="" rowspan="">required</td>
                    <td colspan="" rowspan=""> </td>
                    <td colspan="" rowspan="">Used to uniquelly identify the node. If concentrators do not use this parameter, they can set this string to the empty string.</td>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">state</td>
                    <td colspan="" rowspan="">required</td>
                    <td colspan="" rowspan=""> </td>
                    <td colspan="" rowspan="">Current overall state of the node.</td>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">hasChildren</td>
                    <td colspan="" rowspan="">required</td>
                    <td colspan="" rowspan=""> </td>
                    <td colspan="" rowspan="">If the node has children or not.</td>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">isReadable</td>
                    <td colspan="" rowspan="">optional</td>
                    <td colspan="" rowspan="">false</td>
                    <td colspan="" rowspan="">If the node can be read. (*)</td>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">isConfigurable</td>
                    <td colspan="" rowspan="">optional</td>
                    <td colspan="" rowspan="">false</td>
                    <td colspan="" rowspan="">If the node can be configured. (**)</td>
                </tr>
                <tr class="body">
                    <td colspan="" rowspan="">hasCommands</td>
                    <td colspan="" rowspan="">optional</td>
                    <td colspan="" rowspan="">false</td>
                    <td colspan="" rowspan="">If the node has registered commands or not.</td>
                </tr>
            </table>
      </div>
            <p class="" style="">
                (*) See <a href="xep-0000-SN-SensorData.html">xep-0000-SN-SensorData</a> for more information about how to read nodes.
            </p>
            <p class="" style="">
                (**) See <a href="xep-0000-SN-Control.html">xep-0000-SN-Control</a> for more information about how to configure nodes.
            </p>
        </div>
        
        
        
        
        
    <h2>5.
       <a name="i18n">Internationalization Considerations</a></h2>
        <div class="indent">
      <h3>5.1 <a name="sect-ID0EDVAG">Localization</a></h3>
            <p class="" style="">
                Loalization of content can be performed if clients provide <span class="strong">xml:lang</span> attributes in commands made to the concentrator. If omitted, the
                <span class="strong">default language</span> will be used in responses. If provided, but the concentrator does not support localization, or the requested language,
                the <span class="strong">default language</span> will also be used.
            </p>
        </div>
        <div class="indent">
      <h3>5.2 <a name="sect-ID0ETVAG">Time Zones</a></h3>
            <p class="" style="">
                Concentrators of larger sub-systems spanning multiple time-zones should specify all timestamps with time-zone information, so readers can perform comparisons
                of time information.
            </p>
            <p class="" style="">
                Information read from a concentrator that lacks time-zone information should be considered to lie in the same time-zone as the reader, unless not explicitly
                configured with a time-zone.
            </p>
        </div>
        <div class="indent">
      <h3>5.3 <a name="sect-ID0EAWAG">Interoperability</a></h3>
            
        </div>
    <h2>6.
       <a name="security">Security Considerations</a></h2>
        <div class="indent">
      <h3>6.1 <a name="sect-ID0EMWAG">Access rights</a></h3>
            <p class="" style="">
                This document publishes a lot of commands with which to interact with a concentrator. If security and access rights is an issue, it might not be sufficient
                to allow all friends access to the system. There are many ways in which to restrict access to the contents of the concentrator. Following are some examples:
            </p>
            <ul class="" style="">
                <li class="" style="">
                    The concentrator can restrict friendships to trusted friends, and then assign access rights internally to the approved contacts.
                </li>
                <li class="" style="">
                    The concentrator can use a provisioning server (see <a href="xep-0000-SN-Provisioning.html">xep-0000-SN-Provisioning.html</a>) to delegate trust
                    to a third party responsible for controlling who can get access to the concentrator (<span class="strong">isFriend</span> or <span class="strong">canAccess</span> commands), 
                    and what items can be viewed (<span class="strong">hasPrivilege</span> or <span class="strong">downloadPrivileges</span> commands).
                </li>
                <li class="" style="">
                    All requests to the concentrator can contain the optional attributes <span class="strong">deviceToken</span>, <span class="strong">serviceToken</span> and <span class="strong">userToken</span>.
                    Clients making requests to the concentrator can use these attributes to forward information about who originated the action (<span class="strong">userToken</span>),
                    what service is performing the action (<span class="strong">serviceToken</span>) or what device is performing the action(<span class="strong">deviceToken</span>). The concentrator
                    can use this information to check with provisioning servers what access rights and user privileges exist before performing the action.
                </li>
            </ul>
        </div>
        <div class="indent">
      <h3>6.2 <a name="sect-ID0E6XAG">Restricting access to commands per contact</a></h3>
            
        </div>
        <div class="indent">
      <h3>6.3 <a name="sect-ID0EGYAG">Restricting access to node properties per contact</a></h3>
            
        </div>
        <div class="indent">
      <h3>6.4 <a name="sect-ID0ENYAG">Restricting access to node commands per contact</a></h3>
            
        </div>
    <h2>7.
       <a name="iana">IANA Considerations</a></h2>
        <p class="" style="">REQUIRED.</p>
    <h2>8.
       <a name="registrar">XMPP Registrar Considerations</a></h2>
        <p class="" style="">REQUIRED.</p>
    <h2>9.
       <a name="schema">XML Schema</a></h2>
        
        <p class="caption">
    </p>
    <div class="indent">
      <pre class="prettyprint">
            
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='urn:xmpp:sn:concentrators'
    xmlns='urn:xmpp:sn:concentrators'
    xmlns:sn='urn:xmpp:sn'
    xmlns:xd="jabber:x:data"
    xmlns:xdv="http://jabber.org/protocol/xdata-validate"
    xmlns:xdl="http://jabber.org/protocol/xdata-layout"
    elementFormDefault='qualified'&gt;
 
    &lt;xs:import namespace='urn:xmpp:sn'/&gt;
    &lt;xs:import namespace='jabber:x:data'/&gt;
    &lt;xs:import namespace='http://jabber.org/protocol/xdata-validate'/&gt;
    &lt;xs:import namespace='http://jabber.org/protocol/xdata-layout'/&gt;
 
    &lt;xs:element name='getCapabilities' type='TokenRequest'/&gt;
    &lt;xs:element name='getCapabilitiesResponse' type='StringArrayResponse'/&gt;
 
    &lt;xs:element name='getAllDataSources' type='TokenRequest'/&gt;
    &lt;xs:element name='getAllDataSourcesResponse' type='DataSourceArrayResponse'/&gt;
 
    &lt;xs:element name='getTopDataSources' type='TokenRequest'/&gt;
    &lt;xs:element name='getTopDataSourcesResponse' type='DataSourceArrayResponse'/&gt;
 
    &lt;xs:element name='getChildDataSources' type='SourceReferenceRequest'/&gt;
    &lt;xs:element name='getChildDataSourcesResponse' type='DataSourceArrayResponse'/&gt;
 
    &lt;xs:element name='containsNode' type='NodeReferenceRequest'/&gt;
    &lt;xs:element name='containsNodeResponse'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:simpleContent&gt;
                &lt;xs:extension base='xs:boolean'&gt;
                    &lt;xs:attributeGroup ref='responseCode'/&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:simpleContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
 
    &lt;xs:element name='containsNodes' type='NodeReferencesRequest'/&gt;
    &lt;xs:element name='containsNodesResponse' type='BooleanArrayResponse'/&gt;
 
    &lt;xs:element name='getNode' type='NodeReferenceParametersRequest'/&gt;
    &lt;xs:element name='getNodeResponse'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:complexContent&gt;
                &lt;xs:extension base='NodeInformation'&gt;
                    &lt;xs:attributeGroup ref='responseCode'/&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:complexContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
 
    &lt;xs:element name='getNodes' type='NodeReferenceParametersRequest'/&gt;
    &lt;xs:element name='getNodesResponse' type='NodeInformationArrayResponse'/&gt;
 
    &lt;xs:element name='getAllNodes' type='SourceReferenceParametersRequest'/&gt;
    &lt;xs:element name='getAllNodesResponse' type='NodeInformationArrayResponse'/&gt;
 
    &lt;xs:element name='getNodeInheritence' type='NodeReferenceRequest'/&gt;
    &lt;xs:element name='getNodeInheritenceResponse'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:sequence&gt;
                &lt;xs:element name='baseClasses' type='StringArray' minOccurs='1' maxOccurs='1'/&gt;
                &lt;xs:element name='interfaces' type='StringArray' minOccurs='0' maxOccurs='1'/&gt;
            &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
 
    &lt;xs:element name='getRootNodes' type='SourceReferenceParametersRequest'/&gt;
    &lt;xs:element name='getRootNodesResponse' type='NodeInformationArrayResponse'/&gt;
 
    &lt;xs:element name='getChildNodes' type='NodeReferenceParametersRequest'/&gt;
    &lt;xs:element name='getChildNodesResponse' type='NodeInformationArrayResponse'/&gt;
 
    &lt;xs:element name='getIndices' type='SourceReferenceRequest'/&gt;
    &lt;xs:element name='getIndicesResponse' type='StringArrayResponse'/&gt;
 
    &lt;xs:element name='getNodesFromIndex' type='IndexReferenceRequest'/&gt;
    &lt;xs:element name='getNodesFromIndexResponse' type='NodeInformationArrayResponse'/&gt;
 
    &lt;xs:element name='getNodesFromIndices' type='IndexReferencesRequest'/&gt;
    &lt;xs:element name='getNodesFromIndicesResponse' type='NodeInformationArrayResponse'/&gt;
 
    &lt;xs:element name='getAllIndexValues'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:complexContent&gt;
                &lt;xs:extension base='SourceReferenceRequest'&gt;
                    &lt;xs:attribute name='index' type='xs:string' use='required'/&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:complexContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:element name='getAllIndexValuesResponse' type='StringArrayResponse'/&gt;
 
    &lt;xs:element name='getNodeParametersForEdit' type='NodeReferenceRequest'/&gt;
    &lt;xs:element name='getNodeParametersForEditResponse' type='ParameterFormResponse'/&gt;
 
    &lt;xs:element name='setNodeParametersAfterEdit'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:complexContent&gt;
                &lt;xs:extension base='NodeReferenceRequest'&gt;
                    &lt;xs:sequence&gt;
                        &lt;xs:any minOccurs="1" maxOccurs="1" namespace="jabber:x:data"/&gt;
                    &lt;/xs:sequence&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:complexContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:element name='setNodeParametersAfterEditResponse' type='SetNodeParametersResponse'/&gt;
 
    &lt;xs:element name='getCommonNodeParametersForEdit' type='NodeReferencesRequest'/&gt;
    &lt;xs:element name='getCommonNodeParametersForEditResponse' type='ParameterFormResponse'/&gt;
 
    &lt;xs:element name='setCommonNodeParametersAfterEdit'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:complexContent&gt;
                &lt;xs:extension base='NodeReferencesRequest'&gt;
                    &lt;xs:sequence&gt;
                        &lt;xs:any minOccurs="1" maxOccurs="1" namespace="jabber:x:data"/&gt;
                    &lt;/xs:sequence&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:complexContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:element name='setCommonNodeParametersAfterEditResponse' type='SetNodeParametersResponse'/&gt;
 
    &lt;xs:element name='getAddableNodeTypes' type='NodeReferenceRequest'/&gt;
    &lt;xs:element name='getAddableNodeTypesResponse'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
                &lt;xs:element name='nodeType'&gt;
                    &lt;xs:complexType&gt;
                        &lt;xs:attribute name='type' type='xs:string' use='required'/&gt;
                        &lt;xs:attribute name='name' type='xs:string' use='required'/&gt;
                    &lt;/xs:complexType&gt;
                &lt;/xs:element&gt;
            &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
 
    &lt;xs:element name='getParametersForNewNode' type='NodeTypeReferenceRequest'/&gt;
    &lt;xs:element name='getParametersForNewNodeResponse' type='ParameterFormResponse'/&gt;
 
    &lt;xs:element name='createNewNode'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:complexContent&gt;
                &lt;xs:extension base='NodeTypeReferenceRequest'&gt;
                    &lt;xs:sequence&gt;
                        &lt;xs:any minOccurs="1" maxOccurs="1" namespace="jabber:x:data"/&gt;
                    &lt;/xs:sequence&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:complexContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:element name='createNewNodeResponse' type='SetNodeParametersResponse'/&gt;
 
    &lt;xs:element name='destroyNode' type='NodeReferenceRequest'/&gt;
    &lt;xs:element name='destroyNodeResponse'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:attributeGroup ref='responseCode'/&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
 
    &lt;xs:element name='getAncestors' type='NodeReferenceParametersRequest'/&gt;
    &lt;xs:element name='getAncestorsResponse' type='NodeInformationArrayResponse'/&gt;
 
    &lt;xs:element name='getNodeCommands' type='NodeReferenceRequest'/&gt;
    &lt;xs:element name='getNodeCommandsResponse' type='CommandArray'/&gt;
 
    &lt;xs:element name='getCommandParameters' type='NodeCommandReferenceRequest'/&gt;
    &lt;xs:element name='getCommandParametersResponse' type='ParameterFormResponse'/&gt;
 
    &lt;xs:element name='executeNodeCommand'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:complexContent&gt;
                &lt;xs:extension base='NodeCommandReferenceRequest'&gt;
                    &lt;xs:sequence&gt;
                        &lt;xs:any minOccurs="0" maxOccurs="1" namespace="jabber:x:data"/&gt;
                    &lt;/xs:sequence&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:complexContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:element name='executeNodeCommandResponse' type='ExecuteNodeCommandResponse'/&gt;
 
    &lt;xs:element name='getCommonNodeCommands' type='NodeReferencesRequest'/&gt;
    &lt;xs:element name='getCommonNodeCommandsResponse' type='CommandArray'/&gt;
     
    &lt;xs:element name='getCommonCommandParameters'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:complexContent&gt;
                &lt;xs:extension base='NodeReferencesRequest'&gt;
                    &lt;xs:attribute name='command' type='xs:string' use='required'/&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:complexContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:element name='getCommonCommandParametersResponse' type='ParameterFormResponse'/&gt;
 
    &lt;xs:element name='executeCommonNodeCommand'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:complexContent&gt;
                &lt;xs:extension base='NodeReferencesRequest'&gt;
                    &lt;xs:sequence&gt;
                        &lt;xs:any minOccurs="0" maxOccurs="1" namespace="jabber:x:data"/&gt;
                    &lt;/xs:sequence&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:complexContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:element name='executeCommonNodeCommandResponse' type='ExecuteNodeCommandResponse'/&gt;
 
    &lt;xs:element name='moveNodeUp' type='NodeReferenceRequest'/&gt;
    &lt;xs:element name='moveNodeUpResponse' type='Response'/&gt;
 
    &lt;xs:element name='moveNodeDown' type='NodeReferenceRequest'/&gt;
    &lt;xs:element name='moveNodeDownResponse' type='Response'/&gt;
 
    &lt;xs:element name='moveNodesUp' type='NodeReferencesRequest'/&gt;
    &lt;xs:element name='moveNodesUpResponse' type='Response'/&gt;
 
    &lt;xs:element name='moveNodesDown' type='NodeReferencesRequest'/&gt;
    &lt;xs:element name='moveNodesDownResponse' type='Response'/&gt;
 
    &lt;xs:element name='subscribe'&gt;
        &lt;xs:complexType&gt;
            &lt;xs:complexContent&gt;
                &lt;xs:extension base='SourceReferenceRequest'&gt;
                    &lt;xs:attribute name='getEventsSince' type='xs:dateTime' use='optional'/&gt;
                &lt;/xs:extension&gt;
            &lt;/xs:complexContent&gt;
        &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;
    &lt;xs:element name='subscribeResponse' type='Response'/&gt;
 
    &lt;xs:element name='unsubscribe' type='SourceReferenceRequest'/&gt;
    &lt;xs:element name='unsubscribeResponse' type='Response'/&gt;
 
    &lt;xs:simpleType name='ResponseCode'&gt;
        &lt;xs:restriction base='xs:string'&gt;
            &lt;xs:enumeration value='OK'/&gt;
            &lt;xs:enumeration value='NotFound'/&gt;
            &lt;xs:enumeration value='InsufficientPrivileges'/&gt;
            &lt;xs:enumeration value='Locked'/&gt;
            &lt;xs:enumeration value='NotImplemented'/&gt;
            &lt;xs:enumeration value='FormError'/&gt;
            &lt;xs:enumeration value='OtherError'/&gt;
        &lt;/xs:restriction&gt;
    &lt;/xs:simpleType&gt;
 
    &lt;xs:simpleType name='Color'&gt;
        &lt;xs:restriction base='xs:string'&gt;
            &lt;xs:pattern value='^[0-9a-fA-F]{6}$'/&gt;
        &lt;/xs:restriction&gt;
    &lt;/xs:simpleType&gt;
 
    &lt;xs:simpleType name='NodeState'&gt;
        &lt;xs:restriction base='xs:string'&gt;
            &lt;xs:enumeration value='None'/&gt;
            &lt;xs:enumeration value='Information'/&gt;
            &lt;xs:enumeration value='WarningSigned'/&gt;
            &lt;xs:enumeration value='WarningUnsigned'/&gt;
            &lt;xs:enumeration value='ErrorSigned'/&gt;
            &lt;xs:enumeration value='ErrorUnsigned'/&gt;
        &lt;/xs:restriction&gt;
    &lt;/xs:simpleType&gt;
 
    &lt;xs:simpleType name='MessageType'&gt;
        &lt;xs:restriction base='xs:string'&gt;
            &lt;xs:enumeration value='Error'/&gt;
            &lt;xs:enumeration value='Warning'/&gt;
            &lt;xs:enumeration value='Information'/&gt;
        &lt;/xs:restriction&gt;
    &lt;/xs:simpleType&gt;
 
    &lt;xs:simpleType name='CommandType'&gt;
        &lt;xs:restriction base='xs:string'&gt;
            &lt;xs:enumeration value='Simple'/&gt;
            &lt;xs:enumeration value='Parametrized'/&gt;
        &lt;/xs:restriction&gt;
    &lt;/xs:simpleType&gt;
 
    &lt;xs:attributeGroup name='tokens'&gt;
        &lt;xs:attribute name='deviceToken' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='serviceToken' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='userToken' type='xs:string' use='optional'/&gt;
    &lt;/xs:attributeGroup&gt;
 
    &lt;xs:attributeGroup name='sourceReference'&gt;
        &lt;xs:attribute name='sourceId' type='xs:string' use='required'/&gt;
    &lt;/xs:attributeGroup&gt;
 
    &lt;xs:attributeGroup name='nodeReference'&gt;
        &lt;xs:attributeGroup ref='sourceReference'/&gt;
        &lt;xs:attribute name='nodeId' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='cacheType' type='xs:string' use='optional'/&gt;
    &lt;/xs:attributeGroup&gt;
 
    &lt;xs:attributeGroup name='parametersAndMessages'&gt;
        &lt;xs:attribute name='parameters' type='xs:boolean' use='optional' default='false'/&gt;
        &lt;xs:attribute name='messages' type='xs:boolean' use='optional' default='false'/&gt;
    &lt;/xs:attributeGroup&gt;
 
    &lt;xs:attributeGroup name='indexReference'&gt;
        &lt;xs:attributeGroup ref='sourceReference'/&gt;
        &lt;xs:attribute name='index' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='indexValue' type='xs:string' use='required'/&gt;
    &lt;/xs:attributeGroup&gt;
 
    &lt;xs:attributeGroup name='responseCode'&gt;
        &lt;xs:attribute name='result' type='ResponseCode' use='required'/&gt;
    &lt;/xs:attributeGroup&gt;
 
    &lt;xs:complexType name='Response'&gt;
        &lt;xs:attributeGroup ref='responseCode'/&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='TokenRequest'&gt;
        &lt;xs:attributeGroup ref='tokens'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='SourceReferenceRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='TokenRequest'&gt;
                &lt;xs:attributeGroup ref='sourceReference'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='DataSource'&gt;
        &lt;xs:attribute name='id' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='name' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='hasChildren' type='xs:boolean' use='optional' default='false'/&gt;
        &lt;xs:attribute name='lastChanged' type='xs:dateTime' use='optional'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='DataSourceArrayResponse'&gt;
        &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
            &lt;xs:element name='dataSource' type='DataSource'/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attributeGroup ref='responseCode'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='NodeReferenceRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='TokenRequest'&gt;
                &lt;xs:attributeGroup ref='nodeReference'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='NodeReference'&gt;
        &lt;xs:attributeGroup ref='nodeReference'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='NodeReferencesRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='TokenRequest'&gt;
                &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
                    &lt;xs:element name='node' type='NodeReference'/&gt;
                &lt;/xs:sequence&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='NodeReferenceParametersRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='NodeReferenceRequest'&gt;
                &lt;xs:attributeGroup ref='parametersAndMessages'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='SourceReferenceParametersRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='SourceReferenceRequest'&gt;
                &lt;xs:attributeGroup ref='parametersAndMessages'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='GetAllNodesRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='SourceReferenceRequest'&gt;
                &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
                    &lt;xs:element name='onlyIfDerivedFrom' type='xs:string'/&gt;
                &lt;/xs:sequence&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='GetChildNodesRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='NodeReferenceRequest'&gt;
                &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
                    &lt;xs:element name='sortOrder' type='SortOrder'/&gt;
                &lt;/xs:sequence&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='SortOrder'&gt;
        &lt;xs:attribute name='parameterName' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='ascending' type='xs:boolean' use='optional' default='true'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='NodeInformation'&gt;
        &lt;xs:choice minOccurs='0' maxOccurs='unbounded'&gt;
            &lt;xs:element name='boolean' type='BooleanParameter'/&gt;
            &lt;xs:element name='color' type='ColorParameter'/&gt;
            &lt;xs:element name='dateTime' type='DateTimeParameter'/&gt;
            &lt;xs:element name='double' type='DoubleParameter'/&gt;
            &lt;xs:element name='duration' type='DurationParameter'/&gt;
            &lt;xs:element name='int' type='IntParameter'/&gt;
            &lt;xs:element name='long' type='LongParameter'/&gt;
            &lt;xs:element name='string' type='StringParameter'/&gt;
            &lt;xs:element name='time' type='TimeParameter'/&gt;
            &lt;xs:element name='message' type='Message'/&gt;
        &lt;/xs:choice&gt;
        &lt;xs:attribute name='id' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='displayName' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='nodeType' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='localId' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='logId' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='cacheType' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='state' type='NodeState' use='required'/&gt;
        &lt;xs:attribute name='hasChildren' type='xs:boolean' use='required'/&gt;
        &lt;xs:attribute name='isReadable' type='xs:boolean' use='optional' default='false'/&gt;
        &lt;xs:attribute name='isConfigurable' type='xs:boolean' use='optional' default='false'/&gt;
        &lt;xs:attribute name='hasCommands' type='xs:boolean' use='optional' default='false'/&gt;
        &lt;xs:attribute name='parentId' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='parentCacheType' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='lastChanged' type='xs:dateTime' use='optional'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='Parameter' abstract='true'&gt;
        &lt;xs:attribute name='id' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='name' type='xs:string' use='required'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='BooleanParameter'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='Parameter'&gt;
                &lt;xs:attribute name='value' type='xs:boolean' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='ColorParameter'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='Parameter'&gt;
                &lt;xs:attribute name='value' type='Color' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='DateTimeParameter'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='Parameter'&gt;
                &lt;xs:attribute name='value' type='xs:dateTime' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='DoubleParameter'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='Parameter'&gt;
                &lt;xs:attribute name='value' type='xs:double' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='DurationParameter'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='Parameter'&gt;
                &lt;xs:attribute name='value' type='xs:duration' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='IntParameter'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='Parameter'&gt;
                &lt;xs:attribute name='value' type='xs:int' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='LongParameter'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='Parameter'&gt;
                &lt;xs:attribute name='value' type='xs:long' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='StringParameter'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='Parameter'&gt;
                &lt;xs:attribute name='value' type='xs:string' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='TimeParameter'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='Parameter'&gt;
                &lt;xs:attribute name='value' type='xs:time' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='Message'&gt;
        &lt;xs:simpleContent&gt;
            &lt;xs:extension base='xs:string'&gt;
                &lt;xs:attribute name='timestamp' type='xs:dateTime' use='required'/&gt;
                &lt;xs:attribute name='type' type='MessageType' use='required'/&gt;
                &lt;xs:attribute name='id' type='xs:string' use='optional'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='NodeInformationArrayResponse'&gt;
        &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
            &lt;xs:element name='node' type='NodeInformation'/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attributeGroup ref='responseCode'/&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='StringArray'&gt;
        &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
            &lt;xs:element name='value' type='xs:string'/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='StringArrayResponse'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='StringArray'&gt;
                &lt;xs:attributeGroup ref='responseCode'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='BooleanArrayResponse'&gt;
        &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
            &lt;xs:element name='value' type='xs:boolean'/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attributeGroup ref='responseCode'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='IndexReferenceRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='TokenRequest'&gt;
                &lt;xs:attributeGroup ref='indexReference'/&gt;
                &lt;xs:attributeGroup ref='parametersAndMessages'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='IndexReference'&gt;
        &lt;xs:attributeGroup ref='indexReference'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='IndexReferencesRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='TokenRequest'&gt;
                &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
                    &lt;xs:element name='indexRef' type='IndexReference'/&gt;
                &lt;/xs:sequence&gt;
                &lt;xs:attributeGroup ref='parametersAndMessages'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='SetNodeParametersResponse'&gt;
        &lt;xs:choice minOccurs='1' maxOccurs='1'&gt;
            &lt;xs:element name='error' type='ParameterError' minOccurs='1' maxOccurs='unbounded'/&gt;
            &lt;xs:element name='node' type='NodeInformation' minOccurs='1' maxOccurs='unbounded'/&gt;
        &lt;/xs:choice&gt;
        &lt;xs:attributeGroup ref='responseCode'/&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='ParameterFormResponse'&gt;
        &lt;xs:sequence&gt;
            &lt;xs:any minOccurs="1" maxOccurs="1" namespace="jabber:x:data"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attributeGroup ref="responseCode"/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='NodeTypeReferenceRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='NodeReferenceRequest'&gt;
                &lt;xs:attribute name='type' type='xs:string' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='Command'&gt;
        &lt;xs:attribute name='id' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='name' type='xs:string' use='required'/&gt;
        &lt;xs:attribute name='type' type='CommandType' use='required'/&gt;
        &lt;xs:attribute name='sortCategory' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='sortKey' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='confirmationString' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='failureString' type='xs:string' use='optional'/&gt;
        &lt;xs:attribute name='successString' type='xs:string' use='optional'/&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='CommandArray'&gt;
        &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
            &lt;xs:element name='command' type='Command'/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  
    &lt;xs:complexType name='NodeCommandReferenceRequest'&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base='NodeReferenceRequest'&gt;
                &lt;xs:attribute name='command' type='xs:string' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='ExecuteNodeCommandResponse'&gt;
        &lt;xs:sequence minOccurs='0' maxOccurs='unbounded'&gt;
            &lt;xs:element name='error' type='ParameterError'/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attributeGroup ref='responseCode'/&gt;
    &lt;/xs:complexType&gt;
 
    &lt;xs:complexType name='ParameterError'&gt;
        &lt;xs:simpleContent&gt;
            &lt;xs:extension base='xs:string'&gt;
                &lt;xs:attribute name='var' type='xs:string' use='required'/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
 
&lt;/xs:schema&gt;
        </pre>
    </div>
    <hr><a name="appendices"></a><h2>Appendices</h2>
    <hr><a name="appendix-docinfo"></a><h3>Appendix A: Document Information</h3>
    <p class="indent">
            Series: <a href="http://xmpp.org/extensions/">XEP</a><br>
            Number: xxxx<br>
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br>
            Status: 
            <a href="http://xmpp.org/extensions/xep-0001.html#states-ProtoXEP">ProtoXEP</a><br>
            Type:
            <a href="http://xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards Track</a><br>
            Version: 0.0.1<br>
            Last Updated: 2013-03-20<br>
                Approving Body: <a href="http://xmpp.org/council/">XMPP Council</a><br>Dependencies: XMPP Core, XEP-0001, XEP-0004, XEP-0030, XEP-0122, XEP-0137, XEP-0141, xep-0000-SN-SensorData, xep-0000-SN-Provisioning, xep-0000-DynamicForms<br>
                Supersedes: None<br>
                Superseded By: None<br>
            Short Name: NOT_YET_ASSIGNED<br>
            This document in other formats: 
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-xxxx.xml">XML</a> 
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-xxxx.pdf">PDF</a></p>
    <hr><a name="appendix-authorinfo"></a><h3>Appendix B: Author Information</h3>
    <div class="indent">
      <h3>Peter Waher</h3>
      <p class="indent">
        Email:
        <a href="mailto:peter.waher@clayster.com">peter.waher@clayster.com</a><br>
        JabberID: 
        <a href="xmpp:peter.waher@jabber.org">peter.waher@jabber.org</a><br>
        URI: 
        <a href="http://se.linkedin.com/pub/peter-waher/1a/71b/a29/">http://se.linkedin.com/pub/peter-waher/1a/71b/a29/</a><br></p>
    </div>
    <hr><a name="appendix-legal"></a><h3>Appendix C: Legal Notices</h3>
    <div class="indent">
      <h4>Copyright</h4>This XMPP Extension Protocol is copyright (c) 1999 - 2013 by the XMPP Standards Foundation (XSF).<h4>Permissions</h4>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h4>Disclaimer of Warranty</h4><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. In no event shall the XMPP Standards Foundation or the authors of this Specification be liable for any claim, damages, or other liability, whether in an action of contract, tort, or otherwise, arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification. ##</span><h4>Limitation of Liability</h4>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising out of the use or inability to use the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h4>IPR Conformance</h4>
                This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which may be found at &lt;<a href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt; or obtained by writing to XSF, P.O. Box 1641, Denver, CO 80201 USA).
            </div>
    <hr><a name="appendix-xmpp"></a><h3>Appendix D: Relation to XMPP</h3>
    <p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 6120) and XMPP IM (RFC 6121) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p>
    <hr><a name="appendix-discuss"></a><h3>Appendix E: Discussion Venue</h3>
    <p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p>
    <p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p>
    <p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p>
    <hr><a name="appendix-conformance"></a><h3>Appendix F: Requirements Conformance</h3>
    <p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p>
    <hr><a name="appendix-notes"></a><h3>Appendix G: Notes</h3>
    <div class="indent">
      <p><a name="nt-ID0E2E">1</a>. XEP-0060: Publish-Subscribe &lt;<a href="http://xmpp.org/extensions/xep-0060.html">http://xmpp.org/extensions/xep-0060.html</a>&gt;.</p>
      <p><a name="nt-ID0EMF">2</a>. XEP-0248: PubSub Collection Nodes &lt;<a href="http://xmpp.org/extensions/xep-0248.html">http://xmpp.org/extensions/xep-0248.html</a>&gt;.</p>
      <p><a name="nt-ID0E2H">3</a>. XEP-0050: Ad-Hoc Commands &lt;<a href="http://xmpp.org/extensions/xep-0050.html">http://xmpp.org/extensions/xep-0050.html</a>&gt;.</p>
      <p><a name="nt-ID0ECCAC">4</a>. XEP-0004: Data Forms &lt;<a href="http://xmpp.org/extensions/xep-0004.html">http://xmpp.org/extensions/xep-0004.html</a>&gt;.</p>
      <p><a name="nt-ID0EOCAC">5</a>. XEP-0122: Data Forms Validation &lt;<a href="http://xmpp.org/extensions/xep-0122.html">http://xmpp.org/extensions/xep-0122.html</a>&gt;.</p>
      <p><a name="nt-ID0E1CAC">6</a>. XEP-0137: Publishing Stream Initiation Requests &lt;<a href="http://xmpp.org/extensions/xep-0137.html">http://xmpp.org/extensions/xep-0137.html</a>&gt;.</p>
      <p><a name="nt-ID0EGDAC">7</a>. XEP-0141: Data Forms Layout &lt;<a href="http://xmpp.org/extensions/xep-0141.html">http://xmpp.org/extensions/xep-0141.html</a>&gt;.</p>
      <p><a name="nt-ID0ERZAE">8</a>. 
                        XEP-xxxx: Dynamic Data Forms &lt;<a href="xep-0000-DynamicForms.html">xep-0000-DynamicForms.html</a>&gt;
                    </p>
    </div>
    <hr><a name="appendix-revs"></a><h3>Appendix H: Revision History</h3>
    <p>Note: Older versions of this specification might be available at <a href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a></p>
    <div class="indent">
      <h4>Version 0.0.1 (2013-03-20)</h4>
      <div class="indent">
                <p class="" style="">First draft.</p>
             (pwa)
    </div>
    </div>
    <hr>
    <p>END</p>
  </body>
</html>