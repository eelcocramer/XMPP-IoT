<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>XEP-xxxx: Tables in Instant Messaging</title>
    <link rel="stylesheet" type="text/css" href="xmpp.css">
    <link href="prettify.css" type="text/css" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico"><script type="text/javascript" src="prettify.js"></script><meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=2.0">
    <meta name="DC.Title" content="Tables in Instant Messaging">
    <meta name="DC.Creator" content="Peter Waher">
    <meta name="DC.Description" content="This specification provides a means to send tables between instant messaging clients, or between robots and instant messaging clients.">
    <meta name="DC.Publisher" content="XMPP Standards Foundation">
    <meta name="DC.Contributor" content="XMPP Extensions Editor">
    <meta name="DC.Date" content="2013-12-11">
    <meta name="DC.Type" content="XMPP Extension Protocol">
    <meta name="DC.Format" content="XHTML">
    <meta name="DC.Identifier" content="XEP-xxxx">
    <meta name="DC.Language" content="en">
    <meta name="DC.Rights" content="This XMPP Extension Protocol is copyright © 1999 - 2013 by the XMPP Standards Foundation (XSF).">
  </head>
  <body onload="prettyPrint()">
    <h1>XEP-xxxx: Tables in Instant Messaging</h1>
    <table>
      <tr valign="top">
        <td><strong>Abstract:</strong></td>
        <td>This specification provides a means to send tables between instant messaging clients, or between robots and instant messaging clients.</td>
      </tr>
      <tr valign="top">
        <td><strong>Author:</strong></td>
        <td>Peter Waher</td>
      </tr>
      <tr valign="top">
        <td><strong>Copyright:</strong></td>
        <td>© 1999 - 2013 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</td>
      </tr>
      <tr valign="top">
        <td><strong>Status:</strong></td>
        <td>ProtoXEP</td>
      </tr>
      <tr valign="top">
        <td><strong>Type:</strong></td>
        <td>Standards Track</td>
      </tr>
      <tr valign="top">
        <td><strong>Version:</strong></td>
        <td>0.0.1</td>
      </tr>
      <tr valign="top">
        <td><strong>Last Updated:</strong></td>
        <td>2013-12-11</td>
      </tr>
    </table>
    <hr>
    <p style="color:red">WARNING: This document has not yet been accepted for consideration or approved in any official manner by the XMPP Standards Foundation, and this document is not yet an XMPP Extension Protocol (XEP). If this document is accepted as a XEP by the XMPP Council, it will be published at &lt;<a href="http://xmpp.org/extensions/">http://xmpp.org/extensions/</a>&gt; and announced on the &lt;standards@xmpp.org&gt; mailing list.</p>
    <hr>
    <h2>Table of Contents</h2>
    <div class="indent">
      <p><br>1.  <a href="#intro">Introduction</a><br>2.  <a href="#glossary">Glossary</a><br>3.  <a href="#usecases">Use Cases</a><br>   
      3.1.  <a href="#simpletable">Sending a simple table</a><br>   
      3.2.  <a href="#textfallback">Text version fallback mechanism</a><br>   
      3.3.  <a href="#alignments">Adding cell alignments</a><br>   
      3.4.  <a href="#columnrowformats">Column and Row Formats</a><br>   
      3.5.  <a href="#colorsandfonts">Colors and fonts</a><br>   
      3.6.  <a href="#cellspan">Cell span</a><br>   
      3.7.  <a href="#xhtmlimcontent">XHTML-IM content with text fallback</a><br>   
      3.8.  <a href="#splittingtable">Splitting a table into multiple messages</a><br>4.  <a href="#support">Determining Support</a><br>5.  <a href="#rules">Business Rules</a><br>   
      5.1.  <a href="#sect-ID0EYFAC">Column number mismatch</a><br>   
      5.2.  <a href="#xhtmlfallback">XHTML-IM fallback</a><br>   
      5.3.  <a href="#tableformats">Table Formats</a><br>   
      5.4.  <a href="#columnformats">Column Formats</a><br>   
      5.5.  <a href="#rowformats">Row Formats</a><br>   
      5.6.  <a href="#cellspans">Cel spans</a><br>   
      5.7.  <a href="#splittingtables">Splitting Tables</a><br>6.  <a href="#impl">Implementation Notes</a><br>   
      6.1.  <a href="#sect-ID0EHMAC">Feature support</a><br>7.  <a href="#access">Accessibility Considerations</a><br>8.  <a href="#i18n">Internationalization Considerations</a><br>   
      8.1.  <a href="#lang">xml:lang</a><br>9.  <a href="#security">Security Considerations</a><br>10.  <a href="#iana">IANA Considerations</a><br>11.  <a href="#registrar">XMPP Registrar Considerations</a><br>12.  <a href="#schema">XML Schema</a></p>
      <p><a href="#appendices">Appendices</a><br>    <a href="#appendix-docinfo">A: Document Information</a><br>    <a href="#appendix-authorinfo">B: Author Information</a><br>    <a href="#appendix-legal">C: Legal Notices</a><br>    <a href="#appendix-xmpp">D: Relation to XMPP</a><br>    <a href="#appendix-discuss">E: Discussion Venue</a><br>    <a href="#appendix-conformance">F: Requirements Conformance</a><br>    <a href="#appendix-notes">G: Notes</a><br>    <a href="#appendix-revs">H: Revision History</a></p>
    </div>
    <hr>
    <h2>1.
       <a name="intro">Introduction</a></h2>
        <p class="" style="">
            There are cases where an interchange of tables between internet messaging clients and/or chat robots is desired. Examples include pasting
            tabulated data from the clipboard (perhaps copied from a spread sheet) or a chat robot presenting data in tabular form.
        </p>
        <p class="" style="">
            Prior to this extension sending tabulated data could be achieved in various ways:
        </p>
        <ul class="" style="">
            <li class="" style="">
				<p class="" style="">
					The tabulated data could be sent using a normal text message without formatting, where cells where separated by a tab character (\t).
					The problem with this approach is that it only works if contents are more or less uniformly spaced. When cell contents cross by the receiver
					preset tabs, the columns are offset a corresponding amount of columns. And since the sender cannot control which font is used to present the
					data, there's no way for the sender to know if data is tabulated correctly on the receiving end or not.
				</p>
			</li>
            <li class="" style="">
				<p class="" style="">
					The tabulated data could be encoded using HTML and sent according to <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0071.html">XHTML-IM</a></span>  [<a href="#nt-ID0EAE">1</a>] This works in some clients, but is actually prohibited in §5 of
					the same extension. Since support for this is prohibited and extension of the corresponding XEP is not desired, using XHTML-IM to convey
					tabular data is not a recommended option.
				</p>
			</li>
            <li class="" style="">
				<p class="" style="">
					The tabulated data could be rendered as an image on the sender side, and the image transmitted to the client either using XHTML-IM itself, or
					some other means. The problem with this approach is that the tabular data cannot be used by the received more than to view it. It cannot be
					edited, saved or used in a spread sheet application, which might have been the original idea.
				</p>
			</li>
        </ul>
        <p class="" style="">
            So this extension specifies a means to encode and send simple tabulated data between XMPP clients. Apart from being easy to single out and render, the
            receiver would also have the benefit of knowing the data is of tabular format, which allows the client to encode it as such when copying the data
            to a clipboard, making it easy to paste it into spread sheets. Using this extension it would be easy to interchange tabular data without having to
            go through the process of saving it in files, transmitting files and separately opening them, which includes trusting file content, scanning them
            with antivirus software, etc.
        </p>
    <h2>2.
       <a name="glossary">Glossary</a></h2>
        <p class="" style="">The following table lists common terms and corresponding descriptions.</p>
        <div class="indent">
      <dl>
            <di>
                <dt><strong>Table</strong></dt>
                <dd>A table consists of cells arranged along columns and rows.</dd>
            </di>
            <di>
                <dt><strong>Row</strong></dt>
                <dd>
                    A horizontal set of cells in a table. All cells in a row are aligned vertically, and each cell in the row has the same height, which corresponds
                    to the highest height of all the cells in the row.
                </dd>
            </di>
            <di>
                <dt><strong>Column</strong></dt>
                <dd>
                    A vertical set of cells in a table. All cells in a column are aligned horizontally, and each cell in the column has the same width, which corresponds
                    to the widest width of all the cells in the column.
                </dd>
            </di>
            <di>
                <dt><strong>Cell</strong></dt>
                <dd>A cell is a rectangular region in a table. It contains content to be rendered in the corresponding region. The size of the cell depends on its contents.</dd>
            </di>
            <di>
                <dt><strong>Alignment</strong></dt>
                <dd>
                    There are two types of alignments: Horizontal alignment and vertical alignment. They define how content is displayed in a region that is either
                    wider or higher than the content itself.
                </dd>
            </di>
        </dl>
    </div>
    <h2>3.
       <a name="usecases">Use Cases</a></h2>
		<div class="indent">
      <h3>3.1 <a name="simpletable">Sending a simple table</a></h3>
			<p class="" style="">
				The following example shows how to send a simple table in a chat message. The horizontal and vertical spacing defined in the table element
				specifies a hint to the renderer how many pixels should be used to space cells apart in the table.
			</p>
			<p class="caption"><a name="example-1"></a>Example 1. Simple table</p>
      <div class="indent">
        <pre class="prettyprint">
				
&lt;message from='device@clayster.com/device' to='user@clayster.com/client' type='chat' xml:lang='en'&gt;
    &lt;table xmlns="urn:xmpp:tables" hspacing='5' vspacing='2'&gt;
        &lt;row&gt;
            &lt;cell&gt;Field&lt;/cell&gt;
            &lt;cell&gt;Value&lt;/cell&gt;
            &lt;cell&gt;Unit&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Location&lt;/cell&gt;
            &lt;cell&gt;Viña del Mar&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition&lt;/cell&gt;
            &lt;cell&gt;Fair&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition Code&lt;/cell&gt;
            &lt;cell&gt;34&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Temperature&lt;/cell&gt;
            &lt;cell&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Chill&lt;/cell&gt;
            &lt;cell&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Direction&lt;/cell&gt;
            &lt;cell&gt;330&lt;/cell&gt;
            &lt;cell&gt;°&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Speed&lt;/cell&gt;
            &lt;cell&gt;14,48&lt;/cell&gt;
            &lt;cell&gt;km/h&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Humidity&lt;/cell&gt;
            &lt;cell&gt;52&lt;/cell&gt;
            &lt;cell&gt;%&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Visibility&lt;/cell&gt;
            &lt;cell&gt;9,99&lt;/cell&gt;
            &lt;cell&gt;km&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure&lt;/cell&gt;
            &lt;cell&gt;1015,92&lt;/cell&gt;
            &lt;cell&gt;mbar&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure Trend&lt;/cell&gt;
            &lt;cell&gt;Steady&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
    &lt;/table&gt;
&lt;/message&gt;
			</pre>
      </div>
		</div>
		<div class="indent">
      <h3>3.2 <a name="textfallback">Text version fallback mechanism</a></h3>
			<p class="" style="">
				The following example shows how to add a text version of the table in the message that can be displayed in clients not supporting this extension.
			</p>
			<p class="caption"><a name="example-2"></a>Example 2. Table with text version fallback</p>
      <div class="indent">
        <pre class="prettyprint">
				
&lt;message from='device@clayster.com/device' to='user@clayster.com/client' type='chat' xml:lang='en'&gt;
    &lt;body&gt;Field	Value	Unit
Location	Viña del Mar
Condition	Fair
Condition Code	34
Temperature	18	°C
Chill	18	°C
Wind Direction	330	°
Wind Speed	14,48	km/h
Humidity	52	%
Visibility	9,99	km
Pressure	1015,92	mbar
Pressure Trend	Steady&lt;/body&gt;
    &lt;table xmlns="urn:xmpp:tables" hspacing='5' vspacing='2'&gt;
        &lt;row&gt;
            &lt;cell&gt;Field&lt;/cell&gt;
            &lt;cell&gt;Value&lt;/cell&gt;
            &lt;cell&gt;Unit&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Location&lt;/cell&gt;
            &lt;cell&gt;Viña del Mar&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition&lt;/cell&gt;
            &lt;cell&gt;Fair&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition Code&lt;/cell&gt;
            &lt;cell&gt;34&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Temperature&lt;/cell&gt;
            &lt;cell&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Chill&lt;/cell&gt;
            &lt;cell&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Direction&lt;/cell&gt;
            &lt;cell&gt;330&lt;/cell&gt;
            &lt;cell&gt;°&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Speed&lt;/cell&gt;
            &lt;cell&gt;14,48&lt;/cell&gt;
            &lt;cell&gt;km/h&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Humidity&lt;/cell&gt;
            &lt;cell&gt;52&lt;/cell&gt;
            &lt;cell&gt;%&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Visibility&lt;/cell&gt;
            &lt;cell&gt;9,99&lt;/cell&gt;
            &lt;cell&gt;km&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure&lt;/cell&gt;
            &lt;cell&gt;1015,92&lt;/cell&gt;
            &lt;cell&gt;mbar&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure Trend&lt;/cell&gt;
            &lt;cell&gt;Steady&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
    &lt;/table&gt;
&lt;/message&gt;
			</pre>
      </div>
		</div>
		<div class="indent">
      <h3>3.3 <a name="alignments">Adding cell alignments</a></h3>
			<p class="" style="">
				The following example adds content alignment to individual cells to control how the content is laid out inside the corresponding cells.
			</p>
			<p class="" style="">
				<span class="strong">Note:</span> Default horizontal alignment is <span class="strong">Left</span>, and default vertical alignment is <span class="strong">Top</span>. Cell attributes
				override any corresponding row or column attributes.
			</p>
			<p class="caption"><a name="example-3"></a>Example 3. Cell alignments</p>
      <div class="indent">
        <pre class="prettyprint">
				
&lt;message from='device@clayster.com/device' to='user@clayster.com/client' type='chat' xml:lang='en'&gt;
    &lt;body&gt;Field	Value	Unit
Location	Viña del Mar
Condition	Fair
Condition Code	34
Temperature	18	°C
Chill	18	°C
Wind Direction	330	°
Wind Speed	14,48	km/h
Humidity	52	%
Visibility	9,99	km
Pressure	1015,92	mbar
Pressure Trend	Steady&lt;/body&gt;
    &lt;table xmlns="urn:xmpp:tables" hspacing='5' vspacing='2'&gt;
        &lt;row&gt;
            &lt;cell&gt;Field&lt;/cell&gt;
            &lt;cell&gt;Value&lt;/cell&gt;
            &lt;cell&gt;Unit&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Location&lt;/cell&gt;
            &lt;cell&gt;Viña del Mar&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition&lt;/cell&gt;
            &lt;cell&gt;Fair&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition Code&lt;/cell&gt;
            &lt;cell halign='Right'&gt;34&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Temperature&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Chill&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Direction&lt;/cell&gt;
            &lt;cell halign='Right'&gt;330&lt;/cell&gt;
            &lt;cell&gt;°&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Speed&lt;/cell&gt;
            &lt;cell halign='Right'&gt;14,48&lt;/cell&gt;
            &lt;cell&gt;km/h&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Humidity&lt;/cell&gt;
            &lt;cell halign='Right'&gt;52&lt;/cell&gt;
            &lt;cell&gt;%&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Visibility&lt;/cell&gt;
            &lt;cell halign='Right'&gt;9,99&lt;/cell&gt;
            &lt;cell&gt;km&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure&lt;/cell&gt;
            &lt;cell halign='Right'&gt;1015,92&lt;/cell&gt;
            &lt;cell&gt;mbar&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure Trend&lt;/cell&gt;
            &lt;cell&gt;Steady&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
    &lt;/table&gt;
&lt;/message&gt;
			</pre>
      </div>
		</div>
		<div class="indent">
      <h3>3.4 <a name="columnrowformats">Column and Row Formats</a></h3>
			<p class="" style="">
				The following example uses column and row formats to format all cells in specific columns and rows in a certain way. Using column and row 
				formats avoids the use of repeated attributes for each cell in the corresponding column or row.
			</p>
			<p class="" style="">
				<span class="strong">Note:</span> Column formats override any conflicting table formats, row formats override any conflicting column or table formats, 
				and cell formats override any conflicting row, column or table formats.
			</p>
			<p class="caption"><a name="example-4"></a>Example 4. Column and Row Formats</p>
      <div class="indent">
        <pre class="prettyprint">
				
&lt;message from='device@clayster.com/device' to='user@clayster.com/client' type='chat' xml:lang='en'&gt;
    &lt;body&gt;Field	Value	Unit
Location	Viña del Mar
Condition	Fair
Condition Code	34
Temperature	18	°C
Chill	18	°C
Wind Direction	330	°
Wind Speed	14,48	km/h
Humidity	52	%
Visibility	9,99	km
Pressure	1015,92	mbar
Pressure Trend	Steady&lt;/body&gt;
    &lt;table xmlns="urn:xmpp:tables" hspacing='5' vspacing='2'&gt;
        &lt;columnFormat bold='true'/&gt;
        &lt;columnFormat italic='true'/&gt;
        &lt;columnFormat italic='true'/&gt;
        &lt;row bold='true' italic='false'&gt;
            &lt;cell&gt;Field&lt;/cell&gt;
            &lt;cell&gt;Value&lt;/cell&gt;
            &lt;cell&gt;Unit&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Location&lt;/cell&gt;
            &lt;cell&gt;Viña del Mar&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition&lt;/cell&gt;
            &lt;cell&gt;Fair&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition Code&lt;/cell&gt;
            &lt;cell halign='Right'&gt;34&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Temperature&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Chill&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Direction&lt;/cell&gt;
            &lt;cell halign='Right'&gt;330&lt;/cell&gt;
            &lt;cell&gt;°&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Speed&lt;/cell&gt;
            &lt;cell halign='Right'&gt;14,48&lt;/cell&gt;
            &lt;cell&gt;km/h&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Humidity&lt;/cell&gt;
            &lt;cell halign='Right'&gt;52&lt;/cell&gt;
            &lt;cell&gt;%&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Visibility&lt;/cell&gt;
            &lt;cell halign='Right'&gt;9,99&lt;/cell&gt;
            &lt;cell&gt;km&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure&lt;/cell&gt;
            &lt;cell halign='Right'&gt;1015,92&lt;/cell&gt;
            &lt;cell&gt;mbar&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure Trend&lt;/cell&gt;
            &lt;cell&gt;Steady&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
    &lt;/table&gt;
&lt;/message&gt;
			</pre>
      </div>
		</div>
		<div class="indent">
      <h3>3.5 <a name="colorsandfonts">Colors and fonts</a></h3>
			<p class="" style="">
				The following example shows how to explicitly define colors and fonts for the table or its parts. When specified, they override any default settings used
				by the IM client.
			</p>
			<p class="" style="">
				<span class="strong">Note:</span> Font sizes are never set explicitly. Instead, a font size multiplier is used to define the font size. It is multiplied by the font size
				currently being used in the IM client to get the actual font size desired.
			</p>
			<p class="" style="">
				<span class="strong">Note 2:</span> If a font with the given name is not found, the current font should be used, i.e. the font being used if no font name was specified.
			</p>
			<p class="caption"><a name="example-5"></a>Example 5. Colors and fonts</p>
      <div class="indent">
        <pre class="prettyprint">
				
&lt;message from='device@clayster.com/device' to='user@clayster.com/client' type='chat' xml:lang='en'&gt;
    &lt;body&gt;Field	Value	Unit
Location	Viña del Mar
Condition	Fair
Condition Code	34
Temperature	18	°C
Chill	18	°C
Wind Direction	330	°
Wind Speed	14,48	km/h
Humidity	52	%
Visibility	9,99	km
Pressure	1015,92	mbar
Pressure Trend	Steady&lt;/body&gt;
    &lt;table xmlns="urn:xmpp:tables" hspacing='5' vspacing='2' bgColor='FFFFFF' fgColor='000000' fontSizeMultiplier='1.125' fontName='Arial'&gt;
        &lt;columnFormat bold='true'/&gt;
        &lt;columnFormat italic='true' fontName='Courier New'/&gt;
        &lt;columnFormat italic='true' fontName='Courier New'/&gt;
        &lt;row bold='true' italic='false' fontName='Arial'&gt;
            &lt;cell&gt;Field&lt;/cell&gt;
            &lt;cell&gt;Value&lt;/cell&gt;
            &lt;cell&gt;Unit&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Location&lt;/cell&gt;
            &lt;cell&gt;Viña del Mar&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition&lt;/cell&gt;
            &lt;cell&gt;Fair&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Condition Code&lt;/cell&gt;
            &lt;cell halign='Right'&gt;34&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Temperature&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Chill&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Direction&lt;/cell&gt;
            &lt;cell halign='Right'&gt;330&lt;/cell&gt;
            &lt;cell&gt;°&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Wind Speed&lt;/cell&gt;
            &lt;cell halign='Right'&gt;14,48&lt;/cell&gt;
            &lt;cell&gt;km/h&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Humidity&lt;/cell&gt;
            &lt;cell halign='Right'&gt;52&lt;/cell&gt;
            &lt;cell&gt;%&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Visibility&lt;/cell&gt;
            &lt;cell halign='Right'&gt;9,99&lt;/cell&gt;
            &lt;cell&gt;km&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure&lt;/cell&gt;
            &lt;cell halign='Right'&gt;1015,92&lt;/cell&gt;
            &lt;cell&gt;mbar&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Pressure Trend&lt;/cell&gt;
            &lt;cell&gt;Steady&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
    &lt;/table&gt;
&lt;/message&gt;
			</pre>
      </div>
		</div>
		<div class="indent">
      <h3>3.6 <a name="cellspan">Cell span</a></h3>
			<p class="" style="">
				Normally, each cell in a table occupies exactly one cell in the internal grid generated by the table. However, sometimes you want the contents
				of a cell to span multiple columns and/or rows in the table. You can do this by using the attributes <span class="strong">colSpan</span> and <span class="strong">rowSpan</span>.
				Any cell using these attributes will be formatted according to the formatting of the top left cell in the invisible grid generated by the table. Alignment
				however is computed over the entire span of the cell.
			</p>
			<p class="caption"><a name="example-6"></a>Example 6. Cell span</p>
      <div class="indent">
        <pre class="prettyprint">
				
&lt;message from='device@clayster.com/device' to='user@clayster.com/client' type='chat' xml:lang='en'&gt;
    &lt;body&gt;Field	Value	Unit
Location	Viña del Mar
Condition	Fair
Condition Code	34
Temperature	18	°C
Chill	18	°C
Wind Direction	330	°
Wind Speed	14,48	km/h
Humidity	52	%
Visibility	9,99	km
Pressure	1015,92	mbar
Pressure Trend	Steady&lt;/body&gt;
    &lt;table xmlns="urn:xmpp:tables" hspacing='5' vspacing='2' bgColor='FFFFFF' fgColor='000000' fontSizeMultiplier='1.125' fontName='Arial'&gt;
        &lt;columnFormat bold='true'/&gt;
        &lt;columnFormat italic='true' fontName='Courier New'/&gt;
        &lt;columnFormat italic='true' fontName='Courier New'/&gt;
        &lt;row bold='true' italic='false' fontName='Arial'&gt;
            &lt;cell&gt;Field&lt;/cell&gt;
            &lt;cell&gt;Value&lt;/cell&gt;
            &lt;cell&gt;Unit&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Location&lt;/cell&gt;
            &lt;cell colSpan='2' halign='Center'&gt;Viña del Mar&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition&lt;/cell&gt;
            &lt;cell colSpan='2' halign='Center'&gt;Fair&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Condition Code&lt;/cell&gt;
            &lt;cell halign='Right'&gt;34&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Temperature&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Chill&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Direction&lt;/cell&gt;
            &lt;cell halign='Right'&gt;330&lt;/cell&gt;
            &lt;cell&gt;°&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Wind Speed&lt;/cell&gt;
            &lt;cell halign='Right'&gt;14,48&lt;/cell&gt;
            &lt;cell&gt;km/h&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Humidity&lt;/cell&gt;
            &lt;cell halign='Right'&gt;52&lt;/cell&gt;
            &lt;cell&gt;%&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Visibility&lt;/cell&gt;
            &lt;cell halign='Right'&gt;9,99&lt;/cell&gt;
            &lt;cell&gt;km&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure&lt;/cell&gt;
            &lt;cell halign='Right'&gt;1015,92&lt;/cell&gt;
            &lt;cell&gt;mbar&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Pressure Trend&lt;/cell&gt;
            &lt;cell colSpan='2' halign='Center'&gt;Steady&lt;/cell&gt;
        &lt;/row&gt;
    &lt;/table&gt;
&lt;/message&gt;
			</pre>
      </div>
		</div>
		<div class="indent">
      <h3>3.7 <a name="xhtmlimcontent">XHTML-IM content with text fallback</a></h3>
			<p class="" style="">
				Sometimes you might want to insert content in a table that is not pure text. Examples can be images, links or text formatted more in detail.
				<a href="http://xmpp.org/extensions/xep-0071.html">XEP-0071: XHTML-IM</a> defines a mechanism whereby this can be achieved. However, since
				not all clients support XHTML-IM, a text fallback mechanism should always be provided.
			</p>
			<p class="" style="">
				The following example builds on the previous examples and shows how XHTML-IM can be embedded into a cell in a table together with a text fallback 
				that can be used by the table renderer in the client, if support for XHTML-IM is not available.
			</p>
			<p class="" style="">
				<span class="strong">Note:</span> Since the <span class="strong">cell</span> element is of a mixed type you can mix both text and child elements. Note however, that any
				whitespace around the child elements are considered part of the text fallback.
			</p>
			<p class="caption"><a name="example-7"></a>Example 7. XHTML-IM content with text fallback</p>
      <div class="indent">
        <pre class="prettyprint">
				
&lt;message from='device@clayster.com/device' to='user@clayster.com/client' type='chat' xml:lang='en'&gt;
    &lt;body&gt;Field	Value	Unit
Location	Viña del Mar
Condition	Fair
Condition Code	34
Temperature	18	°C
Chill	18	°C
Wind Direction	330	°
Wind Speed	14,48	km/h
Humidity	52	%
Visibility	9,99	km
Pressure	1015,92	mbar
Pressure Trend	Steady&lt;/body&gt;
    &lt;table xmlns="urn:xmpp:tables" hspacing='5' vspacing='2' bgColor='FFFFFF' fgColor='000000' fontSizeMultiplier='1.125' fontName='Arial'&gt;
        &lt;columnFormat bold='true'/&gt;
        &lt;columnFormat italic='true' fontName='Courier New'/&gt;
        &lt;columnFormat italic='true' fontName='Courier New'/&gt;
        &lt;row bold='true' italic='false' fontName='Arial'&gt;
            &lt;cell&gt;Field&lt;/cell&gt;
            &lt;cell&gt;Value&lt;/cell&gt;
            &lt;cell&gt;Unit&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Location&lt;/cell&gt;
            &lt;cell colSpan='2' halign='Center'&gt;Viña del Mar&lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
                &lt;a href='http://weather.yahoo.com/chile/valparaiso/vina-del-mar-349873/'&gt;Viña del Mar&lt;/a&gt;
            &lt;/html&gt;&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition&lt;/cell&gt;
            &lt;cell colSpan='2' halign='Center'&gt;Fair&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Condition Code&lt;/cell&gt;
            &lt;cell halign='Right'&gt;34&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Temperature&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Chill&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Direction&lt;/cell&gt;
            &lt;cell halign='Right'&gt;330&lt;/cell&gt;
            &lt;cell&gt;°&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Wind Speed&lt;/cell&gt;
            &lt;cell halign='Right'&gt;14,48&lt;/cell&gt;
            &lt;cell&gt;km/h&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Humidity&lt;/cell&gt;
            &lt;cell halign='Right'&gt;52&lt;/cell&gt;
            &lt;cell&gt;%&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Visibility&lt;/cell&gt;
            &lt;cell halign='Right'&gt;9,99&lt;/cell&gt;
            &lt;cell&gt;km&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure&lt;/cell&gt;
            &lt;cell halign='Right'&gt;1015,92&lt;/cell&gt;
            &lt;cell&gt;mbar&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Pressure Trend&lt;/cell&gt;
            &lt;cell colSpan='2' halign='Center'&gt;Steady&lt;/cell&gt;
        &lt;/row&gt;
    &lt;/table&gt;
&lt;/message&gt;
			</pre>
      </div>
		</div>
		<div class="indent">
      <h3>3.8 <a name="splittingtable">Splitting a table into multiple messages</a></h3>
			<p class="" style="">
				Since messages have a size limit, the <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc6120">XMPP Core</a></span>  [<a href="#nt-ID0EDDAC">2</a>] defines a minimal maximal stanza size of 10000 bytes, it might be necessary to split larger
				tables into multiple messages. This is done using the <span class="strong">toBeContinued</span> element before closing the <span class="strong">table</span> element,
				as is shown in the following example.
			</p>
			<p class="" style="">
				<span class="strong">Note:</span> The <span class="strong">toBeContinued</span> element is placed last, since it might be difficult to know the final stanza size before
				doing the actual XML serialization. Since any text fallback might be rendered at the top, the entire table might or might not be available in the
				text fallback part. The IM client, when receiving the continuation of the table, must not assume any fallback versions of the table are at the same
				position as the table part. The fallback version might be equally streamed, more advanced, or less advanced as the table version. If continuation
				messages contain fallbacks they should be presented using the same logic as the previous message.
			</p>
			<p class="" style="">
				<span class="strong">Note 2:</span> Any table and column formatting provided in previous parts will be automatically applied to the continuation of the table.
				It is not necessary to repeat these. Any conflicting table or column formats provided in continuations will simply be ignored.
			</p>
			<p class="caption"><a name="example-8"></a>Example 8. Splitting a table into multiple messages</p>
      <div class="indent">
        <pre class="prettyprint">
				
&lt;message from='device@clayster.com/device' to='user@clayster.com/client' type='chat' xml:lang='en'&gt;
    &lt;body&gt;Field	Value	Unit
Location	Viña del Mar
Condition	Fair
Condition Code	34
Temperature	18	°C
Chill	18	°C&lt;/body&gt;
    &lt;table xmlns="urn:xmpp:tables" hspacing='5' vspacing='2' bgColor='FFFFFF' fgColor='000000' fontSizeMultiplier='1.125' fontName='Arial'&gt;
        &lt;columnFormat bold='true'/&gt;
        &lt;columnFormat italic='true' fontName='Courier New'/&gt;
        &lt;columnFormat italic='true' fontName='Courier New'/&gt;
        &lt;row bold='true' italic='false' fontName='Arial'&gt;
            &lt;cell&gt;Field&lt;/cell&gt;
            &lt;cell&gt;Value&lt;/cell&gt;
            &lt;cell&gt;Unit&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Location&lt;/cell&gt;
            &lt;cell colSpan='2' halign='Center'&gt;Viña del Mar&lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
                &lt;a href='http://weather.yahoo.com/chile/valparaiso/vina-del-mar-349873/'&gt;Viña del Mar&lt;/a&gt;
            &lt;/html&gt;&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Condition&lt;/cell&gt;
            &lt;cell colSpan='2' halign='Center'&gt;Fair&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Condition Code&lt;/cell&gt;
            &lt;cell halign='Right'&gt;34&lt;/cell&gt;
            &lt;cell/&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Temperature&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Chill&lt;/cell&gt;
            &lt;cell halign='Right'&gt;18&lt;/cell&gt;
            &lt;cell&gt;°C&lt;/cell&gt;
        &lt;/row&gt;
        &lt;toBeContinued/&gt;
    &lt;/table&gt;
&lt;/message&gt;
 
&lt;message from='device@clayster.com/device' to='user@clayster.com/client' type='chat' xml:lang='en'&gt;
    &lt;body&gt;Wind Direction	330	°
Wind Speed	14,48	km/h
Humidity	52	%
Visibility	9,99	km
Pressure	1015,92	mbar
Pressure Trend	Steady&lt;/body&gt;
    &lt;table xmlns="urn:xmpp:tables"&gt;
        &lt;row&gt;
            &lt;cell&gt;Wind Direction&lt;/cell&gt;
            &lt;cell halign='Right'&gt;330&lt;/cell&gt;
            &lt;cell&gt;°&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Wind Speed&lt;/cell&gt;
            &lt;cell halign='Right'&gt;14,48&lt;/cell&gt;
            &lt;cell&gt;km/h&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Humidity&lt;/cell&gt;
            &lt;cell halign='Right'&gt;52&lt;/cell&gt;
            &lt;cell&gt;%&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Visibility&lt;/cell&gt;
            &lt;cell halign='Right'&gt;9,99&lt;/cell&gt;
            &lt;cell&gt;km&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row&gt;
            &lt;cell&gt;Pressure&lt;/cell&gt;
            &lt;cell halign='Right'&gt;1015,92&lt;/cell&gt;
            &lt;cell&gt;mbar&lt;/cell&gt;
        &lt;/row&gt;
        &lt;row bgColor='E0E0E0'&gt;
            &lt;cell&gt;Pressure Trend&lt;/cell&gt;
            &lt;cell colSpan='2' halign='Center'&gt;Steady&lt;/cell&gt;
        &lt;/row&gt;
    &lt;/table&gt;
&lt;/message&gt;
			</pre>
      </div>
		</div>
	<h2>4.
       <a name="support">Determining Support</a></h2>
		<p class="" style="">If an entity supports the reception of events as specified herein, it MUST advertise that fact by returning a feature of "urn:xmpp:tables" in response to <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0030.html">Service Discovery</a></span>  [<a href="#nt-ID0EREAC">3</a>] information requests.</p>
		<p class="caption"><a name="example-9"></a>Example 9. Service discovery information request</p>
    <div class="indent">
      <pre class="prettyprint">
			
&lt;iq type='get'
    from='user1@clayster.com/client'
    to='user2@clayster.com/client'
    id='disco1'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
		</pre>
    </div>
		<p class="caption"><a name="example-10"></a>Example 10. Service discovery information response</p>
    <div class="indent">
      <pre class="prettyprint">
			
&lt;iq type='result'
    from='user2@clayster.com/client'
    to='user1@clayster.com/client'
    id='disco1'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    ...
    &lt;feature var='urn:xmpp:tables'/&gt;
    ...
  &lt;/query&gt;
&lt;/iq&gt;
		</pre>
    </div>
		<p class="" style="">
			In order for an application to determine whether an entity supports this protocol, where possible it SHOULD use the dynamic, presence-based profile of service discovery defined
			in <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0115.html">Entity Capabilities</a></span>  [<a href="#nt-ID0EIFAC">4</a>]. However, if an application has not received entity capabilities information from an entity, it SHOULD use explicit service discovery instead.
		</p>
	<h2>5.
       <a name="rules">Business Rules</a></h2>
		<p class="" style="">
			The following subsections define rules how to interpret data in case of perceived inconsistencies.
		</p>
		<div class="indent">
      <h3>5.1 <a name="sect-ID0EYFAC">Column number mismatch</a></h3>
			<p class="" style="">
				It is allowed to have table with different number of columns. The table is considered to have the number of columns necessary to display
				the row with the maximum number of columns, or the number of column formats if that number is greater. All rows with a smaller number of 
				columns will be considered to have empty cells to the right, to fill up the table.
			</p>
		</div>
		<div class="indent">
      <h3>5.2 <a name="xhtmlfallback">XHTML-IM fallback</a></h3>
			<p class="" style="">
				The examples in the <a href="#usecases">Use Cases</a> section only contain a text fallback mechanism when sending chat messages.
				It is possible to have multiple kinds of fallback mechanisms, for instance a text fallback and an XHTML-IM fallback. The IM client
				is supposed to select the version that it knows how to render best. Following are some guidelines:
			</p>
			<ul class="" style="">
				<li class="" style="">
					<p class="" style="">
						If the IM client does not support either XHTML-IM or tables, the text fallback is used to display the content.
					</p>
				</li>
				<li class="" style="">
					<p class="" style="">
						If the IM client only supports the XHTML-IM extension, but not the table extension, it will select the XHTML-IM fallback if such is available, 
						otherwise the text fallback will be displayed.
					</p>
				</li>
				<li class="" style="">
					<p class="" style="">
						If the IM client only supports the table extension but not the XHTML-IM extension, it will select the table content and display it.
					</p>
				</li>
				<li class="" style="">
					<p class="" style="">
						If the IM client supports both the XHTML-IM extension and the table extension, the table content should be chosen in favor of the XHTML-IM
						fallback, if the XHTML-IM engine in the IM client does not support the XHTML Tables Module  [<a href="#nt-ID0EUHAC">5</a>]. If the XHTML Tables Module is supported by the XHTML-IM engine, the XHTML-IM content should be selected in favor of the table content
						as described in this extension.
					</p>
				</li>
			</ul>
		</div>
		<div class="indent">
      <h3>5.3 <a name="tableformats">Table Formats</a></h3>
			<p class="" style="">
				The <span class="strong">table</span> element itself can contain format settings. Any formatting provided in <span class="strong">table</span> elements override any default settings
				provided by the IM client.
			</p>
			<p class="" style="">
				The <span class="strong">hSpacing</span> and <span class="strong">vSpacing</span> attributes, which are unique to the <span class="strong">table</span> element,
				provide information on how much space should be inserted between cells in the table. The unit used is pixels.
			</p>
		</div>
		<div class="indent">
      <h3>5.4 <a name="columnformats">Column Formats</a></h3>
			<p class="" style="">
				Column formats are defined before any rows and cells, as shown in the <a href="#usecases">Use Cases</a> section. Any formatting provided in 
				<span class="strong">columnFormat</span> elements override any corresponding table settings, or default settings provided by the IM client. The <span class="strong">columnFormat</span>
				elements do not contain cell definitions themselves. Cells are defined in <span class="strong">row</span> elements.
			</p>
		</div>
		<div class="indent">
      <h3>5.5 <a name="rowformats">Row Formats</a></h3>
			<p class="" style="">
				Row formats are provided in <span class="strong">row</span> elements. Any formatting provided in <span class="strong">row</span> elements override any corresponding table settings, row settings
				or default settings provided by the IM client.
			</p>
		</div>
		<div class="indent">
      <h3>5.6 <a name="cellspans">Cel spans</a></h3>
			<p class="" style="">
				Cells can span multiple regions in the invisible grid defined by the table. By default, each cell in the table only spans one such
				grid element. By using the attributes <span class="strong">colSpan</span> and <span class="strong">rowSpan</span> respectively, the cell can define the number of
				grid elements it will span both horizontally (<span class="strong">colSpan</span>) and vertically (<span class="strong">rowSpan</span>).
			</p>
			<p class="" style="">
				A cell spanning multiple grid elements will obtain the formatting defined for the top left grid element in the invisible grid defined by the table.
				Alignment and formatting will be applied to the entire cell however, not only the top left grid element from which the formatting was taken.
			</p>
			<p class="" style="">
				When computing grid element widths in the table, it is the width of the rightmost grid element that will be adjusted to fit the contents of a cell
				that spans multiple grid elements horizontally.
			</p>
			<p class="" style="">
				In the same manner, it is the height of the bottommost grid element that will be adjusted to fit the contents of the cell that spans multiple grid 
				elements vertically.
			</p>
		</div>
		<div class="indent">
      <h3>5.7 <a name="splittingtables">Splitting Tables</a></h3>
			<p class="" style="">
				Since messages have a size limit, the <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc6120">XMPP Core</a></span>  [<a href="#nt-ID0EELAC">6</a>] defines a minimal maximal stanza size of 10000 bytes, it might be necessary to split larger
				tables into multiple messages. This is done using the <span class="strong">toBeContinued</span> element before closing the <span class="strong">table</span> element,
				as is shown in the following example.
			</p>
			<p class="" style="">
				The <span class="strong">toBeContinued</span> element is placed last, since it might be difficult to know the final stanza size before
				doing the actual XML serialization. Since any text fallback might be rendered at the top, the entire table might or might not be available in the
				text fallback part. The IM client, when receiving the continuation of the table, must not assume any fallback versions of the table are at the same
				position as the table part. The fallback version might be equally streamed, more advanced, or less advanced as the table version. If continuation
				messages contain fallbacks they should be presented using the same logic as the previous message.
			</p>
			<p class="" style="">
				Any table and column formatting provided in previous parts will be automatically applied to the continuation of the table.
				It is not necessary to repeat these. Any conflicting table or column formats provided in continuations will simply be ignored.
			</p>
			<p class="" style="">
				If the sender goes offline before the continuation message is received, or if it takes more than <span class="strong">one minute</span> to receive the continuation,
				the client should consider the continuation message to be lost and the current message not to be a continuation but a new table message.
			</p>
		</div>
    <h2>6.
       <a name="impl">Implementation Notes</a></h2>
		<div class="indent">
      <h3>6.1 <a name="sect-ID0EHMAC">Feature support</a></h3>
			<p class="" style="">
				The following tables list features defined by this extension and if they MUST be supported, SHOULD be supported or MAY be supported by the table renderer,
				if this extension is supported by the IM-client.
			</p>
			<div class="indent">
        <p class="caption"><a name="table-1"></a>Table 1: Elements</p>
        <table border="1" cellpadding="3" cellspacing="0">
				<tr class="body">
					<th colspan="" rowspan="">Element</th>
					<th colspan="" rowspan="">Support</th>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">cell</td>
					<td colspan="" rowspan="">MUST</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">html</td>
					<td colspan="" rowspan="">MAY</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">columnFormat</td>
					<td colspan="" rowspan="">MUST</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">row</td>
					<td colspan="" rowspan="">MUST</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">table</td>
					<td colspan="" rowspan="">MUST</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">toBeContinued</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
			</table>
      </div>
			<div class="indent">
        <p class="caption"><a name="table-2"></a>Table 2: Attributes</p>
        <table border="1" cellpadding="3" cellspacing="0">
				<tr class="body">
					<th colspan="" rowspan="">Attribute</th>
					<th colspan="" rowspan="">Support</th>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">bgColor</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">bold</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">colSpan</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">fgColor</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">fontName</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">fontSizeMultiplier</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">hAlign</td>
					<td colspan="" rowspan="">MUST</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">hSpacing</td>
					<td colspan="" rowspan="">MUST</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">italics</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">rowSpan</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">strikeThrough</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">underline</td>
					<td colspan="" rowspan="">SHOULD</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">vAlign</td>
					<td colspan="" rowspan="">MUST</td>
				</tr>
				<tr class="body">
					<td colspan="" rowspan="">vSpacing</td>
					<td colspan="" rowspan="">MUST</td>
				</tr>
			</table>
      </div>
		</div>
	<h2>7.
       <a name="access">Accessibility Considerations</a></h2>
		<p class="" style="">
			When receiving a table in an IM-client it should be treated as tabular data as far as possible. It means that the user might probably want to select the table,
			or a rectangular part of the table, save it in some file format that is compatible with spread sheets, or copied to the clipboard in a format compatible with
			spread sheets. the user might also want to copy spread sheet data back to the IM-client which should send it according to this extension back to the original 
			sender.
		</p>
    <h2>8.
       <a name="i18n">Internationalization Considerations</a></h2>
		<div class="indent">
      <h3>8.1 <a name="lang">xml:lang</a></h3>
			<p class="" style="">
				Table messages SHOULD contain an <span class="strong">xml:lang</span> attribute on the message stanza to specify the language
				used in message texts, including table content. If language information is not available, the <span class="strong">xml:lang</span> attribute can be omitted.
			</p>
		</div>
	<h2>9.
       <a name="security">Security Considerations</a></h2>
		<p class="" style="">
			If integrating with XHTML-IM, consider any security considerations provided in <a href="http://xmpp.org/extensions/xep-0071.html#security">XEP-0071</a>.
		</p>
    <h2>10.
       <a name="iana">IANA Considerations</a></h2>
		<p class="" style="">This document requires no interaction with the <span class="ref" style=""><a href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a></span>  [<a href="#nt-ID0EDGAE">7</a>].</p>
	<h2>11.
       <a name="registrar">XMPP Registrar Considerations</a></h2>
		<p class="" style="">
			The <a href="#schema">protocol schema</a> needs to be added to the list of <a href="http://xmpp.org/resources/schemas/">XMPP protocol schemas</a>.
		</p>
	<h2>12.
       <a name="schema">XML Schema</a></h2>
        <p class="caption">
    </p>
    <div class="indent">
      <pre class="prettyprint">
            
    &lt;?xml version='1.0' encoding='UTF-8'?&gt;
    &lt;xs:schema
        xmlns:xs='http://www.w3.org/2001/XMLSchema'
        targetNamespace='urn:xmpp:tables'
        xmlns='urn:xmpp:tables'
        xmlns:xdc='urn:xmpp:xdata:color'
        xmlns:xhtml-im='http://jabber.org/protocol/xhtml-im'
        elementFormDefault='qualified'&gt;
 
        &lt;xs:import namespace='urn:xmpp:xdata:color'/&gt;
        &lt;xs:import namespace='http://jabber.org/protocol/xhtml-im'/&gt;
 
        &lt;xs:element name='table'&gt;
            &lt;xs:complexType&gt;
                &lt;xs:sequence&gt;
                    &lt;xs:element name='columnFormat' minOccurs='0' maxOccurs='unbounded'&gt;
                        &lt;xs:complexType&gt;
                            &lt;xs:attributeGroup ref='contentAttributes'/&gt;
                        &lt;/xs:complexType&gt;
                    &lt;/xs:element&gt;
                    &lt;xs:element name='row' minOccurs='1' maxOccurs='unbounded'&gt;
                        &lt;xs:complexType&gt;
                            &lt;xs:sequence&gt;
                                &lt;xs:element name='cell' minOccurs='1' maxOccurs='unbounded'&gt;
                                    &lt;xs:complexType mixed='true'&gt;
                                        &lt;xs:choice&gt;
                                            &lt;xs:element ref='xhtml-im:html' minOccurs='0' maxOccurs='1'/&gt;
                                        &lt;/xs:choice&gt;
                                        &lt;xs:attributeGroup ref='contentAttributes'/&gt;
                                        &lt;xs:attribute name='colSpan' type='xs:positiveInteger' use='optional' default='1'/&gt;
                                        &lt;xs:attribute name='rowSpan' type='xs:positiveInteger' use='optional' default='1'/&gt;
                                    &lt;/xs:complexType&gt;
                                &lt;/xs:element&gt;
                            &lt;/xs:sequence&gt;
                            &lt;xs:attributeGroup ref='contentAttributes'/&gt;
                        &lt;/xs:complexType&gt;
                    &lt;/xs:element&gt;
                    &lt;xs:element name='toBeContinued' minOccurs='0' maxOccurs='1'&gt;
                        &lt;xs:complexType/&gt;
                    &lt;/xs:element&gt;
                &lt;/xs:sequence&gt;
                &lt;xs:attributeGroup ref='contentAttributes'/&gt;
                &lt;xs:attribute name='hSpacing' type='xs:nonNegativeInteger' use='optional' default='0'/&gt;
                &lt;xs:attribute name='vSpacing' type='xs:nonNegativeInteger' use='optional' default='0'/&gt;
            &lt;/xs:complexType&gt;
        &lt;/xs:element&gt;
 
        &lt;xs:attributeGroup name='contentAttributes'&gt;
            &lt;xs:attribute name='halign' type='HorizontalAlignment' use='optional' default='Left'/&gt;
            &lt;xs:attribute name='valign' type='VerticalAlignment' use='optional' default='Top'/&gt;
            &lt;xs:attribute name='fgColor' type='xdc:Color' use='optional'/&gt;
            &lt;xs:attribute name='bgColor' type='xdc:Color' use='optional'/&gt;
            &lt;xs:attribute name='fontName' type='xs:string' use='optional'/&gt;
            &lt;xs:attribute name='fontSizeMultiplier' type='PositiveDouble' use='optional' default='1.0'/&gt;
            &lt;xs:attribute name='bold' type='xs:boolean' use='optional'/&gt;
            &lt;xs:attribute name='italics' type='xs:boolean' use='optional'/&gt;
            &lt;xs:attribute name='underline' type='xs:boolean' use='optional'/&gt;
            &lt;xs:attribute name='strikeThrough' type='xs:boolean' use='optional'/&gt;
        &lt;/xs:attributeGroup&gt;
 
        &lt;xs:simpleType name='HorizontalAlignment'&gt;
            &lt;xs:restriction base='xs:string'&gt;
                &lt;xs:enumeration value='Left'/&gt;
                &lt;xs:enumeration value='Center'/&gt;
                &lt;xs:enumeration value='Right'/&gt;
            &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
 
        &lt;xs:simpleType name='VerticalAlignment'&gt;
            &lt;xs:restriction base='xs:string'&gt;
                &lt;xs:enumeration value='Top'/&gt;
                &lt;xs:enumeration value='Center'/&gt;
                &lt;xs:enumeration value='Bottom'/&gt;
            &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
 
        &lt;xs:simpleType name='PositiveDouble'&gt;
            &lt;xs:restriction base='xs:double'&gt;
                &lt;xs:minExclusive value='0'/&gt;
            &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
 
    &lt;/xs:schema&gt;
        </pre>
    </div>
    <hr><a name="appendices"></a><h2>Appendices</h2>
    <hr><a name="appendix-docinfo"></a><h3>Appendix A: Document Information</h3>
    <p class="indent">
            Series: <a href="http://xmpp.org/extensions/">XEP</a><br>
            Number: xxxx<br>
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br>
            Status: 
            <a href="http://xmpp.org/extensions/xep-0001.html#states-ProtoXEP">ProtoXEP</a><br>
            Type:
            <a href="http://xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards Track</a><br>
            Version: 0.0.1<br>
            Last Updated: 2013-12-11<br>
                Approving Body: <a href="http://xmpp.org/council/">XMPP Council</a><br>Dependencies: XMPP Core, XEP-0001, XEP-0071, XEP-0331<br>
                Supersedes: None<br>
                Superseded By: None<br>
            Short Name: NOT_YET_ASSIGNED<br>
            This document in other formats: 
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-xxxx.xml">XML</a> 
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-xxxx.pdf">PDF</a></p>
    <hr><a name="appendix-authorinfo"></a><h3>Appendix B: Author Information</h3>
    <div class="indent">
      <h3>Peter Waher</h3>
      <p class="indent">
        Email:
        <a href="mailto:peter.waher@clayster.com">peter.waher@clayster.com</a><br>
        JabberID: 
        <a href="xmpp:peter.waher@jabber.org">peter.waher@jabber.org</a><br>
        URI: 
        <a href="http://www.linkedin.com/in/peterwaher">http://www.linkedin.com/in/peterwaher</a><br></p>
    </div>
    <hr><a name="appendix-legal"></a><h3>Appendix C: Legal Notices</h3>
    <div class="indent">
      <h4>Copyright</h4>This XMPP Extension Protocol is copyright © 1999 - 2013 by the <a href="http://xmpp.org/">XMPP Standards Foundation</a> (XSF).<h4>Permissions</h4>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h4>Disclaimer of Warranty</h4><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. ##</span><h4>Limitation of Liability</h4>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h4>IPR Conformance</h4>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which can be found at &lt;<a href="http://xmpp.org/about-xmpp/xsf/xsf-ipr-policy/">http://xmpp.org/about-xmpp/xsf/xsf-ipr-policy/</a>&gt; or obtained by writing to XMPP Standards Foundation, 1899 Wynkoop Street, Suite 600, Denver, CO 80202 USA).</div>
    <hr><a name="appendix-xmpp"></a><h3>Appendix D: Relation to XMPP</h3>
    <p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 6120) and XMPP IM (RFC 6121) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p>
    <hr><a name="appendix-discuss"></a><h3>Appendix E: Discussion Venue</h3>
    <p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p>
    <p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p>
    <p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p>
    <hr><a name="appendix-conformance"></a><h3>Appendix F: Requirements Conformance</h3>
    <p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p>
    <hr><a name="appendix-notes"></a><h3>Appendix G: Notes</h3>
    <div class="indent">
      <p><a name="nt-ID0EAE">1</a>. XEP-0071: XHTML-IM &lt;<a href="http://xmpp.org/extensions/xep-0071.html">http://xmpp.org/extensions/xep-0071.html</a>&gt;.</p>
      <p><a name="nt-ID0EDDAC">2</a>. RFC 6120: Extensible Messaging and Presence Protocol (XMPP): Core &lt;<a href="http://tools.ietf.org/html/rfc6120">http://tools.ietf.org/html/rfc6120</a>&gt;.</p>
      <p><a name="nt-ID0EREAC">3</a>. XEP-0030: Service Discovery &lt;<a href="http://xmpp.org/extensions/xep-0030.html">http://xmpp.org/extensions/xep-0030.html</a>&gt;.</p>
      <p><a name="nt-ID0EIFAC">4</a>. XEP-0115: Entity Capabilities &lt;<a href="http://xmpp.org/extensions/xep-0115.html">http://xmpp.org/extensions/xep-0115.html</a>&gt;.</p>
      <p><a name="nt-ID0EUHAC">5</a>. 
							XHTML Tables Module:
							<a href="http://www.w3.org/TR/2004/WD-xhtml2-20040722/mod-tables.html">http://www.w3.org/TR/2004/WD-xhtml2-20040722/mod-tables.html</a>.
						</p>
      <p><a name="nt-ID0EELAC">6</a>. RFC 6120: Extensible Messaging and Presence Protocol (XMPP): Core &lt;<a href="http://tools.ietf.org/html/rfc6120">http://tools.ietf.org/html/rfc6120</a>&gt;.</p>
      <p><a name="nt-ID0EDGAE">7</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p>
    </div>
    <hr><a name="appendix-revs"></a><h3>Appendix H: Revision History</h3>
    <p>Note: Older versions of this specification might be available at <a href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a></p>
    <div class="indent">
      <h4>Version 0.0.1 (2013-12-11)</h4>
      <div class="indent">
                <p class="" style="">First draft.</p>
             (pw)
    </div>
    </div>
    <hr>
    <p>END</p>
  </body>
</html>